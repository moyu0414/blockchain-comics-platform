{"ast":null,"code":"import React,{useState,useEffect}from'react';import{Form,Row,Col,Button,ProgressBar}from'react-bootstrap';import{CardImage}from'react-bootstrap-icons';import{message}from'antd';import{disableAllButtons,enableAllButtons}from'../index';import Web3 from'web3';import comicData from'../contracts/ComicPlatform.json';import $ from'jquery';import{useLocation}from'react-router-dom';import{useTranslation}from'react-i18next';import i18n from'../i18n';import axios from'axios';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const website=process.env.REACT_APP_Website;const API_KEY=process.env.REACT_APP_API_KEY;const MintNFT=props=>{const[web3,setWeb3]=useState(null);const[contract,setContract]=useState(null);const[msg,updateMsg]=useState('');const[stepCompleted,setStepCompleted]=useState(false);const[showChapterForm,setShowChapterForm]=useState(false);const location=useLocation();const currentAccount=localStorage.getItem(\"currentAccount\");const[comic,setComic]=useState([]);const[newComic,setNewComic]=useState({category:'',title:'',description:'',imgURL:''});const[NFTData,setNFTData]=useState({title:'',price:'',description:'',quantity:'',royalty:'',comicHash:'',verify:'0'});const[descForK,setDescForK]=useState('');const[loading,setLoading]=useState(false);const[selectedCategories,setSelectedCategories]=useState([]);const[showDescription,setShowDescription]=useState(false);const[inputValues,setInputValues]=useState({});// 用于存储每个输入框的值\nconst[isCheck,setIsCheck]=useState(false);const[nftFile,setNftFile]=useState([]);const[previewImageUrl,setPreviewImageUrl]=useState('');const{t}=useTranslation();const headers={'api-key':API_KEY};const BATCH_SIZE=10;// 每批处理的最大数量\nconst[grading,setGrading]=useState([\"角色商品化\",\"改編權\",\"廣告宣傳\",\"專屬會員卡\",\"粉絲俱樂部徽章\",\"線上社區認證\",\"數位平台使用\"]);const defaultDescriptions={\"角色商品化\":t('角色商品化_描述'),\"改編權\":t('改編權_描述'),\"廣告宣傳\":t('廣告宣傳_描述'),\"專屬會員卡\":t('專屬會員卡_描述'),\"粉絲俱樂部徽章\":t('粉絲俱樂部徽章_描述'),\"線上社區認證\":t('線上社區認證_描述'),\"數位平台使用\":t('數位平台使用_描述'),\"其他：自行創建\":\"\"};// 連接到 Web3 的函數\nasync function connectToWeb3(){if(window.ethereum){try{const web3=new Web3(window.ethereum);setWeb3(web3);const contractInstance=new web3.eth.Contract(comicData.abi,comicData.address);setContract(contractInstance);}catch(error){console.error(error);}}else{message.info(t('請安裝MetaMask'));}};// 鑄造NFT函數\nconst createNFT=async e=>{e.preventDefault();try{const fillFile=await checkFile();if(fillFile===-1)return;if(!contract){console.error('合約實例未初始化');return;}let price_temp=parseFloat(NFTData.price);price_temp=web3.utils.toWei(price_temp,'ether');if(price_temp<10000000000000000||NFTData.quantity<=0||NFTData.royalty<1||NFTData.royalty>10){message.info(t('請填寫正確數量'));return;}disableAllButtons();updateMsg(t('正在鑄造NFT中'));const verify=NFTData.verify?NFTData.verify:0;//console.log(\"title：\" + NFTData.title);\n//console.log(\"price：\" + NFTData.price);\n//console.log(\"description：\" + NFTData.description);  // DB用\n//console.log(\"description：\" + descForK.description);  // 合約用\n//console.log(\"royalty：\" + NFTData.royalty);\n//console.log(\"quantity：\" + NFTData.quantity);\n//console.log(\"comicHash：\" + NFTData.comicHash);\n//console.log(\"verify：\" + verify);\nconst transaction=await contract.methods._mintNFT(price_temp,descForK.description,NFTData.royalty,NFTData.quantity,NFTData.comicHash).send({from:currentAccount});const transactionHash=transaction.transactionHash;//console.log(transactionHash);\nconst receipt=await web3.eth.getTransactionReceipt(transactionHash);const tokenIds=[];for(let i=NFTData.quantity*2-2;i>=0;i-=2){const tokenId=web3.utils.hexToNumberString(receipt.logs[i].topics[3]);tokenIds.push(tokenId);}const{allSuccess,failedTokenIds}=await postNFTDataInBatches(tokenIds,{comicHash:NFTData.comicHash,minter:currentAccount,price:JSON.stringify({\"1\":NFTData.price}),tokenTitle:NFTData.title,description:NFTData.description,forSale:1,royalty:NFTData.royalty,owner:currentAccount,verify:verify});if(allSuccess){message.info(t('鑄造NFT成功'));updateMsg(\"\");window.location.replace(\"/analysis\");}else{console.log('Failed token IDs:',failedTokenIds);message.info(t('部分NFT鑄造失敗，請檢查控制台了解詳情'));}enableAllButtons();}catch(error){if(error.message.includes('User denied transaction signature')){message.info(t('拒绝交易'));}else{alert(t('鑄造NFT時發生錯誤')+error);}enableAllButtons();updateMsg(\"\");}};async function postNFTDataInBatches(tokenIds,formData){let allSuccess=true;const failedTokenIds=[];for(let i=0;i<tokenIds.length;i+=BATCH_SIZE){const batch=tokenIds.slice(i,i+BATCH_SIZE);const batchFormData=new FormData();batch.forEach(tokenId=>{batchFormData.append('tokenId',tokenId);});batchFormData.append('comicHash',formData.comicHash);batchFormData.append('minter',formData.minter);batchFormData.append('price',formData.price);batchFormData.append('tokenTitle',formData.tokenTitle);batchFormData.append('description',formData.description);batchFormData.append('forSale',formData.forSale);batchFormData.append('royalty',formData.royalty);batchFormData.append('owner',formData.owner);batchFormData.append('verify',formData.verify);if(nftFile.length!=0){batchFormData.append('nftIMG',nftFile);}const result=await postNFTDataBatch(batchFormData);if(!result.success){allSuccess=false;batch.forEach(tokenId=>failedTokenIds.push(tokenId));console.error(\"Failed batch with tokenIds: \".concat(batch.join(', ')),result.error);}}return{allSuccess,failedTokenIds};}async function postNFTDataBatch(formData){try{const response=await axios.post(\"\".concat(website,\"/api/add/NFT\"),formData,{headers:{'Content-Type':'multipart/form-data','api-key':API_KEY}});//console.log(response.data);\nreturn{success:true};}catch(error){return{success:false,error};}}async function checkFile(){const{title,price,description,quantity,royalty}=NFTData;// 檔案不可為空\nif(title&&title.length>50){message.info(t('標題命名不可超過50個字!'));return-1;}else if(quantity>50){message.info(t('發行數量一次最多50個!'));return-1;}else if(royalty>10){message.info(t('抽成比例最多10%!'));return-1;}else if(!title||!price||!description||!quantity||!royalty){updateMsg(t('請填寫所有欄位'));return-1;}return 0;};useEffect(()=>{const fetchData=async()=>{if(!location.state)return;//console.log(\"Location state:\", location.state);\ntry{const storedArrayJSON=localStorage.getItem('comicDatas');const storedArray=JSON.parse(storedArrayJSON);const temp=storedArray.find(item=>item.comicID===location.state.comicID);setComic([temp]);const[imageResponse,protoResponse]=await Promise.all([axios.get(\"\".concat(website,\"/api/comicIMG/\").concat(temp.comic_id),{responseType:'blob',headers}),temp.protoFilename?axios.get(\"\".concat(website,\"/api/coverFile/\").concat(temp.comic_id),{responseType:'blob',headers}):Promise.resolve(null)]);const imgURL=URL.createObjectURL(imageResponse.data);const coverImg=protoResponse?URL.createObjectURL(protoResponse.data):'';setNewComic({category:temp.category,title:temp.title,description:temp.description,imgURL:imgURL,coverImg:coverImg});setNFTData({comicHash:temp.comic_id});setShowChapterForm(location.state.showChapterForm);connectToWeb3();setLoading(true);}catch(error){console.error('Error fetching data:',error);}};fetchData();},[location]);useEffect(()=>{const combinedDescription=selectedCategories.filter(category=>category!==t('其他：自行創建')).map(category=>\"\".concat(category,\": \").concat(inputValues[category]||'')).join('\\n');const combinedDescriptionForK=selectedCategories.filter(category=>category!==t('其他：自行創建')).map(category=>\"\".concat(t(category),\": \").concat(inputValues[category]||'')).join('\\n');const otherDescription=showDescription?\"\".concat(inputValues['其他：IP名稱']||'',\": \").concat(inputValues['其他：IP敘述']||''):'';setNFTData(prevData=>({...prevData,description:\"\".concat(combinedDescription,\"\\n\").concat(otherDescription)}));setDescForK(prevData=>({...prevData,description:\"\".concat(combinedDescriptionForK,\"\\n\").concat(otherDescription)}));},[inputValues,selectedCategories,showDescription]);const handleCategoryChange=e=>{const{value,checked}=e.target;setSelectedCategories(prevSelectedCategories=>{if(checked){// 如果勾选了该项，将其添加到 selectedCategories 中\nreturn[...prevSelectedCategories,value];}else{// 如果取消勾选，则从 selectedCategories 中移除该项\nreturn prevSelectedCategories.filter(category=>category!==value);}});// 控制描述框的显示\nsetShowDescription(value===t('其他：自行創建')?checked:showDescription);// 初始化或清除输入框的值\nif(value===t('其他：自行創建')&&checked){setInputValues(prevValues=>({...prevValues,[value]:defaultDescriptions[value]}));}else if(value!==t('其他：自行創建')){setInputValues(prevValues=>({...prevValues,[value]:defaultDescriptions[value]}));}};const handleInputChange=(e,category)=>{const{value}=e.target;setInputValues(prevValues=>({...prevValues,[category]:value}));};const handleCheckboxChange=e=>{setIsCheck(e.target.checked);};const createPromoCover=e=>{const file=e.target.files[0];if(!file){setPreviewImageUrl('');return;}if(validateFileType(file)){const reader=new FileReader();reader.onloadend=()=>{setPreviewImageUrl(reader.result);};reader.readAsDataURL(file);setNftFile(file);}else{message.info(t('文件類型不支持，請上傳...格式的圖片'));}};const validateFileType=file=>{const allowedTypes=[\"image/jpeg\",\"image/png\",\"image/jpg\"];return allowedTypes.includes(file.type);};return/*#__PURE__*/_jsxs(\"div\",{className:\"upload-form\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"step-container\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"step-item \".concat(stepCompleted&&!showChapterForm?'step-completed':''),children:[/*#__PURE__*/_jsxs(\"div\",{className:\"step-line\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"line \".concat(stepCompleted?'bg-blue':'bg-gray')}),/*#__PURE__*/_jsx(\"div\",{className:\"dot\",children:\"1\"}),/*#__PURE__*/_jsx(\"div\",{className:\"line \".concat(stepCompleted?'bg-blue':'bg-gray')})]}),/*#__PURE__*/_jsx(\"div\",{className:\"step-title\",children:t('漫畫資訊')})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"step-item \".concat(!showChapterForm&&!stepCompleted?'step-item-gray':''),children:[/*#__PURE__*/_jsxs(\"div\",{className:\"step-line\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"line \".concat(!showChapterForm&&!stepCompleted?'bg-gray':'bg-blue')}),/*#__PURE__*/_jsx(\"div\",{className:\"dot\",children:\"2\"}),/*#__PURE__*/_jsx(\"div\",{className:\"line \".concat(!showChapterForm&&!stepCompleted?'bg-gray':'bg-blue')})]}),/*#__PURE__*/_jsx(\"div\",{className:\"step-title\",children:t('鑄造NFT')})]})]}),/*#__PURE__*/_jsx(Form.Group,{as:Row,className:\"mb-1\",children:/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex'},children:[/*#__PURE__*/_jsx(Form.Label,{className:\"label-style col-form-label\",children:t('漫畫名稱')}),/*#__PURE__*/_jsx(Form.Control,{type:\"text\",defaultValue:newComic.title,style:{marginLeft:'10px'},disabled:true})]})}),/*#__PURE__*/_jsx(Form.Group,{as:Row,className:\"mb-3\",children:/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex'},children:[/*#__PURE__*/_jsx(Form.Label,{className:\"label-style mb-1 col-form-label\",children:t('漫畫類型')}),/*#__PURE__*/_jsx(Form.Control,{className:\"form-select\",defaultValue:t(newComic.category),style:{marginLeft:'10px'},disabled:true})]})}),/*#__PURE__*/_jsx(Form.Group,{className:\"pb-3\",children:/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex'},children:[/*#__PURE__*/_jsx(Form.Label,{className:\"label-style col-form-label\",children:t('漫畫簡介')}),/*#__PURE__*/_jsx(Form.Control,{as:\"textarea\",rows:5,defaultValue:newComic.description,style:{marginLeft:'10px'},disabled:true})]})}),/*#__PURE__*/_jsx(Form.Group,{className:\"pb-3\",children:/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex'},children:[/*#__PURE__*/_jsx(Form.Label,{className:\"label-style mb-1 col-form-label\",htmlFor:\"image\",children:t('漫畫封面')}),/*#__PURE__*/_jsx(\"img\",{src:newComic.imgURL,alt:\"Preview\",style:{width:'60%',maxWidth:'300px',paddingBottom:'3%',marginLeft:'10px'}})]})}),/*#__PURE__*/_jsx(Form.Group,{className:\"pb-4\",children:/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex'},children:[/*#__PURE__*/_jsx(Form.Label,{className:\"label-style mb-1 col-form-label\",children:t('漫畫橫向封面')}),newComic.coverImg?/*#__PURE__*/_jsx(\"img\",{src:newComic.coverImg,alt:\"Preview\",style:{width:'60%',maxWidth:'300px',paddingBottom:'3%',marginLeft:'10px'}}):/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h3\",{style:{marginLeft:'10px'},children:t('目前無上傳橫向封面')}),/*#__PURE__*/_jsx(\"br\",{})]})]})}),/*#__PURE__*/_jsxs(Form.Group,{as:Row,className:\"mb-3\",children:[/*#__PURE__*/_jsxs(Form.Label,{children:[\"NFT \",t('名稱')]}),/*#__PURE__*/_jsx(Form.Control,{type:\"text\",placeholder:t('請輸入NFT標題名稱'),value:NFTData.title,onChange:e=>setNFTData({...NFTData,title:e.target.value})})]}),/*#__PURE__*/_jsxs(Form.Group,{as:Row,className:\"mb-3\",children:[/*#__PURE__*/_jsx(Form.Label,{children:t('NFT價格')}),/*#__PURE__*/_jsx(Form.Control,{type:\"number\",placeholder:t('至少 0.01 ETH'),step:\"0.01\",min:\"0.01\",value:NFTData.price,onChange:e=>setNFTData({...NFTData,price:e.target.value})})]}),/*#__PURE__*/_jsxs(Form,{children:[/*#__PURE__*/_jsxs(Form.Group,{as:Row,className:\"mb-2\",children:[/*#__PURE__*/_jsx(\"div\",{style:{display:'flex'},children:/*#__PURE__*/_jsx(Form.Label,{children:t('IP種類')})}),/*#__PURE__*/_jsxs(Col,{children:[grading.map((name,index)=>/*#__PURE__*/_jsx(Form.Check,{type:\"checkbox\",id:\"category-\".concat(index),label:t(name),value:name,onChange:handleCategoryChange,checked:selectedCategories.includes(name)},index)),/*#__PURE__*/_jsx(Form.Check,{type:\"checkbox\",id:\"category-other\",label:t('其他：自行創建'),value:t('其他：自行創建'),onChange:handleCategoryChange,checked:selectedCategories.includes(t('其他：自行創建'))})]})]}),selectedCategories.map(category=>category!==t('其他：自行創建')&&/*#__PURE__*/_jsxs(Form.Group,{className:\"mb-4\",children:[/*#__PURE__*/_jsxs(Form.Label,{children:[t(category),\" \",t('權限範圍')]}),/*#__PURE__*/_jsx(Form.Control,{type:\"text\",placeholder:t('请確認或修改...權限範圍',{category:t(category)}),value:inputValues[category]||'',onChange:e=>handleInputChange(e,category)})]},category)),showDescription&&/*#__PURE__*/_jsxs(Form.Group,{className:\"mb-4\",children:[/*#__PURE__*/_jsx(Form.Label,{children:t('其他：IP名稱')}),/*#__PURE__*/_jsx(Form.Control,{type:\"text\",placeholder:t('請輸入IP名稱'),value:inputValues['其他：IP名稱']||'',onChange:e=>handleInputChange(e,'其他：IP名稱')}),/*#__PURE__*/_jsx(Form.Label,{children:t('其他：IP敘述')}),/*#__PURE__*/_jsx(Form.Control,{type:\"text\",placeholder:t('請描述IP的使用權限、範圍等'),value:inputValues['其他：IP敘述']||'',onChange:e=>handleInputChange(e,'其他：IP敘述')})]})]}),/*#__PURE__*/_jsxs(Form.Group,{as:Row,className:\"mt-4 mb-2\",children:[/*#__PURE__*/_jsx(Form.Label,{children:t('發行數量')}),/*#__PURE__*/_jsx(Form.Control,{type:\"number\",placeholder:t('至少1個、至多50個'),step:\"1\",min:\"1\",max:\"50\",value:NFTData.quantity,onChange:e=>setNFTData({...NFTData,quantity:e.target.value})})]}),/*#__PURE__*/_jsxs(Form.Group,{as:Row,className:\"mt-4 mb-2\",children:[/*#__PURE__*/_jsx(Form.Label,{title:t('第2次轉售時可抽成的比例'),children:t('抽成比例(上限10%)，單位：％')}),/*#__PURE__*/_jsx(Form.Control,{type:\"number\",placeholder:t('至少1%，至多10%'),step:\"1\",min:\"1\",max:\"10\",value:NFTData.royalty,onChange:e=>setNFTData({...NFTData,royalty:e.target.value}),title:t('這是您的抽成比例，最多可設為 10%')})]}),/*#__PURE__*/_jsx(Form.Group,{controlId:\"file-upload\",className:\"pb-3\",children:/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',alignItems:'center'},children:[/*#__PURE__*/_jsx(Form.Label,{className:\"col-form-label\",title:t('購買NFT的使用者須先進行身分驗證才可購買'),style:{marginRight:'1rem',whiteSpace:'nowrap'},children:t('買家身分驗證')}),/*#__PURE__*/_jsx(Form.Check,{type:\"checkbox\",onChange:e=>setNFTData({...NFTData,verify:e.target.checked?'1':'0'}),style:{transform:'scale(1.8)',marginRight:'1rem'}})]})}),/*#__PURE__*/_jsxs(Form.Group,{controlId:\"file-upload\",className:\"pb-3\",children:[/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',alignItems:'center'},children:[/*#__PURE__*/_jsx(Form.Label,{className:\"col-form-label\",title:t('上傳圖片作為NFT的封面'),style:{marginRight:'1rem',whiteSpace:'nowrap'},children:t('NFT封面')}),/*#__PURE__*/_jsx(Form.Check,{type:\"checkbox\",onChange:handleCheckboxChange,checked:isCheck,style:{transform:'scale(1.8)',marginRight:'1rem'}}),isCheck&&/*#__PURE__*/_jsx(Form.Control,{type:\"file\",name:\"fileUpload\",accept:\"image/*\",style:{flex:1,marginBottom:'0'},onChange:createPromoCover})]}),isCheck&&/*#__PURE__*/_jsx(\"div\",{className:\"file-upload mintNFT-img-height\",style:{display:'flex',flexDirection:'column',marginTop:'1rem'},children:/*#__PURE__*/_jsx(\"div\",{id:\"start\",style:{display:'block'},children:previewImageUrl?/*#__PURE__*/_jsx(\"img\",{src:previewImageUrl,alt:\"Cover Preview\",style:{height:'28vh'}}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(CardImage,{size:48}),/*#__PURE__*/_jsx(\"div\",{id:\"notimage2\",className:\"hidden\",children:t('上傳NFT橫向封面')})]})})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"text-red-500 text-center\",children:msg}),/*#__PURE__*/_jsx(Button,{onClick:createNFT,id:\"list-button\",\"data-backgroundcolor\":\"#fff\",children:t('確定鑄造')})]});};export default MintNFT;","map":{"version":3,"names":["React","useState","useEffect","Form","Row","Col","Button","ProgressBar","CardImage","message","disableAllButtons","enableAllButtons","Web3","comicData","$","useLocation","useTranslation","i18n","axios","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","website","process","env","REACT_APP_Website","API_KEY","REACT_APP_API_KEY","MintNFT","props","web3","setWeb3","contract","setContract","msg","updateMsg","stepCompleted","setStepCompleted","showChapterForm","setShowChapterForm","location","currentAccount","localStorage","getItem","comic","setComic","newComic","setNewComic","category","title","description","imgURL","NFTData","setNFTData","price","quantity","royalty","comicHash","verify","descForK","setDescForK","loading","setLoading","selectedCategories","setSelectedCategories","showDescription","setShowDescription","inputValues","setInputValues","isCheck","setIsCheck","nftFile","setNftFile","previewImageUrl","setPreviewImageUrl","t","headers","BATCH_SIZE","grading","setGrading","defaultDescriptions","connectToWeb3","window","ethereum","contractInstance","eth","Contract","abi","address","error","console","info","createNFT","e","preventDefault","fillFile","checkFile","price_temp","parseFloat","utils","toWei","transaction","methods","_mintNFT","send","from","transactionHash","receipt","getTransactionReceipt","tokenIds","i","tokenId","hexToNumberString","logs","topics","push","allSuccess","failedTokenIds","postNFTDataInBatches","minter","JSON","stringify","tokenTitle","forSale","owner","replace","log","includes","alert","formData","length","batch","slice","batchFormData","FormData","forEach","append","result","postNFTDataBatch","success","concat","join","response","post","fetchData","state","storedArrayJSON","storedArray","parse","temp","find","item","comicID","imageResponse","protoResponse","Promise","all","get","comic_id","responseType","protoFilename","resolve","URL","createObjectURL","data","coverImg","combinedDescription","filter","map","combinedDescriptionForK","otherDescription","prevData","handleCategoryChange","value","checked","target","prevSelectedCategories","prevValues","handleInputChange","handleCheckboxChange","createPromoCover","file","files","validateFileType","reader","FileReader","onloadend","readAsDataURL","allowedTypes","type","className","children","Group","as","style","display","Label","Control","defaultValue","marginLeft","disabled","rows","htmlFor","src","alt","width","maxWidth","paddingBottom","placeholder","onChange","step","min","name","index","Check","id","label","max","controlId","alignItems","marginRight","whiteSpace","transform","accept","flex","marginBottom","flexDirection","marginTop","height","size","onClick"],"sources":["C:/Users/user1/Desktop/blockchain-comics-platform/frontend/src/routes/mintNFT.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { Form, Row, Col, Button, ProgressBar } from 'react-bootstrap';\r\nimport { CardImage } from 'react-bootstrap-icons';\r\nimport { message } from 'antd';\r\nimport { disableAllButtons, enableAllButtons } from '../index';\r\nimport Web3 from 'web3';\r\nimport comicData from '../contracts/ComicPlatform.json';\r\nimport $ from 'jquery';\r\nimport { useLocation } from 'react-router-dom';\r\nimport { useTranslation } from 'react-i18next';\r\nimport i18n from '../i18n';\r\nimport axios from 'axios';\r\nconst website = process.env.REACT_APP_Website;\r\nconst API_KEY = process.env.REACT_APP_API_KEY;\r\n\r\nconst MintNFT = (props) => {\r\n  const [web3, setWeb3] = useState(null);\r\n  const [contract, setContract] = useState(null);\r\n  const [msg, updateMsg] = useState('');\r\n  const [stepCompleted, setStepCompleted] = useState(false);\r\n  const [showChapterForm, setShowChapterForm] = useState(false);\r\n  const location = useLocation();\r\n  const currentAccount = localStorage.getItem(\"currentAccount\");\r\n  const [comic, setComic] = useState([]);\r\n  const [newComic, setNewComic] = useState({category:'',  title: '', description: '', imgURL: ''});\r\n  const [NFTData, setNFTData] = useState({title: '', price:'', description: '',quantity: '',royalty: '', comicHash:'', verify: '0'});\r\n  const [descForK, setDescForK] = useState('');\r\n  const [loading, setLoading] = useState(false);\r\n  const [selectedCategories, setSelectedCategories] = useState([]);\r\n  const [showDescription, setShowDescription] = useState(false);\r\n  const [inputValues, setInputValues] = useState({}); // 用于存储每个输入框的值\r\n  const [isCheck, setIsCheck] = useState(false);\r\n  const [nftFile, setNftFile] = useState([]);\r\n  const [previewImageUrl, setPreviewImageUrl] = useState('');\r\n  const { t } = useTranslation();\r\n  const headers = {'api-key': API_KEY};\r\n  const BATCH_SIZE = 10; // 每批处理的最大数量\r\n  const [grading, setGrading] = useState([\r\n    \"角色商品化\",\r\n    \"改編權\",\r\n    \"廣告宣傳\",\r\n    \"專屬會員卡\",\r\n    \"粉絲俱樂部徽章\",\r\n    \"線上社區認證\",\r\n    \"數位平台使用\"\r\n  ]);\r\n\r\n  const defaultDescriptions = {\r\n    \"角色商品化\": t('角色商品化_描述'),\r\n    \"改編權\": t('改編權_描述'),\r\n    \"廣告宣傳\": t('廣告宣傳_描述'),\r\n    \"專屬會員卡\": t('專屬會員卡_描述'),\r\n    \"粉絲俱樂部徽章\": t('粉絲俱樂部徽章_描述'),\r\n    \"線上社區認證\": t('線上社區認證_描述'),\r\n    \"數位平台使用\": t('數位平台使用_描述'),\r\n    \"其他：自行創建\": \"\"\r\n  };\r\n  \r\n  // 連接到 Web3 的函數\r\n  async function connectToWeb3(){\r\n    if (window.ethereum) {\r\n      try {\r\n        const web3 = new Web3(window.ethereum);\r\n        setWeb3(web3);\r\n        const contractInstance = new web3.eth.Contract(comicData.abi, comicData.address);\r\n        setContract(contractInstance);\r\n      } catch (error) {\r\n        console.error(error);\r\n      }\r\n    } else {\r\n      message.info(t('請安裝MetaMask'));\r\n    }\r\n  };\r\n\r\n  // 鑄造NFT函數\r\n  const createNFT = async (e) => {\r\n    e.preventDefault();\r\n    try {\r\n      const fillFile = await checkFile();\r\n      if(fillFile === -1)\r\n          return;\r\n      if (!contract) {\r\n        console.error('合約實例未初始化');\r\n        return;\r\n      }\r\n      let price_temp = parseFloat(NFTData.price);\r\n      price_temp = web3.utils.toWei(price_temp, 'ether');\r\n      if (price_temp < 10000000000000000 || NFTData.quantity <= 0 || NFTData.royalty < 1 || NFTData.royalty > 10) {\r\n        message.info(t('請填寫正確數量'));\r\n        return;\r\n      }\r\n\r\n      disableAllButtons();\r\n      updateMsg(t('正在鑄造NFT中'))\r\n\r\n      const verify = NFTData.verify ? NFTData.verify : 0;\r\n      //console.log(\"title：\" + NFTData.title);\r\n      //console.log(\"price：\" + NFTData.price);\r\n      //console.log(\"description：\" + NFTData.description);  // DB用\r\n      //console.log(\"description：\" + descForK.description);  // 合約用\r\n      //console.log(\"royalty：\" + NFTData.royalty);\r\n      //console.log(\"quantity：\" + NFTData.quantity);\r\n      //console.log(\"comicHash：\" + NFTData.comicHash);\r\n      //console.log(\"verify：\" + verify);\r\n     \r\n      const transaction = await contract.methods._mintNFT(price_temp, descForK.description, NFTData.royalty, NFTData.quantity, NFTData.comicHash).send({ from: currentAccount });\r\n      const transactionHash = transaction.transactionHash;\r\n      //console.log(transactionHash);\r\n      const receipt = await web3.eth.getTransactionReceipt(transactionHash);\r\n      const tokenIds = [];\r\n      for (let i = NFTData.quantity * 2 - 2; i >= 0; i -= 2) {\r\n        const tokenId = web3.utils.hexToNumberString(receipt.logs[i].topics[3]);\r\n        tokenIds.push(tokenId);\r\n      }\r\n      const { allSuccess, failedTokenIds } = await postNFTDataInBatches(tokenIds, {\r\n        comicHash: NFTData.comicHash,\r\n        minter: currentAccount,\r\n        price: JSON.stringify({ \"1\": NFTData.price }),\r\n        tokenTitle: NFTData.title,\r\n        description: NFTData.description,\r\n        forSale: 1,\r\n        royalty: NFTData.royalty,\r\n        owner: currentAccount,\r\n        verify: verify\r\n      });\r\n\r\n      if (allSuccess) {\r\n        message.info(t('鑄造NFT成功'));\r\n        updateMsg(\"\");\r\n        window.location.replace(\"/analysis\");\r\n      } else {\r\n        console.log('Failed token IDs:', failedTokenIds);\r\n        message.info(t('部分NFT鑄造失敗，請檢查控制台了解詳情'));\r\n      }\r\n      enableAllButtons();\r\n    } catch (error) {\r\n      if (error.message.includes('User denied transaction signature')) {\r\n        message.info(t('拒绝交易'));\r\n      } else {\r\n        alert(t('鑄造NFT時發生錯誤') + error);\r\n      }\r\n      enableAllButtons();\r\n      updateMsg(\"\");\r\n    }\r\n  };\r\n\r\n  async function postNFTDataInBatches(tokenIds, formData) {\r\n    let allSuccess = true;\r\n    const failedTokenIds = [];\r\n    for (let i = 0; i < tokenIds.length; i += BATCH_SIZE) {\r\n      const batch = tokenIds.slice(i, i + BATCH_SIZE);\r\n      const batchFormData = new FormData();\r\n      batch.forEach((tokenId) => {\r\n        batchFormData.append('tokenId', tokenId);\r\n      });\r\n      batchFormData.append('comicHash', formData.comicHash);\r\n      batchFormData.append('minter', formData.minter);\r\n      batchFormData.append('price', formData.price);\r\n      batchFormData.append('tokenTitle', formData.tokenTitle);\r\n      batchFormData.append('description', formData.description);\r\n      batchFormData.append('forSale', formData.forSale);\r\n      batchFormData.append('royalty', formData.royalty);\r\n      batchFormData.append('owner', formData.owner);\r\n      batchFormData.append('verify', formData.verify);\r\n      if (nftFile.length != 0) {\r\n        batchFormData.append('nftIMG', nftFile);\r\n      }\r\n      const result = await postNFTDataBatch(batchFormData);\r\n      if (!result.success) {\r\n        allSuccess = false;\r\n        batch.forEach(tokenId => failedTokenIds.push(tokenId));\r\n        console.error(`Failed batch with tokenIds: ${batch.join(', ')}`, result.error);\r\n      }\r\n    }\r\n    return { allSuccess, failedTokenIds };\r\n  }\r\n  \r\n  async function postNFTDataBatch(formData) {\r\n    try {\r\n      const response = await axios.post(`${website}/api/add/NFT`, formData, {\r\n        headers: {\r\n          'Content-Type': 'multipart/form-data',\r\n          'api-key': API_KEY\r\n        }\r\n      });\r\n      //console.log(response.data);\r\n      return { success: true };\r\n    } catch (error) {\r\n      return { success: false, error };\r\n    }\r\n  }\r\n\r\n  async function checkFile() {\r\n    const {title, price, description, quantity, royalty} = NFTData;\r\n    // 檔案不可為空\r\n    if (title && title.length > 50) {\r\n      message.info(t('標題命名不可超過50個字!'));\r\n      return -1;\r\n    } else if (quantity > 50) {\r\n      message.info(t('發行數量一次最多50個!'));\r\n      return -1;\r\n    }  else if (royalty > 10) {\r\n      message.info(t('抽成比例最多10%!'));\r\n      return -1;\r\n    } else if (!title || !price || !description || !quantity || !royalty) {\r\n      updateMsg(t('請填寫所有欄位'));\r\n      return -1;\r\n    }\r\n    return 0;\r\n  };\r\n\r\n  useEffect(() => {\r\n    const fetchData = async () => {\r\n        if (!location.state) return;\r\n        //console.log(\"Location state:\", location.state);\r\n        try {\r\n            const storedArrayJSON = localStorage.getItem('comicDatas');\r\n            const storedArray = JSON.parse(storedArrayJSON);\r\n            const temp = storedArray.find(item => item.comicID === location.state.comicID);\r\n            setComic([temp]);\r\n            const [imageResponse, protoResponse] = await Promise.all([\r\n                axios.get(`${website}/api/comicIMG/${temp.comic_id}`, { responseType: 'blob', headers }),\r\n                temp.protoFilename ? axios.get(`${website}/api/coverFile/${temp.comic_id}`, { responseType: 'blob', headers }) : Promise.resolve(null)\r\n            ]);\r\n            const imgURL = URL.createObjectURL(imageResponse.data);\r\n            const coverImg = protoResponse ? URL.createObjectURL(protoResponse.data) : '';\r\n            setNewComic({\r\n                category: temp.category,\r\n                title: temp.title,\r\n                description: temp.description,\r\n                imgURL: imgURL,\r\n                coverImg: coverImg\r\n            });\r\n            setNFTData({ comicHash: temp.comic_id });\r\n            setShowChapterForm(location.state.showChapterForm);\r\n            connectToWeb3();\r\n            setLoading(true);\r\n        } catch (error) {\r\n            console.error('Error fetching data:', error);\r\n        }\r\n    };\r\n    fetchData();\r\n}, [location]);\r\n\r\n\r\n  useEffect(() => {\r\n    const combinedDescription = selectedCategories\r\n      .filter(category => category !== t('其他：自行創建'))\r\n      .map(category => `${category}: ${inputValues[category] || ''}`)\r\n      .join('\\n');\r\n\r\n      const combinedDescriptionForK = selectedCategories\r\n      .filter(category => category !== t('其他：自行創建'))\r\n      .map(category => `${t(category)}: ${inputValues[category] || ''}`)\r\n      .join('\\n');\r\n      \r\n    const otherDescription = showDescription\r\n      ? `${inputValues['其他：IP名稱'] || ''}: ${inputValues['其他：IP敘述'] || ''}`\r\n      : '';\r\n\r\n    setNFTData(prevData => ({\r\n      ...prevData,\r\n      description: `${combinedDescription}\\n${otherDescription}`\r\n    }));\r\n    setDescForK(prevData => ({\r\n      ...prevData,\r\n      description: `${combinedDescriptionForK}\\n${otherDescription}`\r\n    }));\r\n  }, [inputValues, selectedCategories, showDescription]);\r\n\r\n  const handleCategoryChange = (e) => {\r\n    const { value, checked } = e.target;\r\n    setSelectedCategories(prevSelectedCategories => {\r\n        if (checked) {\r\n            // 如果勾选了该项，将其添加到 selectedCategories 中\r\n            return [...prevSelectedCategories, value];\r\n        } else {\r\n            // 如果取消勾选，则从 selectedCategories 中移除该项\r\n            return prevSelectedCategories.filter(category => category !== value);\r\n        }\r\n    });\r\n    // 控制描述框的显示\r\n    setShowDescription(value === t('其他：自行創建') ? checked : showDescription);\r\n    // 初始化或清除输入框的值\r\n    if (value === t('其他：自行創建') && checked) {\r\n      setInputValues(prevValues => ({\r\n          ...prevValues,\r\n          [value]: defaultDescriptions[value]\r\n      }));\r\n    } else if (value !== t('其他：自行創建')) {\r\n        setInputValues(prevValues => ({\r\n            ...prevValues,\r\n            [value]: defaultDescriptions[value]\r\n        }));\r\n    }\r\n  };\r\n\r\n  const handleInputChange = (e, category) => {\r\n    const { value } = e.target;\r\n    setInputValues(prevValues => ({...prevValues, [category]: value}));\r\n  };\r\n\r\n  const handleCheckboxChange = (e) => {\r\n    setIsCheck(e.target.checked);\r\n  };\r\n\r\n  const createPromoCover = (e) => {\r\n    const file = e.target.files[0];\r\n    if (!file) {\r\n      setPreviewImageUrl('');\r\n      return;\r\n    }\r\n    if (validateFileType(file)) {\r\n      const reader = new FileReader();\r\n      reader.onloadend = () => {\r\n        setPreviewImageUrl(reader.result);\r\n      };\r\n      reader.readAsDataURL(file);\r\n      setNftFile(file);\r\n    } else {\r\n      message.info(t('文件類型不支持，請上傳...格式的圖片'));\r\n    }\r\n  };\r\n\r\n  const validateFileType = (file) => {\r\n    const allowedTypes = [\"image/jpeg\", \"image/png\", \"image/jpg\"];\r\n    return allowedTypes.includes(file.type);\r\n  };\r\n\r\n\r\n  return (\r\n    <div className=\"upload-form\">\r\n        <div className=\"step-container\">\r\n            <div className={`step-item ${stepCompleted && !showChapterForm ? 'step-completed' : ''}`}>\r\n                <div className=\"step-line\">\r\n                    <div className={`line ${stepCompleted ? 'bg-blue' : 'bg-gray'}`}></div>\r\n                    <div className=\"dot\">1</div>\r\n                    <div className={`line ${stepCompleted ? 'bg-blue' : 'bg-gray'}`}></div>\r\n                </div>\r\n                <div className=\"step-title\">{t('漫畫資訊')}</div>\r\n            </div>\r\n            <div className={`step-item ${!showChapterForm && !stepCompleted ? 'step-item-gray' : ''}`}>\r\n                <div className=\"step-line\">\r\n                    <div className={`line ${!showChapterForm && !stepCompleted ? 'bg-gray' : 'bg-blue'}`}></div>\r\n                    <div className=\"dot\">2</div>\r\n                    <div className={`line ${!showChapterForm && !stepCompleted ? 'bg-gray' : 'bg-blue'}`}></div>\r\n                </div>\r\n                <div className=\"step-title\">{t('鑄造NFT')}</div>\r\n            </div>\r\n        </div>\r\n        {/* {loading ? ( */}\r\n\r\n        <Form.Group as={Row} className='mb-1'>\r\n            <div style={{ display: 'flex' }}>\r\n                <Form.Label className='label-style col-form-label'>\r\n                    {t('漫畫名稱')}\r\n                </Form.Label>\r\n                <Form.Control\r\n                    type=\"text\"\r\n                    defaultValue={newComic.title}\r\n                    style={{ marginLeft: '10px' }}\r\n                    disabled={true}\r\n                />\r\n            </div>\r\n        </Form.Group>\r\n\r\n        <Form.Group as={Row} className='mb-3'>\r\n            <div style={{ display: 'flex' }}>\r\n                <Form.Label className='label-style mb-1 col-form-label'>\r\n                    {t('漫畫類型')}\r\n                </Form.Label>\r\n                <Form.Control\r\n                    className=\"form-select\"\r\n                    defaultValue={t(newComic.category)}\r\n                    style={{ marginLeft: '10px' }}\r\n                    disabled={true}\r\n                />\r\n            </div>\r\n        </Form.Group>\r\n\r\n        <Form.Group className='pb-3'>\r\n            <div style={{ display: 'flex' }}>\r\n                <Form.Label className='label-style col-form-label'>\r\n                    {t('漫畫簡介')}\r\n                </Form.Label>\r\n                <Form.Control\r\n                    as=\"textarea\"\r\n                    rows={5}\r\n                    defaultValue={newComic.description}\r\n                    style={{ marginLeft: '10px' }}\r\n                    disabled={true}\r\n                />\r\n            </div>\r\n        </Form.Group>\r\n\r\n        <Form.Group className='pb-3'>\r\n            <div style={{ display: 'flex' }}>\r\n                <Form.Label className='label-style mb-1 col-form-label' htmlFor=\"image\">\r\n                    {t('漫畫封面')}\r\n                </Form.Label>\r\n                <img\r\n                    src={newComic.imgURL}\r\n                    alt=\"Preview\"\r\n                    style={{ width: '60%', maxWidth: '300px', paddingBottom: '3%', marginLeft: '10px' }}\r\n                />\r\n            </div>\r\n        </Form.Group>\r\n\r\n        <Form.Group className='pb-4'>\r\n            <div style={{ display: 'flex' }}>\r\n                <Form.Label className='label-style mb-1 col-form-label'>{t('漫畫橫向封面')}</Form.Label>\r\n                {newComic.coverImg ? (\r\n                    <img\r\n                        src={newComic.coverImg}\r\n                        alt=\"Preview\"\r\n                        style={{ width: '60%', maxWidth: '300px', paddingBottom: '3%', marginLeft: '10px' }}\r\n                    />\r\n                ) : (\r\n                    <div>\r\n                        <h3 style={{marginLeft: '10px'}}>{t('目前無上傳橫向封面')}</h3>\r\n                        <br />\r\n                    </div>\r\n                )}\r\n            </div>\r\n        </Form.Group>\r\n\r\n        {/* ) : ( */}\r\n        <Form.Group as={Row} className='mb-3'>\r\n            <Form.Label>\r\n                NFT {t('名稱')}\r\n            </Form.Label>\r\n            <Form.Control\r\n                type=\"text\"\r\n                placeholder={t('請輸入NFT標題名稱')}\r\n                value={NFTData.title}\r\n                onChange={(e) => setNFTData({ ...NFTData, title: e.target.value })}\r\n            />\r\n        </Form.Group>\r\n\r\n        <Form.Group as={Row} className='mb-3'>\r\n            <Form.Label>\r\n                {t('NFT價格')}\r\n            </Form.Label>\r\n            <Form.Control\r\n                type=\"number\"\r\n                placeholder={t('至少 0.01 ETH')}\r\n                step=\"0.01\"\r\n                min=\"0.01\"\r\n                value={NFTData.price}\r\n                onChange={(e) => setNFTData({ ...NFTData, price: e.target.value })}\r\n            />\r\n        </Form.Group>\r\n\r\n        <Form>\r\n            <Form.Group as={Row} className='mb-2'>\r\n                <div style={{ display: 'flex' }}>\r\n                    <Form.Label>\r\n                        {t('IP種類')}\r\n                    </Form.Label>\r\n                </div>\r\n\r\n                <Col>\r\n                    {grading.map((name, index) => (\r\n                        <Form.Check\r\n                            key={index}\r\n                            type=\"checkbox\"\r\n                            id={`category-${index}`}\r\n                            label={t(name)}\r\n                            value={name}\r\n                            onChange={handleCategoryChange}\r\n                            checked={selectedCategories.includes(name)}\r\n                        />\r\n                    ))}\r\n                    <Form.Check\r\n                        type=\"checkbox\"\r\n                        id=\"category-other\"\r\n                        label={t('其他：自行創建')}\r\n                        value={t('其他：自行創建')}\r\n                        onChange={handleCategoryChange}\r\n                        checked={selectedCategories.includes(t('其他：自行創建'))}\r\n                    />\r\n                </Col>\r\n            </Form.Group>\r\n\r\n            {selectedCategories.map(category => (\r\n                category !== t('其他：自行創建') && (\r\n                    <Form.Group className='mb-4' key={category}>\r\n                        <Form.Label>{t(category)} {t('權限範圍')}</Form.Label>\r\n                        <Form.Control\r\n                            type=\"text\"\r\n                            placeholder={t('请確認或修改...權限範圍', { category: t(category) })}\r\n                            value={inputValues[category] || ''}\r\n                            onChange={(e) => handleInputChange(e, category)}\r\n                        />\r\n                    </Form.Group>\r\n                )\r\n            ))}\r\n\r\n            {showDescription && (\r\n                <Form.Group className='mb-4'>\r\n                    <Form.Label>{t('其他：IP名稱')}</Form.Label>\r\n                    <Form.Control\r\n                        type=\"text\"\r\n                        placeholder={t('請輸入IP名稱')}\r\n                        value={inputValues['其他：IP名稱'] || ''}\r\n                        onChange={(e) => handleInputChange(e, '其他：IP名稱')}\r\n                    />\r\n                    <Form.Label>{t('其他：IP敘述')}</Form.Label>\r\n                    <Form.Control\r\n                        type=\"text\"\r\n                        placeholder={t('請描述IP的使用權限、範圍等')}\r\n                        value={inputValues['其他：IP敘述'] || ''}\r\n                        onChange={(e) => handleInputChange(e, '其他：IP敘述')}\r\n                    />\r\n                </Form.Group>\r\n            )}\r\n        </Form>\r\n\r\n        <Form.Group as={Row} className='mt-4 mb-2'>\r\n            <Form.Label>\r\n                {t('發行數量')}\r\n            </Form.Label>\r\n            <Form.Control\r\n                type=\"number\"\r\n                placeholder={t('至少1個、至多50個')}\r\n                step=\"1\"\r\n                min=\"1\"\r\n                max=\"50\"\r\n                value={NFTData.quantity}\r\n                onChange={(e) => setNFTData({ ...NFTData, quantity: e.target.value })}\r\n            />\r\n        </Form.Group>\r\n\r\n        <Form.Group as={Row} className='mt-4 mb-2'>\r\n            <Form.Label title={t('第2次轉售時可抽成的比例')}>\r\n                {t('抽成比例(上限10%)，單位：％')}\r\n            </Form.Label>\r\n            <Form.Control\r\n                type=\"number\"\r\n                placeholder={t('至少1%，至多10%')}\r\n                step=\"1\"\r\n                min=\"1\"\r\n                max=\"10\"\r\n                value={NFTData.royalty}\r\n                onChange={(e) => setNFTData({ ...NFTData, royalty: e.target.value })}\r\n                title={t('這是您的抽成比例，最多可設為 10%')}\r\n            />\r\n        </Form.Group>\r\n\r\n        <Form.Group controlId=\"file-upload\" className='pb-3'>\r\n          <div style={{ display: 'flex', alignItems: 'center' }}>\r\n              <Form.Label className='col-form-label' title={t('購買NFT的使用者須先進行身分驗證才可購買')} style={{ marginRight: '1rem', whiteSpace: 'nowrap' }}>\r\n                {t('買家身分驗證')}\r\n              </Form.Label>\r\n              <Form.Check\r\n                type=\"checkbox\"\r\n                onChange={(e) => setNFTData({ ...NFTData, verify: e.target.checked ? '1' : '0' })}\r\n                style={{ transform: 'scale(1.8)', marginRight: '1rem' }}\r\n              />\r\n            </div>\r\n        </Form.Group>\r\n\r\n        <Form.Group controlId=\"file-upload\" className='pb-3'>\r\n          <div style={{ display: 'flex', alignItems: 'center' }}>\r\n            <Form.Label className='col-form-label' title={t('上傳圖片作為NFT的封面')} style={{ marginRight: '1rem', whiteSpace: 'nowrap' }}>\r\n              {t('NFT封面')}\r\n            </Form.Label>\r\n            <Form.Check\r\n              type=\"checkbox\"\r\n              onChange={handleCheckboxChange}\r\n              checked={isCheck}\r\n              style={{ transform: 'scale(1.8)', marginRight: '1rem' }}\r\n            />\r\n            {isCheck && (\r\n              <Form.Control\r\n                type=\"file\"\r\n                name=\"fileUpload\"\r\n                accept=\"image/*\"\r\n                style={{ flex: 1, marginBottom: '0' }}\r\n                onChange={createPromoCover}\r\n              />\r\n            )}\r\n          </div>\r\n          \r\n          {isCheck && (\r\n            <div className='file-upload mintNFT-img-height' style={{ display: 'flex', flexDirection: 'column', marginTop: '1rem' }}>\r\n              <div id=\"start\" style={{ display: 'block' }}>\r\n                {previewImageUrl ? (\r\n                  <img\r\n                      src={previewImageUrl}\r\n                      alt=\"Cover Preview\"\r\n                      style={{ height:'28vh' }}\r\n                  />\r\n                ) : (\r\n                  <>\r\n                    <CardImage size={48} />\r\n                    <div id=\"notimage2\" className=\"hidden\">{t('上傳NFT橫向封面')}</div>\r\n                  </>\r\n                )}\r\n              </div>\r\n            </div>\r\n          )}\r\n        </Form.Group>\r\n\r\n        <div className=\"text-red-500 text-center\">{msg}</div>\r\n        <Button onClick={createNFT} id=\"list-button\" data-backgroundcolor=\"#fff\">{t('確定鑄造')}</Button>\r\n        {/* )} */}\r\n    </div>\r\n    \r\n);\r\n\r\n};\r\n\r\nexport default MintNFT;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}