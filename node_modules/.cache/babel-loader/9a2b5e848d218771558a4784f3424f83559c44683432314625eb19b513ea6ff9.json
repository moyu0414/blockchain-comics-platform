{"ast":null,"code":"import React,{useState,useEffect,useMemo}from'react';import{Line,Pie,Bar}from'react-chartjs-2';import Chart from'chart.js/auto';import{Chart as ChartJS,CategoryScale,LinearScale,PointElement,LineElement,Title,Tooltip,Legend}from'chart.js';import{Container,Form,Tabs,Tab,Table}from'react-bootstrap';import{DatePicker,Button,List,Card,message,Select,Row,Col}from'antd';import dayjs from'dayjs';import'./bootstrap.min.css';import{useTranslation}from'react-i18next';import i18n from'../i18n';import axios from'axios';import{formatDate}from'../index.js';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";ChartJS.register(CategoryScale,LinearScale,PointElement,LineElement,Title,Tooltip,Legend);const website=process.env.REACT_APP_Website;const API_KEY=process.env.REACT_APP_API_KEY;// 漫畫－銷售額\nconst initAllComicData=comicOrigin=>{return comicOrigin.reduce((acc,_ref)=>{let{purchase_date,price,comicTitle}=_ref;const date=new Date(purchase_date);const year=date.getFullYear();const month=String(date.getMonth()+1).padStart(2,'0');const day=String(date.getDate()).padStart(2,'0');const quarter=\"Q\".concat(Math.ceil((date.getMonth()+1)/3));const income=(parseFloat(price)*0.9).toFixed(3);const updateData=(type,key)=>{if(!acc[type][key]){acc[type][key]={date:key,sales:0,count:0,title:[]};}const titleEntry=acc[type][key].title.find(t=>t.title===comicTitle);if(titleEntry){titleEntry.sales=(parseFloat(titleEntry.sales)+parseFloat(income)).toFixed(3);}else{acc[type][key].title.push({title:comicTitle,sales:income});}acc[type][key].sales=(parseFloat(acc[type][key].sales)+parseFloat(income)).toFixed(3);acc[type][key].count+=1;};updateData('year',\"\".concat(year));const quarterKey=\"\".concat(year,\"-\").concat(quarter);updateData('quarter',quarterKey);const monthKey=\"\".concat(year,\"-\").concat(month);updateData('month',monthKey);const dayKey=\"\".concat(year,\"-\").concat(month,\"-\").concat(day);updateData('day',dayKey);return acc;},{year:{},quarter:{},month:{},day:{}});};const computeSalesData=(salesArray,timePeriod,t)=>{if(!salesArray||!salesArray[timePeriod]){return null;}const periodData=salesArray[timePeriod]||{};const dataArray=Object.values(periodData);// Determine the date range\nconst allDates=Object.keys(periodData);const earliestDate=new Date(Math.min(...allDates.map(date=>parseDate(date,timePeriod))));const latestDate=new Date(Math.max(...allDates.map(date=>parseDate(date,timePeriod))));const dateRange=generateDateRangeAll(earliestDate,latestDate,timePeriod);// Create a map of dates to sales data\nconst titleMap={};const salesMap={};const countMap={};dataArray.forEach(item=>{salesMap[item.date]=parseFloat(item.sales);countMap[item.date]=item.count||0;if(!titleMap[item.date]){titleMap[item.date]={};}item.title.forEach(t=>{const title=t.title;const sales=parseFloat(t.sales);if(!titleMap[item.date][title]){titleMap[item.date][title]=0;}titleMap[item.date][title]+=sales;});});// Fill in missing dates with zero sales\nconst labels=dateRange;const salesData=dateRange.map(date=>salesMap[date]||0);const countData=dateRange.map(date=>countMap[date]||0);// Chart.js 数据配置\nreturn{labels,datasets:[{label:t('漫畫銷售額'),data:salesData,fill:false,borderColor:'#1890ff',backgroundColor:'#1890ff',pointStyle:'diamond',pointRadius:5,countData:countData,pieData:titleMap}]};};const generateDateRangeAll=(startDate,endDate,step)=>{const dates=[];let currentDate=new Date(startDate);const formatDate=(date,step)=>{const year=date.getFullYear();if(step==='month'){return\"\".concat(year,\"-\").concat(String(date.getMonth()+1).padStart(2,'0'));// YYYY-MM\n}else if(step==='day'){return date.toISOString().split('T')[0];// YYYY-MM-DD\n}else if(step==='quarter'){const quarter=Math.floor(date.getMonth()/3)+1;// Determine the quarter (1-4)\nreturn\"\".concat(year,\"-Q\").concat(quarter);// YYYY-Q1, YYYY-Q2, etc.\n}else if(step==='year'){return year.toString();// YYYY\n}return'';// Default case\n};while(currentDate<=endDate){dates.push(formatDate(currentDate,step));// Move to the next date based on the step\nif(step==='month'){currentDate.setMonth(currentDate.getMonth()+1);}else if(step==='day'){currentDate.setDate(currentDate.getDate()+1);}else if(step==='year'){currentDate.setFullYear(currentDate.getFullYear()+1);}else if(step==='quarter'){currentDate.setMonth(currentDate.getMonth()+3);}}return dates;};const transformPieData=(pieData,period)=>{const dataForYear=pieData[period]||{};const labels=Object.keys(dataForYear);const data=Object.values(dataForYear);return{labels,datasets:[{data,backgroundColor:['#8470FF','#7FFFD4','#FFD700','#CDC5BF','#F0FFFF']// Customize colors as needed\n}]};};const initFilterComicData=comicOrigin=>{const processedData=comicOrigin.reduce((acc,_ref2)=>{let{purchase_date,price,comicTitle,category,filename}=_ref2;const date=new Date(purchase_date);const year=date.getFullYear();const month=String(date.getMonth()+1).padStart(2,'0');const day=String(date.getDate()).padStart(2,'0');const income=parseFloat(price)*0.9;if(!acc[comicTitle]){acc[comicTitle]={year:{},quarter:{},month:{},day:{},category:category,filename:filename};}const updateData=(type,key)=>{if(!acc[comicTitle][type][key]){acc[comicTitle][type][key]={date:key,sales:0,count:0};}acc[comicTitle][type][key].sales+=income;acc[comicTitle][type][key].count+=1;// Increment count for each entry\n};updateData('year',\"\".concat(year));updateData('quarter',\"\".concat(year,\"-\").concat(month));updateData('month',\"\".concat(year,\"-\").concat(month));updateData('day',\"\".concat(year,\"-\").concat(month,\"-\").concat(day));return acc;},{});return processedData;};const computeComicData=(comics,selectedComic,selectedPeriod,t)=>{if(!comics[selectedComic]||!comics[selectedComic][selectedPeriod])return null;const comicData=comics[selectedComic][selectedPeriod];const aggregatedData=Object.values(comicData).reduce((acc,_ref3)=>{let{date,sales,count}=_ref3;if(!acc[date]){acc[date]={sales:0,count:0};}acc[date].sales+=parseFloat(sales);acc[date].count+=count;return acc;},{});const step=selectedPeriod==='month'?'month':selectedPeriod==='day'?'day':'year';const{startDate,endDate,allMonths}=getDateRange(aggregatedData,step);const dateRange=generateDateRange(startDate,endDate,step,allMonths);dateRange.forEach(date=>{if(!aggregatedData[date]){aggregatedData[date]={sales:0,count:0};}});return{labels:dateRange,datasets:[{label:\"\".concat(selectedComic,\" - \").concat(t('漫畫銷售額')),data:dateRange.map(date=>aggregatedData[date].sales.toFixed(3)),backgroundColor:'#ff5733',borderColor:'#ff5733',borderWidth:1,countData:dateRange.map(date=>aggregatedData[date].count)}]};};const getDateRange=(data,step)=>{const allDates=Object.keys(data);const dateToNum=date=>{if(step==='month')return new Date(date+'-01').getTime();// YYYY-MM-01\nif(step==='day')return new Date(date).getTime();// YYYY-MM-DD\nreturn new Date(date).getTime();// YYYY\n};const earliestDate=new Date(Math.min(...allDates.map(date=>dateToNum(date))));const latestDate=new Date(Math.max(...allDates.map(date=>dateToNum(date))));if(step==='month'){const months=[];for(let year=earliestDate.getFullYear();year<=latestDate.getFullYear();year++){for(let month=1;month<=12;month++){months.push(\"\".concat(year,\"-\").concat(String(month).padStart(2,'0')));}}return{startDate:earliestDate,endDate:latestDate,allMonths:months};}return{startDate:earliestDate,endDate:latestDate};};const generateDateRange=function(startDate,endDate,step){let allMonths=arguments.length>3&&arguments[3]!==undefined?arguments[3]:[];const dates=new Set();let currentDate=new Date(startDate);if(step==='month'){const monthsSet=new Set(allMonths);while(currentDate<=endDate){dates.add(currentDate.toISOString().slice(0,7));// YYYY-MM\ncurrentDate.setMonth(currentDate.getMonth()+1);}return Array.from(monthsSet);}if(step==='day'){while(currentDate<=endDate){dates.add(currentDate.toISOString().split('T')[0]);// YYYY-MM-DD\ncurrentDate.setDate(currentDate.getDate()+1);// Increment by 1 day\n}}else if(step==='year'){while(currentDate<=endDate){dates.add(currentDate.getFullYear().toString());// YYYY\ncurrentDate.setFullYear(currentDate.getFullYear()+1);}}return Array.from(dates);};// 日期解析函数\nconst parseDate=(dateStr,timePeriod)=>{let date;switch(timePeriod){case'day':date=new Date(dateStr);break;case'month':date=new Date(dateStr+'-01');// 假设为该月的第一天\nbreak;case'quarter':const[year,quarter]=dateStr.split('-Q');const month=(parseInt(quarter,10)-1)*3+1;// 计算季度开始的月份\ndate=new Date(\"\".concat(year,\"-\").concat(month.toString().padStart(2,'0'),\"-01\"));break;case'year':date=new Date(dateStr+'-01-01');// 假设为该年的第一天\nbreak;default:date=new Date();// 默认当前日期\n}return date.getTime();// 返回时间戳\n};// 漫畫－客戶群\nconst parseCustomerDate=dateStr=>new Date(dateStr);const calculateSales=(data,startDate,endDate)=>{return data.reduce((summary,_ref4)=>{let{buyer,price,purchase_date,comicTitle}=_ref4;const purchaseDate=new Date(purchase_date);if(startDate<=purchaseDate&&purchaseDate<=endDate){if(!summary[buyer]){summary[buyer]={total_amount:0,count:0,comics:{}};}const buyerData=summary[buyer];// 更新總額和數量\nbuyerData.total_amount+=parseFloat(price)*0.9;buyerData.count+=1;// 初始化漫畫統計數據\nif(!buyerData.comics[comicTitle]){buyerData.comics[comicTitle]={total_amount:0,count:0};}// 更新個別漫畫的統計數據\nbuyerData.comics[comicTitle].total_amount+=parseFloat(price)*0.9;buyerData.comics[comicTitle].count+=1;}return summary;},{});};const calculateTotalSummary=salesData=>{return Object.values(salesData).reduce((totals,periodData)=>{Object.values(periodData).forEach(_ref5=>{let{total_amount,count}=_ref5;totals.total_amount+=total_amount;totals.count+=count;});return totals;},{total_amount:0,count:0});};// NFT－收益分布\nconst firstSale=0.98;const initNFTData=comicOrigin=>{let initNFT=[];// 计算每个 NFT 的总收益和转手收益\ncomicOrigin.forEach(item=>{const keys=Object.keys(item.price);const lastKey=keys[keys.length-1];const secondLastKey=keys[keys.length-2]||null;const lastValue=parseFloat(item.price[lastKey]);let total=0;let transferRevenue=0;if(item.forSale===0){// 已售\ntotal+=parseFloat(item.price[keys[0]])*firstSale;if(lastKey!=='1'){for(const key of keys){if(key!==keys[0]){// 跳过第一个键\nconst value=parseFloat(item.price[key]);total+=value*(item.royalty/100);transferRevenue+=value*(item.royalty/100);}}}}else if(item.forSale===1){// 未售\nif(secondLastKey){// 存在第二个价格\ntotal+=parseFloat(item.price[keys[0]])*firstSale;for(const key of keys.slice(1,-1)){// 从第二笔到倒数第二笔\nconst value=parseFloat(item.price[key]);total+=value*(item.royalty/100);transferRevenue+=value*(item.royalty/100);}}}initNFT.push({comicTitle:item.title,nftTitle:item.tokenTitle,totRevenue:total.toFixed(3),transferRevenue:transferRevenue.toFixed(3)});});// 初始化汇总对象\nconst revenueSummary={totRevenue:{},transferRevenue:{}};// 汇总总收益和转手收益\ninitNFT.forEach(item=>{const{comicTitle,nftTitle,totRevenue,transferRevenue}=item;const totRev=parseFloat(totRevenue);const transRev=parseFloat(transferRevenue);const updateSummary=(summary,value,rev)=>{if(!summary[comicTitle]){summary[comicTitle]={totalRevenue:0,count:0,nftTitles:{}};}summary[comicTitle].totalRevenue+=value;summary[comicTitle].count+=1;if(!summary[comicTitle].nftTitles[nftTitle]){summary[comicTitle].nftTitles[nftTitle]={totalRevenue:0,count:0};}summary[comicTitle].nftTitles[nftTitle].totalRevenue+=rev;summary[comicTitle].nftTitles[nftTitle].count+=1;};if(totRev!==0)updateSummary(revenueSummary.totRevenue,totRev,totRev);if(transRev!==0)updateSummary(revenueSummary.transferRevenue,transRev,transRev);});// 将汇总结果转换为数组\nconst formatSummary=summary=>Object.keys(summary).map(comicTitle=>({comicTitle,totalRevenue:summary[comicTitle].totalRevenue.toFixed(3),count:summary[comicTitle].count,nftTitles:Object.keys(summary[comicTitle].nftTitles).map(nftTitle=>({nftTitle,totalRevenue:summary[comicTitle].nftTitles[nftTitle].totalRevenue.toFixed(3),count:summary[comicTitle].nftTitles[nftTitle].count}))}));return{totRevenueResults:formatSummary(revenueSummary.totRevenue),transferRevenueResults:formatSummary(revenueSummary.transferRevenue)};};const nftPieTot=(data,title,t)=>{let dataset;if(title==='總收益'){dataset=data.map(item=>({title:item.comicTitle,revenue:parseFloat(item.totalRevenue),count:item.count}));}else if(title==='轉手收益'){dataset=data.flatMap(item=>item.nftTitles.map(nft=>({title:\"\".concat(item.comicTitle,\" - \").concat(nft.nftTitle),revenue:parseFloat(nft.totalRevenue),count:nft.count})));}const top5=[...dataset].sort((a,b)=>b.revenue-a.revenue).slice(0,5);return{labels:dataset.map(item=>item.title),datasets:[{label:title,data:dataset.map(item=>item.revenue)}],datasetDetails:top5,options:{plugins:{tooltip:{callbacks:{label:context=>{const item=dataset[context.dataIndex];return[\"\".concat(title,\"\\uFF1A\").concat(item.revenue.toFixed(3),\" ETH\"),\"\".concat(t('總比數'),\"\\uFF1A\").concat(item.count)];}}},legend:{position:'right'}}}};};const nftChartData=(totRevenueResults,transferRevenueResults,t)=>{if(!Array.isArray(totRevenueResults)||!Array.isArray(transferRevenueResults)){console.error('Invalid data: totRevenueResults or transferRevenueResults is not an array');return{data:null,options:null};}// 提取所有的 comicTitle\nconst comicTitles=[...new Set([...totRevenueResults.map(item=>item.comicTitle),...transferRevenueResults.map(item=>item.comicTitle)])];// 计算总收益和总比数\nconst totalRevenueData=comicTitles.map(title=>{const comic=totRevenueResults.find(item=>item.comicTitle===title);return comic?{totalRevenue:parseFloat(comic.totalRevenue),count:comic.count}:{totalRevenue:0,count:0};});// 计算转手收益和总比数\nconst resaleRevenueData=comicTitles.map(title=>{const comic=transferRevenueResults.find(item=>item.comicTitle===title);return comic?{totalRevenue:parseFloat(comic.totalRevenue),count:comic.count}:{totalRevenue:0,count:0};});const data={labels:comicTitles,datasets:[{label:t('總收益'),data:totalRevenueData.map(item=>item.totalRevenue),backgroundColor:'rgba(75, 192, 192, 0.2)',borderColor:'rgba(75, 192, 192, 1)',borderWidth:1},{label:t('轉手收益'),data:resaleRevenueData.map(item=>item.totalRevenue),backgroundColor:'rgba(153, 102, 255, 0.2)',borderColor:'rgba(153, 102, 255, 1)',borderWidth:1}]};const options={responsive:true,plugins:{legend:{position:'top'},tooltip:{callbacks:{label:function(context){const label=context.dataset.label;const dataIndex=context.dataIndex;const data=label===t('總收益')?totalRevenueData:resaleRevenueData;const{totalRevenue,count}=data[dataIndex];return[\"\".concat(t('總收益'),\"\\uFF1A\").concat(totalRevenue.toFixed(3)),\"\".concat(t('總比數'),\"\\uFF1A\").concat(count)];}}}},scales:{x:{title:{display:true,text:t('漫畫名稱')}}}};return{data,options};};// 測試數據 60 筆\nconst test_data_1=[{\"buyer\":\"0x7e8f9g0h1i2j3k4l5m6n7o8p9q0r1s2t3u4v4w6x\",\"category\":\"玄幻\",\"chapterTitle\":\"002-1\",\"comicTitle\":\"幽靈學院\",\"filename\":\"/test/comic1.png\",\"price\":\"0.06\",\"purchase_date\":\"2023-02-18T11:00:00.000Z\"},{\"buyer\":\"0x3a4b5c6d7e8f9g0h1i2j3k4l5m6n7o8p9q0r1s2t\",\"category\":\"搞笑\",\"chapterTitle\":\"003-1\",\"comicTitle\":\"笑爆天\",\"filename\":\"/test/comic2.png\",\"price\":\"0.17\",\"purchase_date\":\"2024-06-10T16:00:00.000Z\"},{\"buyer\":\"0x7e8f9g0h1i2j3k4l5m6n7o8p9q0r1s2t3u4v5w6x\",\"category\":\"搞笑\",\"chapterTitle\":\"004-1\",\"comicTitle\":\"笑爆天\",\"filename\":\"/test/comic2.png\",\"price\":\"0.16\",\"purchase_date\":\"2023-08-25T14:35:00.000Z\"},{\"buyer\":\"0x7e8f9g0h1i2j3k4l5m6n7o8p9q0r1s2t3u4v5w6x\",\"category\":\"武俠\",\"chapterTitle\":\"005-1\",\"comicTitle\":\"流浪武士\",\"filename\":\"/test/comic3.png\",\"price\":\"0.07\",\"purchase_date\":\"2024-09-01T11:10:00.000Z\"},{\"buyer\":\"0x7e8f9g0h1i2j3k4l5m6n7o8p9q0r1s2t3u4v5w6x\",\"category\":\"武俠\",\"chapterTitle\":\"001-2\",\"comicTitle\":\"流浪武士\",\"filename\":\"/test/comic3.png\",\"price\":\"0.08\",\"purchase_date\":\"2024-03-18T12:45:00.000Z\"},{\"buyer\":\"0x7d8e9f0g1h2i3j4k5l6m7n8o9p0q1r2s3t4u5v6w\",\"category\":\"玄幻\",\"chapterTitle\":\"007-2\",\"comicTitle\":\"隱秘之城\",\"filename\":\"/test/comic4.png\",\"price\":\"0.08\",\"purchase_date\":\"2023-06-30T13:00:00.000Z\"},{\"buyer\":\"0x7e8f9g0h1i2j3k4l5m6n7o8p9q0r1s2t3u4v5w6x\",\"category\":\"玄幻\",\"chapterTitle\":\"006-2\",\"comicTitle\":\"幽靈學院\",\"filename\":\"/test/comic1.png\",\"price\":\"0.07\",\"purchase_date\":\"2023-12-01T12:20:00.000Z\"},{\"buyer\":\"0x7e8f9g0h1i2j3k4l5m6n7o8p9q0r1s2t3u4v5w6x\",\"category\":\"玄幻\",\"chapterTitle\":\"003-1\",\"comicTitle\":\"隱秘之城\",\"filename\":\"/test/comic4.png\",\"price\":\"0.06\",\"purchase_date\":\"2024-05-15T14:35:00.000Z\"},{\"buyer\":\"0x7e8f9g0h1i2j3k4l5m6n7o8p9q0r1s2t3u4v5w6x\",\"category\":\"戀愛\",\"chapterTitle\":\"002-2\",\"comicTitle\":\"絕世戀人\",\"filename\":\"/test/comic5.png\",\"price\":\"0.06\",\"purchase_date\":\"2023-04-20T11:00:00.000Z\"},{\"buyer\":\"0x7e8f9g0h1i2j3k4l5m6n7o8p9q0r1s2t3u4v5w6x\",\"category\":\"戀愛\",\"chapterTitle\":\"007-1\",\"comicTitle\":\"絕世戀人\",\"filename\":\"/test/comic5.png\",\"price\":\"0.05\",\"purchase_date\":\"2023-11-05T10:45:00.000Z\"},{\"buyer\":\"0x7e8f9g0h1i2j3k4l5m6n7o8p9q0r1s2t3u4v5w6x\",\"category\":\"戀愛\",\"chapterTitle\":\"002-1\",\"comicTitle\":\"絕世戀人\",\"filename\":\"/test/comic5.png\",\"price\":\"0.09\",\"purchase_date\":\"2024-08-15T14:55:00.000Z\"},{\"buyer\":\"0x8a9b0c1d2e3f4g5h6i7j8k9l0m1n2o3p4q5r6s7t\",\"category\":\"搞笑\",\"chapterTitle\":\"001-1\",\"comicTitle\":\"風起雲湧\",\"filename\":\"/test/comic6.png\",\"price\":\"0.07\",\"purchase_date\":\"2024-01-10T14:25:00.000Z\"},{\"buyer\":\"0x6b7c8d9e0f1g2h3i4j5k6l7m8n9o0p1q2r3s4t5u\",\"category\":\"搞笑\",\"chapterTitle\":\"003-2\",\"comicTitle\":\"風起雲湧\",\"filename\":\"/test/comic6.png\",\"price\":\"0.07\",\"purchase_date\":\"2023-06-18T15:20:00.000Z\"},{\"buyer\":\"0x9e0f1g2h3i4j5k6l7m8n9o0p1q2r3s4t5u6v7w8x\",\"category\":\"搞笑\",\"chapterTitle\":\"005-1\",\"comicTitle\":\"風起雲湧\",\"filename\":\"/test/comic6.png\",\"price\":\"0.18\",\"purchase_date\":\"2024-07-20T12:30:00.000Z\"},{\"buyer\":\"0x9e0f1g2h3i4j5k6l7m8n9o0p1q2r3s4t5u6v7w8x\",\"category\":\"搞笑\",\"chapterTitle\":\"004-2\",\"comicTitle\":\"風起雲湧\",\"filename\":\"/test/comic6.png\",\"price\":\"0.14\",\"purchase_date\":\"2024-08-05T13:50:00.000Z\"},{\"buyer\":\"0x6b7c8d9e0f1g2h3i4j5k6l7m8n9o0p1q2r3s4t5u\",\"category\":\"冒險\",\"chapterTitle\":\"004-2\",\"comicTitle\":\"異界遊俠\",\"filename\":\"/test/comic7.png\",\"price\":\"0.07\",\"purchase_date\":\"2023-11-15T12:00:00.000Z\"},{\"buyer\":\"0x7d8e9f0g1h2i3j4k5l6m7n8o9p0q1r2s3t4u5v6w\",\"category\":\"冒險\",\"chapterTitle\":\"006-1\",\"comicTitle\":\"異界遊俠\",\"filename\":\"/test/comic7.png\",\"price\":\"0.06\",\"purchase_date\":\"2023-10-10T10:15:00.000Z\"},{\"buyer\":\"0x1d2e3f4g5h6i7j8k9l0m1n2o3p4q5r6s7t8u9v0w\",\"category\":\"冒險\",\"chapterTitle\":\"002-2\",\"comicTitle\":\"異界遊俠\",\"filename\":\"/test/comic7.png\",\"price\":\"0.08\",\"purchase_date\":\"2024-07-01T13:00:00.000Z\"},{\"buyer\":\"0x4c5d6e7f8g9h0i1j2k3l4m5n6o7p8q9r0s1t2u3v\",\"category\":\"戀愛\",\"chapterTitle\":\"002-1\",\"comicTitle\":\"絕世戀人\",\"filename\":\"/test/comic5.png\",\"price\":\"0.05\",\"purchase_date\":\"2024-03-15T14:25:00.000Z\"},{\"buyer\":\"0x7e8f9g0h1i2j3k4l5m6n7o8p9q0r1s2t3u4v5w6x\",\"category\":\"武俠\",\"chapterTitle\":\"006-2\",\"comicTitle\":\"流浪武士\",\"filename\":\"/test/comic3.png\",\"price\":\"0.08\",\"purchase_date\":\"2023-09-25T16:20:00.000Z\"},{\"buyer\":\"0x8a9b0c1d2e3f4g5h6i7j8k9l0m1n2o3p4q5r6s7t\",\"category\":\"搞笑\",\"chapterTitle\":\"003-1\",\"comicTitle\":\"風起雲湧\",\"filename\":\"/test/comic6.png\",\"price\":\"0.07\",\"purchase_date\":\"2023-06-12T10:45:00.000Z\"},{\"buyer\":\"0x6b7c8d9e0f1g2h3i4j5k6l7m8n9o0p1q2r3s4t5u\",\"category\":\"搞笑\",\"chapterTitle\":\"003-2\",\"comicTitle\":\"風起雲湧\",\"filename\":\"/test/comic6.png\",\"price\":\"0.09\",\"purchase_date\":\"2023-05-05T12:00:00.000Z\"},{\"buyer\":\"0x9e0f1g2h3i4j5k6l7m8n9o0p1q2r3s4t5u6v7w8x\",\"category\":\"古風\",\"chapterTitle\":\"001-1\",\"comicTitle\":\"天啟之門\",\"filename\":\"/test/comic8.png\",\"price\":\"0.16\",\"purchase_date\":\"2024-01-20T14:15:00.000Z\"},{\"buyer\":\"0x3a4b5c6d7e8f9g0h1i2j3k4l5m6n7o8p9q0r1s2t\",\"category\":\"古風\",\"chapterTitle\":\"005-1\",\"comicTitle\":\"天啟之門\",\"filename\":\"/test/comic8.png\",\"price\":\"0.08\",\"purchase_date\":\"2024-07-30T15:30:00.000Z\"},{\"buyer\":\"0x6b7c8d9e0f1g2h3i4j5k6l7m8n9o0p1q2r3s4t5u\",\"category\":\"古風\",\"chapterTitle\":\"008-1\",\"comicTitle\":\"天啟之門\",\"filename\":\"/test/comic8.png\",\"price\":\"0.09\",\"purchase_date\":\"2023-05-10T14:55:00.000Z\"},{\"buyer\":\"0x9e0f1g2h3i4j5k6l7m8n9o0p1q2r3s4t5u6v7w8x\",\"category\":\"搞笑\",\"chapterTitle\":\"002-2\",\"comicTitle\":\"笑爆天\",\"filename\":\"/test/comic2.png\",\"price\":\"0.06\",\"purchase_date\":\"2024-04-25T13:10:00.000Z\"},{\"buyer\":\"0x6b7c8d9e0f1g2h3i4j5k6l7m8n9o0p1q2r3s4t5u\",\"category\":\"玄幻\",\"chapterTitle\":\"003-2\",\"comicTitle\":\"隱秘之城\",\"filename\":\"/test/comic4.png\",\"price\":\"0.07\",\"purchase_date\":\"2023-08-30T15:45:00.000Z\"},{\"buyer\":\"0x7f8g9h0i1j2k3l4m5n6o7p8q9r0s1t2u3v4w5x6y\",\"category\":\"搞笑\",\"chapterTitle\":\"001-1\",\"comicTitle\":\"笑爆天\",\"filename\":\"/test/comic2.png\",\"price\":\"0.05\",\"purchase_date\":\"2024-02-20T16:00:00.000Z\"},{\"buyer\":\"0x1c2d3e4f5g6h7i8j9k0l1m2n3o4p5q6r7s8t9u0v\",\"category\":\"古風\",\"chapterTitle\":\"006-2\",\"comicTitle\":\"天啟之門\",\"filename\":\"/test/comic8.png\",\"price\":\"0.08\",\"purchase_date\":\"2023-12-05T16:20:00.000Z\"},{\"buyer\":\"0x6b7c8d9e0f1g2h3i4j5k6l7m8n9o0p1q2r3s4t5u\",\"category\":\"玄幻\",\"chapterTitle\":\"008-2\",\"comicTitle\":\"隱秘之城\",\"filename\":\"/test/comic4.png\",\"price\":\"0.09\",\"purchase_date\":\"2023-11-10T13:30:00.000Z\"},{\"buyer\":\"0x8f9g0h1i2j3k4l5m6n7o8p9q0r1s2t3u4v5w6x7y\",\"category\":\"古風\",\"chapterTitle\":\"002-2\",\"comicTitle\":\"天啟之門\",\"filename\":\"/test/comic8.png\",\"price\":\"0.06\",\"purchase_date\":\"2023-05-22T14:15:00.000Z\"},{\"buyer\":\"0x9b0c1d2e3f4g5h6i7j8k9l0m1n2o3p4q5r6s7t8u\",\"category\":\"古風\",\"chapterTitle\":\"007-1\",\"comicTitle\":\"天啟之門\",\"filename\":\"/test/comic8.png\",\"price\":\"0.09\",\"purchase_date\":\"2024-09-06T16:00:00.000Z\"},{\"buyer\":\"0x6b7c8d9e0f1g2h3i4j5k6l7m8n9o0p1q2r3s4t5u\",\"category\":\"古風\",\"chapterTitle\":\"003-2\",\"comicTitle\":\"天啟之門\",\"filename\":\"/test/comic8.png\",\"price\":\"0.06\",\"purchase_date\":\"2024-03-28T15:15:00.000Z\"},{\"buyer\":\"0x9e0f1g2h3i4j5k6l7m8n9o0p1q2r3s4t5u6v7w8x\",\"category\":\"戀愛\",\"chapterTitle\":\"004-2\",\"comicTitle\":\"絕世戀人\",\"filename\":\"/test/comic5.png\",\"price\":\"0.08\",\"purchase_date\":\"2024-08-20T12:20:00.000Z\"},{\"buyer\":\"0x9e0f1g2h3i4j5k6l7m8n9o0p1q2r3s4t5u6v7w8x\",\"category\":\"搞笑\",\"chapterTitle\":\"003-1\",\"comicTitle\":\"風起雲湧\",\"filename\":\"/test/comic6.png\",\"price\":\"0.06\",\"purchase_date\":\"2023-07-25T11:00:00.000Z\"},{\"buyer\":\"0x9e0f1g2h3i4j5k6l7m8n9o0p1q2r3s4t5u6v7w8x\",\"category\":\"玄幻\",\"chapterTitle\":\"003-1\",\"comicTitle\":\"幽靈學院\",\"filename\":\"/test/comic1.png\",\"price\":\"0.07\",\"purchase_date\":\"2024-02-05T14:10:00.000Z\"},{\"buyer\":\"0x1d2e3f4g5h6i7j8k9l0m1n2o3p4q5r6s7t8u9v0w\",\"category\":\"玄幻\",\"chapterTitle\":\"007-2\",\"comicTitle\":\"幽靈學院\",\"filename\":\"/test/comic1.png\",\"price\":\"0.09\",\"purchase_date\":\"2023-10-15T16:30:00.000Z\"},{\"buyer\":\"0x9e0f1g2h3i4j5k6l7m8n9o0p1q2r3s4t5u6v7w8x\",\"category\":\"搞笑\",\"chapterTitle\":\"004-2\",\"comicTitle\":\"笑爆天\",\"filename\":\"/test/comic2.png\",\"price\":\"0.08\",\"purchase_date\":\"2023-08-10T14:25:00.000Z\"},{\"buyer\":\"0x3c4d5e6f7g8h9i0j1k2l3m4n5o6p7q8r9s0t1u2v\",\"category\":\"冒險\",\"chapterTitle\":\"009-1\",\"comicTitle\":\"異界遊俠\",\"filename\":\"/test/comic7.png\",\"price\":\"0.07\",\"purchase_date\":\"2024-06-30T15:45:00.000Z\"},{\"buyer\":\"0x3c4d5e6f7g8h9i0j1k2l3m4n5o6p7q8r9s0t1u2v\",\"category\":\"冒險\",\"chapterTitle\":\"004-2\",\"comicTitle\":\"異界遊俠\",\"filename\":\"/test/comic7.png\",\"price\":\"0.06\",\"purchase_date\":\"2024-07-12T16:00:00.000Z\"},{\"buyer\":\"0x7e8f9g0h1i2j3k4l5m6n7o8p9q0r1s2t3u4v5w6x\",\"category\":\"搞笑\",\"chapterTitle\":\"008-1\",\"comicTitle\":\"笑爆天\",\"filename\":\"/test/comic2.png\",\"price\":\"0.08\",\"purchase_date\":\"2024-09-05T12:30:00.000Z\"},{\"buyer\":\"0x1d2e3f4g5h6i7j8k9l0m1n2o3p4q5r6s7t8u9v0w\",\"category\":\"戀愛\",\"chapterTitle\":\"004-1\",\"comicTitle\":\"絕世戀人\",\"filename\":\"/test/comic5.png\",\"price\":\"0.09\",\"purchase_date\":\"2023-05-10T13:20:00.000Z\"},{\"buyer\":\"0x1d2e3f4g5h6i7j8k9l0m1n2o3p4q5r6s7t8u9v0w\",\"category\":\"戀愛\",\"chapterTitle\":\"004-2\",\"comicTitle\":\"絕世戀人\",\"filename\":\"/test/comic5.png\",\"price\":\"0.09\",\"purchase_date\":\"2023-10-25T11:00:00.000Z\"},{\"buyer\":\"0x3c4d5e6f7g8h9i0j1k2l3m4n5o6p7q8r9s0t1u2v\",\"category\":\"玄幻\",\"chapterTitle\":\"008-1\",\"comicTitle\":\"幽靈學院\",\"filename\":\"/test/comic1.png\",\"price\":\"0.07\",\"purchase_date\":\"2024-04-05T08:10:00.000Z\"},{\"buyer\":\"0x3c4d5e6f7g8h9i0j1k2l3m4n5o6p7q8r9s0t1u2v\",\"category\":\"冒險\",\"chapterTitle\":\"005-1\",\"comicTitle\":\"異界遊俠\",\"filename\":\"/test/comic7.png\",\"price\":\"0.06\",\"purchase_date\":\"2024-08-20T14:25:00.000Z\"},{\"buyer\":\"0x3c4d5e6f7g8h9i0j1k2l3m4n5o6p7q8r9s0t1u2v\",\"category\":\"古風\",\"chapterTitle\":\"005-1\",\"comicTitle\":\"天啟之門\",\"filename\":\"/test/comic8.png\",\"price\":\"0.07\",\"purchase_date\":\"2024-07-11T15:30:00.000Z\"},{\"buyer\":\"0x7d8e9f0g1h2i3j4k5l6m7n8o9p0q1r2s3t4u5v6w\",\"category\":\"古風\",\"chapterTitle\":\"006-1\",\"comicTitle\":\"天啟之門\",\"filename\":\"/test/comic8.png\",\"price\":\"0.07\",\"purchase_date\":\"2023-10-30T13:15:00.000Z\"},{\"buyer\":\"0x1d2e3f4g5h6i7j8k9l0m1n2o3p4q5r6s7t8u9v0w\",\"category\":\"古風\",\"chapterTitle\":\"007-2\",\"comicTitle\":\"天啟之門\",\"filename\":\"/test/comic8.png\",\"price\":\"0.09\",\"purchase_date\":\"2023-12-20T12:45:00.000Z\"},{\"buyer\":\"0x3c4d5e6f7g8h9i0j1k2l3m4n5o6p7q8r9s0t1u2v\",\"category\":\"戀愛\",\"chapterTitle\":\"007-1\",\"comicTitle\":\"絕世戀人\",\"filename\":\"/test/comic5.png\",\"price\":\"0.05\",\"purchase_date\":\"2024-03-22T16:30:00.000Z\"},{\"buyer\":\"0x3c4d5e6f7g8h9i0j1k2l3m4n5o6p7q8r9s0t1u2v\",\"category\":\"玄幻\",\"chapterTitle\":\"007-2\",\"comicTitle\":\"幽靈學院\",\"filename\":\"/test/comic1.png\",\"price\":\"0.09\",\"purchase_date\":\"2024-04-05T13:10:00.000Z\"},{\"buyer\":\"0x3c4d5e6f7g8h9i0j1k2l3m4n5o6p7q8r9s0t1u2v\",\"category\":\"搞笑\",\"chapterTitle\":\"001-1\",\"comicTitle\":\"風起雲湧\",\"filename\":\"/test/comic6.png\",\"price\":\"0.08\",\"purchase_date\":\"2024-01-15T11:45:00.000Z\"},{\"buyer\":\"0x1d2e3f4g5h6i7j8k9l0m1n2o3p4q5r6s7t8u9v0w\",\"category\":\"玄幻\",\"chapterTitle\":\"009-1\",\"comicTitle\":\"幽靈學院\",\"filename\":\"/test/comic1.png\",\"price\":\"0.07\",\"purchase_date\":\"2023-07-20T15:00:00.000Z\"},{\"buyer\":\"0x4c5d6e7f8g9h0i1j2k3l4m5n6o7p8q9r0s1t2u3v\",\"category\":\"戀愛\",\"chapterTitle\":\"007-1\",\"comicTitle\":\"絕世戀人\",\"filename\":\"/test/comic5.png\",\"price\":\"0.08\",\"purchase_date\":\"2023-04-10T13:30:00.000Z\"},{\"buyer\":\"0x3c4d5e6f7g8h9i0j1k2l3m4n5o6p7q8r9s0t1u2v\",\"category\":\"冒險\",\"chapterTitle\":\"008-1\",\"comicTitle\":\"異界遊俠\",\"filename\":\"/test/comic7.png\",\"price\":\"0.08\",\"purchase_date\":\"2024-05-05T14:00:00.000Z\"},{\"buyer\":\"0x6f7g8h9i0j1k2l3m4n5o6p7q8r9s0t1u2v3w4x5y\",\"category\":\"冒險\",\"chapterTitle\":\"005-2\",\"comicTitle\":\"異界遊俠\",\"filename\":\"/test/comic7.png\",\"price\":\"0.06\",\"purchase_date\":\"2024-06-15T13:45:00.000Z\"},{\"buyer\":\"0x7g8h9i0j1k2l3m4n5o6p7q8r9s0t1u2v3w4x5y6z\",\"category\":\"古風\",\"chapterTitle\":\"008-1\",\"comicTitle\":\"天啟之門\",\"filename\":\"/test/comic8.png\",\"price\":\"0.09\",\"purchase_date\":\"2024-03-05T15:20:00.000Z\"},{\"buyer\":\"0x8h9i0j1k2l3m4n5o6p7q8r9s0t1u2v3w4x5y6z7a\",\"category\":\"戀愛\",\"chapterTitle\":\"009-2\",\"comicTitle\":\"絕世戀人\",\"filename\":\"/test/comic5.png\",\"price\":\"0.07\",\"purchase_date\":\"2024-02-15T12:30:00.000Z\"},{\"buyer\":\"0x9i0j1k2l3m4n5o6p7q8r9s0t1u2v3w4x5y6z7a8b\",\"category\":\"武俠\",\"chapterTitle\":\"003-2\",\"comicTitle\":\"流浪武士\",\"filename\":\"/test/comic3.png\",\"price\":\"0.08\",\"purchase_date\":\"2024-07-05T14:25:00.000Z\"},{\"buyer\":\"0x1d2e3f4g5h6i7j8k9l0m1n2o3p4q5r6s7t8u9v0w\",\"category\":\"古風\",\"chapterTitle\":\"007-1\",\"comicTitle\":\"天啟之門\",\"filename\":\"/test/comic8.png\",\"price\":\"0.09\",\"purchase_date\":\"2023-11-20T16:30:00.000Z\"},{\"buyer\":\"0x1k2l3m4n5o6p7q8r9s0t1u2v3w4x5y6z7a8b9c0d\",\"category\":\"武俠\",\"chapterTitle\":\"010-1\",\"comicTitle\":\"流浪武士\",\"filename\":\"/test/comic3.png\",\"price\":\"0.06\",\"purchase_date\":\"2024-08-25T13:10:00.000Z\"}];//1.幽靈學院 玄幻 /test/comic1.png\n//2.笑爆天 搞笑 /test/comic2.png\n//3.流浪武士 武俠 /test/comic3.png\n//4.隱秘之城 玄幻 /test/comic4.png\n//5.絕世戀人 戀愛 /test/comic5.png\n//6.風起雲湧 搞笑 /test/comic6.png\n//7.異界遊俠 冒險 /test/comic7.png\n//8.天啟之門 古風 /test/comic8.png\n// 測試數據 22 筆\nconst test_data_2=[{\"forSale\":1,\"price\":{\"0\":\"0.3\",\"1\":\"0.35\",\"3\":\"0.5\"},\"royalty\":5,\"title\":\"幽靈學院\",\"tokenTitle\":\"異象\"},{\"forSale\":0,\"price\":{\"0\":\"0.2\",\"1\":\"0.15\"},\"royalty\":4,\"title\":\"幽靈學院\",\"tokenTitle\":\"歸途\"},{\"forSale\":1,\"price\":{\"0\":\"0.2\",\"1\":\"0.2\",\"2\":\"0.15\",\"3\":\"0.3\"},\"royalty\":6,\"title\":\"幽靈學院\",\"tokenTitle\":\"歸途\"},{\"forSale\":0,\"price\":{\"0\":\"0.25\",\"1\":\"0.28\",\"2\":\"0.35\"},\"royalty\":7,\"title\":\"隱秘之城\",\"tokenTitle\":\"群像\"},{\"forSale\":1,\"price\":{\"0\":\"0.25\",\"1\":\"0.2\",\"2\":\"0.2\"},\"royalty\":3,\"title\":\"隱秘之城\",\"tokenTitle\":\"群像\"},{\"forSale\":0,\"price\":{\"0\":\"0.25\",\"1\":\"0.25\",\"2\":\"0.3\",\"5\":\"0.3\"},\"royalty\":8,\"title\":\"隱秘之城\",\"tokenTitle\":\"霧靄\"},{\"forSale\":1,\"price\":{\"0\":\"0.09\",\"1\":\"0.10\"},\"royalty\":5,\"title\":\"天啟之門\",\"tokenTitle\":\"白道士\"},{\"forSale\":0,\"price\":{\"0\":\"0.1\",\"1\":\"0.12\",\"3\":\"0.13\"},\"royalty\":9,\"title\":\"天啟之門\",\"tokenTitle\":\"白道士\"},{\"forSale\":1,\"price\":{\"0\":\"0.1\",\"1\":\"0.14\",\"2\":\"0.15\",\"4\":\"0.2\"},\"royalty\":2,\"title\":\"天啟之門\",\"tokenTitle\":\"天靈地寶\"},{\"forSale\":0,\"price\":{\"0\":\"0.16\",\"1\":\"0.25\"},\"royalty\":10,\"title\":\"絕世戀人\",\"tokenTitle\":\"他的他\"},{\"forSale\":1,\"price\":{\"0\":\"0.16\",\"1\":\"0.1\",\"2\":\"0.25\"},\"royalty\":4,\"title\":\"絕世戀人\",\"tokenTitle\":\"他的他\"},{\"forSale\":0,\"price\":{\"0\":\"0.16\",\"1\":\"0.28\"},\"royalty\":6,\"title\":\"絕世戀人\",\"tokenTitle\":\"他的他\"},{\"forSale\":1,\"price\":{\"0\":\"0.05\",\"1\":\"0.1\"},\"royalty\":3,\"title\":\"風起雲湧\",\"tokenTitle\":\"小宜茶館\"},{\"forSale\":0,\"price\":{\"0\":\"0.05\",\"1\":\"0.08\",\"2\":\"0.09\",\"3\":\"0.10\"},\"royalty\":8,\"title\":\"風起雲湧\",\"tokenTitle\":\"小宜茶館\"},{\"forSale\":1,\"price\":{\"0\":\"0.05\",\"1\":\"0.10\",\"2\":\"0.11\"},\"royalty\":5,\"title\":\"風起雲湧\",\"tokenTitle\":\"小酌\"},{\"forSale\":0,\"price\":{\"0\":\"0.2\",\"1\":\"0.2\",\"2\":\"0.26\",\"3\":\"0.28\",\"5\":\"0.25\"},\"royalty\":7,\"title\":\"異界遊俠\",\"tokenTitle\":\"裘壇主軼聞紀\"},{\"forSale\":1,\"price\":{\"0\":\"0.2\",\"1\":\"0.14\",\"2\":\"0.15\"},\"royalty\":6,\"title\":\"幽靈學院\",\"tokenTitle\":\"歸途\"},{\"forSale\":0,\"price\":{\"0\":\"0.2\",\"1\":\"0.28\",\"2\":\"0.3\",\"3\":\"0.2\"},\"royalty\":9,\"title\":\"異界遊俠\",\"tokenTitle\":\"軼聞\"},{\"forSale\":1,\"price\":{\"0\":\"0.2\",\"1\":\"0.25\",\"2\":\"0.25\"},\"royalty\":2,\"title\":\"笑爆天\",\"tokenTitle\":\"哈哈哈\"},{\"forSale\":0,\"price\":{\"0\":\"0.2\",\"1\":\"0.25\"},\"royalty\":8,\"title\":\"天啟之門\",\"tokenTitle\":\"無悔\"},{\"forSale\":1,\"price\":{\"0\":\"0.2\",\"1\":\"0.22\",\"2\":\"0.23\"},\"royalty\":4,\"title\":\"天啟之門\",\"tokenTitle\":\"無悔\"},{\"forSale\":0,\"price\":{\"0\":\"0.25\",\"1\":\"0.4\"},\"royalty\":10,\"title\":\"幽靈學院\",\"tokenTitle\":\"啟程\"}];const DataAnalysis=()=>{const[dataByPeriod,setDataByPeriod]=useState({year:{},quarter:{},month:{},day:{}});const[salesData,setSalesData]=useState('');const[timePeriod,setTimePeriod]=useState('year');const[comics,setComics]=useState([]);const[pieData,setPieData]=useState(null);const[pieTop5,setPieTop5]=useState(null);const[selectedComic,setSelectedComic]=useState('');const[lineData,setLineData]=useState({});const[detailData,setDetailData]=useState(null);const[lowestDetailData,setLowestDetailData]=useState(null);const[comicPeriod,setComicPeriod]=useState('year');const[x_title,setX_title]=useState({year:'',month:''});const[buyer,setBuyer]=useState({});const[buyerPeriod,setBuyerPeriod]=useState('28天');const[selectedBuyer,setSelectedBuyer]=useState('');const[cimicRank,setCimicRank]=useState('');const[dates,setDates]=useState(null);const[rankFilterData,setRankFilterData]=useState([]);const[rankSort,setRankSort]=useState('sales');const[rankPeriodData,setRankPeriodData]=useState([]);const[rankPeriod,setRankPeriod]=useState('28天');const[nftData,setNftData]=useState([]);const[nftSalesData,setNftSalesData]=useState({});const[chartData,setChartData]=useState({data:'',options:''});const[pieChartData,setPieChartData]=useState('');const[selectedComicTitle,setSelectedComicTitle]=useState('');const{t}=useTranslation();const[loading,setLoading]=useState(true);const currentAccount=localStorage.getItem(\"currentAccount\");const headers={'api-key':API_KEY};const initData=async()=>{try{const response=await axios.get(\"\".concat(website,\"/api/dataAnalysis/records\"),{headers,params:{currentAccount}});const comicOrigin=response.data;//console.log(comicOrigin);\n//if (comicOrigin.comics.length === 0) {\nif(test_data_1.length===0){message.info(t('目前沒有漫畫購買紀錄'));};//if (comicOrigin.nft.length === 0) {\nif(test_data_1.length===0){message.info(t('目前沒有NFT購買紀錄'));};const comic=comicOrigin.comics;//const nft = comicOrigin.nft;\nconst nft=test_data_2;//const processedData = initAllComicData(comic);\nconst processedData=initAllComicData(test_data_1);//console.log(processedData);\nsetDataByPeriod(processedData);//const comics = initFilterComicData(comic);\nconst comics=initFilterComicData(test_data_1);//console.log(comics);\nsetComics(comics);//await initBuyerData(comic);\nawait initBuyerData(test_data_1);const filtered={};for(const key in comics){if(comics[key].category){filtered[key]={day:comics[key].day,category:comics[key].category,filename:comics[key].filename};};};//console.log(filtered);\nsetCimicRank(filtered);const initNFT=initNFTData(nft);//console.log(initNFT);\nsetNftData(initNFT);setLoading(false);}catch(error){console.error('Error fetching records:',error);message.warning('頁面加載失敗，請重新在試!');setLoading(false);}};useEffect(()=>{initData();},[currentAccount]);// 漫畫－銷售額\nuseEffect(()=>{setSalesData(computeSalesData(dataByPeriod,timePeriod,t));},[dataByPeriod,timePeriod]);useEffect(()=>{if(selectedComic===t('請選擇漫畫')||timePeriod==='quarter'){return;}const data=computeComicData(comics,selectedComic,timePeriod,t);setLineData(data);},[selectedComic,timePeriod]);const handleChartClick=(event,currentPeriod)=>{const chart=event.chart;if(!chart)return;const points=chart.getElementsAtEventForMode(event,'nearest',{intersect:true},true);if(points.length===0)return;const firstPoint=points[0];const label=chart.data.labels[firstPoint.index];const generateFilteredData=(period,label,dataCalculator,labelGenerator)=>{const data=dataCalculator(comics,selectedComic,period,t);const allLabels=labelGenerator(label);return{labels:allLabels,datasets:[{label:\"\".concat(selectedComic,\" - \").concat(t('銷售額')),data:allLabels.map(l=>{const index=data.labels.indexOf(l);return index>=0?data.datasets[0].data[index]:0;}),backgroundColor:'#ff5733',borderColor:'#ff5733',borderWidth:1,countData:allLabels.map(l=>{const index=data.labels.indexOf(l);return index>=0?data.datasets[0].countData[index]:0;})}]};};if(currentPeriod==='year'){const year=label;const filteredMonthData=generateFilteredData('month',year,computeComicData,year=>Array.from({length:12},(_,i)=>\"\".concat(year,\"-\").concat(String(i+1).padStart(2,'0'))));setComicPeriod('month');const x_year=filteredMonthData.labels[0].split('-')[0];setX_title(prev=>({...prev,year:x_year}));setDetailData(filteredMonthData);setLowestDetailData(null);}else if(currentPeriod==='month'){const month=label;const filteredDayData=generateFilteredData('day',month,computeComicData,month=>Array.from({length:31},(_,i)=>\"\".concat(month,\"-\").concat(String(i+1).padStart(2,'0'))));setComicPeriod('day');const x_month=filteredDayData.labels[0].slice(0,7);setX_title(prev=>({...prev,month:x_month}));setLowestDetailData(filteredDayData);}};const handlePieChartClick=event=>{const chart=event.chart;if(!chart)return;const points=chart.getElementsAtEventForMode(event,'nearest',{intersect:true},true);if(points.length>0){const firstPoint=points[0];const label=chart.data.labels[firstPoint.index];const timePeriods={year:'year',quarter:'quarter',month:'month',day:'day'};const timePeriodKey=timePeriods[timePeriod];const timePeriodData=computeSalesData(dataByPeriod,timePeriodKey,t);const pieChartData=transformPieData(timePeriodData.datasets[0].pieData,label);const{labels,datasets}=pieChartData;const data=datasets[0].data;const top5=labels.map((label,index)=>({label,value:data[index]})).sort((a,b)=>b.value-a.value).slice(0,5);setPieTop5({date:label,title:top5.map((item,index)=>\"\".concat(index+1,\". \").concat(item.label,\"\\uFF1A\").concat(item.value,\" ETH\"))});if(pieChartData.labels.length===0){message.info(t('目前沒有購買紀錄'));}setPieData(pieChartData);}};const options={responsive:true,plugins:{legend:{position:'top'},tooltip:{callbacks:{label:context=>{const index=context.dataIndex;const sales=context.dataset.data[index];const count=context.dataset.countData[index];return[\"\".concat(t('銷售額'),\"\\uFF1A\").concat(sales),\"\".concat(t('數量'),\"\\uFF1A\").concat(count)];}}}},scales:{x:{title:{display:true,text:t('日期')}},y:{title:{display:true,text:t('銷售額')}}}};const pieOptions={responsive:true,// 使图表在不同屏幕尺寸下自适应\nplugins:{legend:{position:'top',// 图例位置（'top', 'bottom', 'left', 'right'）\nlabels:{color:'#333',// 图例文本颜色\nfont:{size:14// 图例文本字体大小\n}}},tooltip:{callbacks:{label:function(tooltipItem){const label=tooltipItem.label||'';const value=tooltipItem.raw.toFixed(3);// 显示小数点后两位\nreturn\"\".concat(label,\": \").concat(value);}},backgroundColor:'#fff',// 工具提示背景颜色\ntitleColor:'#000',// 工具提示标题颜色\nbodyColor:'#000',// 工具提示主体颜色\nborderColor:'#ddd',// 工具提示边框颜色\nborderWidth:1// 工具提示边框宽度\n}},maintainAspectRatio:false// 不保持图表宽高比，使其填满容器\n};const filterOptions={responsive:true,plugins:{legend:{position:'top'},tooltip:{callbacks:{label:context=>{const index=context.dataIndex;const sales=context.dataset.data[index];const count=context.dataset.countData[index];return[\"\".concat(t('銷售額'),\"\\uFF1A\").concat(sales),\"\".concat(t('數量'),\"\\uFF1A\").concat(count)];}}}},scales:{y:{title:{display:true,text:t('銷售額')}}}};const renderLineChart=(data,options)=>{if(data){return/*#__PURE__*/_jsx(Line,{data:data,options:{...options,onClick:e=>handlePieChartClick(e)}});}};const renderPieChart=(data,pieOptions)=>{if(data){return/*#__PURE__*/_jsx(Pie,{data:data,options:{pieOptions}});}/*#__PURE__*/_jsx(Pie,{data:pieData,options:pieOptions});};const renderChart=(data,options,period)=>{if(data){return/*#__PURE__*/_jsx(Line,{data:data,options:{...options,onClick:e=>handleChartClick(e,period)}});}};const handlePeriodChange=e=>{const period=e.target.value;if(period==='quarter'){setLineData({});}setTimePeriod(period);setComicPeriod(period);setDetailData(null);setLowestDetailData(null);setX_title({});setPieData(null);};const handleComicChange=e=>{setSelectedComic(e.target.value);setDetailData(null);setLowestDetailData(null);setX_title({});};// 漫畫－客戶群\nconst today=new Date();const periods={'7天':[new Date(today.getTime()-7*24*60*60*1000),today],'28天':[new Date(today.getTime()-28*24*60*60*1000),today],'90天':[new Date(today.getTime()-90*24*60*60*1000),today],'180天':[new Date(today.getTime()-180*24*60*60*1000),today],'2023':[new Date('2023-01-01T00:00:00Z'),new Date('2023-12-31T23:59:59Z')],'2024':[new Date('2024-01-01T00:00:00Z'),new Date('2024-12-31T23:59:59Z')],'發布至今':[new Date('2023-01-01T00:00:00Z'),today]};const initBuyerData=data=>{const salesData={};for(const[period,[start,end]]of Object.entries(periods)){salesData[period]=calculateSales(data,start,end);}setBuyer(salesData);};const getSummary=periodData=>{const summary={total_amount:0,count:0,buyerCount:0};Object.values(periodData||{}).forEach(_ref6=>{let{total_amount,count}=_ref6;summary.total_amount+=total_amount;summary.count+=count;});summary.buyerCount=Object.keys(periodData||{}).length;return summary;};const currentPeriodData=buyer[buyerPeriod]||{};const summary=getSummary(currentPeriodData);const sortedBuyers=Object.entries(currentPeriodData).sort((_ref7,_ref8)=>{let[,a]=_ref7;let[,b]=_ref8;return rankSort==='sales'?b.total_amount-a.total_amount:b.count-a.count;});const totalStats=Object.values(currentPeriodData).reduce((acc,_ref9)=>{let{total_amount,count}=_ref9;acc.total_amount+=total_amount;acc.count+=count;return acc;},{total_amount:0,count:0});const getComicsForBuyer=buyerId=>{const buyer=sortedBuyers.find(_ref10=>{let[id]=_ref10;return id===buyerId;});return buyer?Object.entries(buyer[1].comics):[];};// 漫畫－排行榜\nuseEffect(()=>{initRankingData();},[cimicRank]);const initRankingData=()=>{const aggregatedData={};for(const comic in cimicRank){const{category,filename,day}=cimicRank[comic];const comicData=Object.keys(periods).reduce((acc,period)=>{acc[period]={totalSales:0,totalCount:0,category,image:filename};return acc;},{});Object.values(day).forEach(_ref11=>{let{date,sales,count}=_ref11;const saleDate=new Date(date);for(const[period,[startDate,endDate]]of Object.entries(periods)){if(saleDate>=startDate&&saleDate<=endDate){comicData[period].totalSales+=sales;comicData[period].totalCount+=count;}}});Object.entries(comicData).forEach(_ref12=>{let[period,data]=_ref12;if(!aggregatedData[period])aggregatedData[period]={};if(data.totalCount>0){aggregatedData[period][comic]={totalSales:data.totalSales.toFixed(3),totalCount:data.totalCount,category:data.category,image:data.image};}});}setRankPeriodData(aggregatedData);};const clickRankPeriod=period=>{setRankPeriod(period);setRankFilterData(rankPeriodData[period]||{});};const filterDataByRange=async()=>{if(dates&&dates[0]&&dates[1]){const start=dates[0].startOf('day').toDate();const end=dates[1].endOf('day').toDate();const aggregatedData={};for(const comic in cimicRank){const days=cimicRank[comic].day;const filteredDays=Object.values(days).filter(item=>{const itemDate=new Date(item.date);return itemDate>=start&&itemDate<=end;});if(filteredDays.length>0){let totalSales=0;let totalCount=0;filteredDays.forEach(_ref13=>{let{sales,count}=_ref13;totalSales+=sales;totalCount+=count;});//const response = await axios.get(`${website}/api/comicIMG/${cimicRank[comic].filename}`, { responseType: 'blob', headers });\n//const image = URL.createObjectURL(response.data);\naggregatedData[comic]={totalSales:totalSales.toFixed(3),totalCount,category:cimicRank[comic].category,//image: image\nimage:cimicRank[comic].filename};}}if(Object.keys(aggregatedData).length>0){console.log(aggregatedData);setRankFilterData(aggregatedData);setRankPeriod('');}else{message.info('沒有符合條件的資料');setRankFilterData({});}}else{message.warning('請選擇完整的日期區間');}};useEffect(()=>{setRankFilterData([]);},[dates]);const handleSortChange=value=>{setRankSort(value);};const sortedRank=()=>{const entries=Object.entries(rankFilterData);if(rankSort==='sales'){return entries.sort((_ref14,_ref15)=>{let[,a]=_ref14;let[,b]=_ref15;return b.totalSales-a.totalSales;});}else if(rankSort==='count'){return entries.sort((_ref16,_ref17)=>{let[,a]=_ref16;let[,b]=_ref17;return b.totalCount-a.totalCount;});}return entries;};// NFT－收益分布\nuseEffect(()=>{if(nftData&&nftData.totRevenueResults&&nftData.transferRevenueResults){const{data,options}=nftChartData(nftData.totRevenueResults,nftData.transferRevenueResults,t);setChartData({data,options});setNftSalesData({total:nftPieTot(nftData.totRevenueResults,'總收益',t),transfer:nftPieTot(nftData.transferRevenueResults,'轉手收益',t)});}},[nftData]);const NftPieChart=_ref18=>{let{chartData,title}=_ref18;return/*#__PURE__*/_jsxs(\"div\",{className:\"pie-chart-item\",children:[/*#__PURE__*/_jsx(Pie,{data:chartData,options:chartData.options,style:{marginTop:\"-40px\",maxWidth:\"500px\",maxHeight:\"500px\"}}),/*#__PURE__*/_jsxs(\"div\",{style:{marginTop:\"-40px\",marginBottom:\"0px\",marginLeft:\"5%\"},children:[/*#__PURE__*/_jsx(\"h3\",{children:t(title)}),/*#__PURE__*/_jsx(\"h4\",{children:t('前 5 名')}),nftSalesTop5(chartData)]})]});};const nftSalesTop5=_ref19=>{let{datasetDetails}=_ref19;return/*#__PURE__*/_jsx(\"div\",{style:{marginTop:'20px'},children:datasetDetails.map((item,index)=>/*#__PURE__*/_jsxs(\"div\",{children:[index+1,\". \",item.title,\"\\uFF1A\",item.revenue.toFixed(3),\" ETH\"]},item.title))});};const handleBarClick=event=>{const chart=event.chart;if(!chart)return;const points=chart.getElementsAtEventForMode(event,'nearest',{intersect:true},true);if(points.length===0)return;const index=points[0].index;const comicTitle=chartData.data.labels[index];const datasetLabel=chartData.data.datasets[points[0].datasetIndex].label;const isTotRevenue=datasetLabel===t('總收益');const dataSource=isTotRevenue?nftData.totRevenueResults:nftData.transferRevenueResults;const comic=dataSource.find(item=>item.comicTitle===comicTitle);const nftTitles=comic?comic.nftTitles:[];const pieData={labels:nftTitles.map(nft=>nft.nftTitle),datasets:[{data:nftTitles.map(nft=>parseFloat(nft.totalRevenue))}]};const top5=nftTitles.sort((a,b)=>parseFloat(b.totalRevenue)-parseFloat(a.totalRevenue))// 根据总收益排序\n.slice(0,5)// 获取前五名\n.map((nft,index)=>\"\".concat(index+1,\". \").concat(nft.nftTitle,\"\\uFF1A\").concat(nft.totalRevenue,\" ETH\"));setSelectedComicTitle({title:comicTitle,state:datasetLabel});setPieChartData({data:pieData,top5:top5});};const NFTpieOptions={responsive:true,plugins:{legend:{position:'top',labels:{color:'#333',font:{size:14}}},tooltip:{callbacks:{label:_ref20=>{var _nftData$totRevenueRe,_nftData$totRevenueRe2;let{label,raw}=_ref20;const count=((_nftData$totRevenueRe=nftData.totRevenueResults.find(item=>item.comicTitle===selectedComicTitle.title))===null||_nftData$totRevenueRe===void 0?void 0:(_nftData$totRevenueRe2=_nftData$totRevenueRe.nftTitles.find(nft=>nft.nftTitle===label))===null||_nftData$totRevenueRe2===void 0?void 0:_nftData$totRevenueRe2.count)||0;return[\"\".concat(t('總收益'),\"\\uFF1A\").concat(raw.toFixed(3)),\"\".concat(t('總比數'),\"\\uFF1A\").concat(count)];}}}}};const[isMobileView,setIsMobileView]=useState(window.innerWidth<768);useEffect(()=>{const handleResize=()=>setIsMobileView(window.innerWidth<768);window.addEventListener('resize',handleResize);// 初次渲染時也要確認\nhandleResize();// 移除事件監聽器\nreturn()=>window.removeEventListener('resize',handleResize);},[]);// 格式化 buyerId：如果是手機視圖，顯示省略號\nconst formatBuyerId=buyerId=>{if(!buyerId)return'';return isMobileView?\"\".concat(buyerId.slice(0,5),\"...\").concat(buyerId.slice(-5)):buyerId;};return/*#__PURE__*/_jsxs(_Fragment,{children:[!loading&&/*#__PURE__*/_jsxs(Container,{className:\"dataAnalysis pb-5\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"dataAnalysis-title\",children:/*#__PURE__*/_jsx(\"h2\",{className:\"text-center fw-bold\",style:{backgroundColor:\"green\"},children:t('數據分析')})}),/*#__PURE__*/_jsxs(Tabs,{defaultActiveKey:\"comic\",id:\"data-analysis-tabs\",className:\"mt-4 mb-3 w-100\",children:[/*#__PURE__*/_jsx(Tab,{eventKey:\"comic\",title:t('漫畫'),children:/*#__PURE__*/_jsxs(Tabs,{defaultActiveKey:\"comicSales\",className:\"mb-3 w-100 custom-tabs second-tabs\",children:[/*#__PURE__*/_jsx(Tab,{className:\"second-tab\",eventKey:\"comicSales\",title:t('銷售額'),children:/*#__PURE__*/_jsxs(\"div\",{style:{marginBottom:\"50px\"},className:\"sales-chart\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex align-items-center justify-content-between\",children:[/*#__PURE__*/_jsx(\"h1\",{children:t('漫畫總銷售額')}),/*#__PURE__*/_jsxs(Form.Select,{value:timePeriod,onChange:handlePeriodChange,children:[/*#__PURE__*/_jsx(\"option\",{value:\"year\",children:t('年')}),/*#__PURE__*/_jsx(\"option\",{value:\"quarter\",children:t('季')}),/*#__PURE__*/_jsx(\"option\",{value:\"month\",children:t('月')}),/*#__PURE__*/_jsx(\"option\",{value:\"day\",children:t('日')})]})]}),salesData&&salesData.labels.length>0?/*#__PURE__*/_jsxs(_Fragment,{children:[renderLineChart(salesData,options),pieData&&Object.keys(pieData).length>0&&/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(\"center\",{children:[/*#__PURE__*/_jsx(\"h2\",{children:t('漫畫銷售佔比')}),pieTop5&&pieTop5.title.length!==0?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{style:{maxWidth:\"500px\",maxHeight:\"500px\"},children:renderPieChart(pieData,pieOptions)}),/*#__PURE__*/_jsxs(\"h3\",{children:[pieTop5.date,\" \",t('前 5 名')]}),pieTop5.title&&pieTop5.title.map((item,index)=>/*#__PURE__*/_jsx(\"p\",{children:item},index))]}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"h3\",{children:[pieTop5.date,\" \",t('前 5 名')]}),/*#__PURE__*/_jsx(\"p\",{children:t('目前沒有購買紀錄')})]})]})})]}):/*#__PURE__*/_jsx(\"p\",{children:t('目前沒有購買紀錄')}),/*#__PURE__*/_jsx(\"h3\",{className:\"mt-5\",children:t('篩選漫畫')}),/*#__PURE__*/_jsxs(Form.Select,{className:\"mt-4 mb-4\",value:selectedComic,onChange:handleComicChange,children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:t('請選擇漫畫')}),Object.keys(comics).map((comic,index)=>/*#__PURE__*/_jsx(\"option\",{value:comic,children:comic},index))]}),lineData&&Object.keys(lineData).length>0&&/*#__PURE__*/_jsxs(_Fragment,{children:[renderChart(lineData,options,timePeriod),renderChart(detailData,filterOptions,timePeriod==='year'?'month':comicPeriod),timePeriod==='year'&&(comicPeriod==='month'||comicPeriod==='day')&&/*#__PURE__*/_jsx(\"center\",{children:/*#__PURE__*/_jsx(\"p\",{children:x_title.year})}),renderChart(lowestDetailData,filterOptions,timePeriod==='month'?'day':comicPeriod),timePeriod==='year'&&comicPeriod==='day'?/*#__PURE__*/_jsx(\"center\",{children:/*#__PURE__*/_jsx(\"p\",{children:x_title.month})}):timePeriod==='month'?/*#__PURE__*/_jsx(\"center\",{children:/*#__PURE__*/_jsx(\"p\",{children:x_title.month})}):null]})]})}),/*#__PURE__*/_jsx(Tab,{className:\"second-tab\",eventKey:\"comicCustomer\",title:t('客户群'),children:/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h1\",{className:\"mb-2\",children:t('買家銷售總覽')}),/*#__PURE__*/_jsx(\"div\",{className:\"scrollable-container\",children:/*#__PURE__*/_jsx(\"div\",{className:\"scrollable-buttons\",children:Object.keys(buyer).map(period=>/*#__PURE__*/_jsx(Button,{className:\"mb-2 btn\",onClick:()=>setBuyerPeriod(period),children:t(period)},period))})}),/*#__PURE__*/_jsxs(\"div\",{className:\"customer-text pt-3\",children:[/*#__PURE__*/_jsxs(Table,{striped:true,hover:true,className:\"mb-4 income-table\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:t('區間')}),/*#__PURE__*/_jsx(\"th\",{children:t('買家數量')}),/*#__PURE__*/_jsx(\"th\",{children:t('總收益')}),/*#__PURE__*/_jsx(\"th\",{children:t('總數量')})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:t(buyerPeriod)}),/*#__PURE__*/_jsx(\"td\",{children:summary.buyerCount}),/*#__PURE__*/_jsxs(\"td\",{children:[\"$\",summary.total_amount.toFixed(3)]}),/*#__PURE__*/_jsx(\"td\",{children:summary.count})]})})]}),/*#__PURE__*/_jsxs(Select,{defaultValue:\"sales\",style:{width:200,marginBottom:16},onChange:handleSortChange,children:[/*#__PURE__*/_jsx(Select.Option,{value:\"sales\",children:t('銷售額排序')}),/*#__PURE__*/_jsx(Select.Option,{value:\"count\",children:t('購買量排序')})]}),/*#__PURE__*/_jsxs(Table,{striped:true,hover:true,children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:t('買家')}),/*#__PURE__*/_jsx(\"th\",{children:t('銷售額')}),/*#__PURE__*/_jsx(\"th\",{children:t('總數量')})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:sortedBuyers.map(_ref21=>{let[buyerId,stats]=_ref21;return/*#__PURE__*/_jsxs(React.Fragment,{children:[/*#__PURE__*/_jsxs(\"tr\",{onClick:()=>setSelectedBuyer(buyerId===selectedBuyer?null:buyerId),className:\"pt-2\",children:[/*#__PURE__*/_jsx(\"td\",{\"data-label\":t('買家'),children:formatBuyerId(buyerId)}),/*#__PURE__*/_jsxs(\"td\",{\"data-label\":t('銷售額'),children:[\"$\",stats.total_amount.toFixed(3)]}),/*#__PURE__*/_jsx(\"td\",{\"data-label\":t('總數量'),children:stats.count})]}),selectedBuyer===buyerId&&getComicsForBuyer(buyerId).map(_ref22=>{let[comicTitle,comicStats]=_ref22;return/*#__PURE__*/_jsxs(\"tr\",{className:\"sub-table-row\",children:[/*#__PURE__*/_jsx(\"td\",{children:comicTitle}),/*#__PURE__*/_jsxs(\"td\",{children:[\"$\",comicStats.total_amount.toFixed(3)]}),/*#__PURE__*/_jsx(\"td\",{children:comicStats.count})]},comicTitle);})]},buyerId);})})]})]})]})}),/*#__PURE__*/_jsx(Tab,{className:\"second-tab\",eventKey:\"comicRank\",title:t('排行榜'),children:/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"h2\",{children:[t('選擇日期區間'),\"\\uFF1A\",t(rankPeriod)]}),/*#__PURE__*/_jsx(\"div\",{className:\"scrollable-container\",children:/*#__PURE__*/_jsx(\"div\",{className:\"scrollable-buttons\",children:Object.keys(periods).map(period=>/*#__PURE__*/_jsx(Button,{className:\"mb-2 btn\",onClick:()=>clickRankPeriod(period),children:t(period)},period))})}),/*#__PURE__*/_jsxs(Row,{gutter:16,children:[/*#__PURE__*/_jsx(Col,{span:12,children:/*#__PURE__*/_jsx(\"div\",{style:{marginBottom:16},children:/*#__PURE__*/_jsx(DatePicker,{onChange:value=>setDates([value,dates?dates[1]:null]),format:\"YYYY/MM/DD\",style:{width:'100%'},placeholder:t('開始日期')})})}),/*#__PURE__*/_jsx(Col,{span:12,children:/*#__PURE__*/_jsx(\"div\",{style:{marginBottom:16},children:/*#__PURE__*/_jsx(DatePicker,{onChange:value=>setDates([dates?dates[0]:null,value]),format:\"YYYY/MM/DD\",style:{width:'100%'},placeholder:t('結束日期')})})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex align-items-center justify-content-between\",children:[/*#__PURE__*/_jsx(Button,{type:\"primary\",onClick:filterDataByRange,disabled:!dates||!dates[0]||!dates[1],children:t('顯示資料')}),/*#__PURE__*/_jsxs(Select,{defaultValue:\"sales\",style:{width:200},onChange:handleSortChange,children:[/*#__PURE__*/_jsx(Select.Option,{value:\"sales\",children:t('銷售額排序')}),/*#__PURE__*/_jsx(Select.Option,{value:\"count\",children:t('購買量排序')})]})]}),/*#__PURE__*/_jsxs(\"div\",{style:{marginTop:16},children:[/*#__PURE__*/_jsx(\"h3\",{children:t('符合條件的資料：')}),Object.keys(rankFilterData).length>0?/*#__PURE__*/_jsx(List,{className:\"rankingList\",bordered:true,dataSource:sortedRank(),renderItem:_ref23=>{let[comic,{totalSales,totalCount,image,category}]=_ref23;return/*#__PURE__*/_jsxs(List.Item,{className:\"d-flex align-items-center ranking-list\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"ranking-image\",children:/*#__PURE__*/_jsx(\"img\",{src:image,alt:comic,className:\"ranking-thumbnail\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"ranking-card-info ms-3\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"ranking-title fw-bold\",children:comic}),/*#__PURE__*/_jsxs(\"div\",{className:\"ranking-title\",children:[t('類型'),\"\\uFF1A\",category]}),/*#__PURE__*/_jsxs(\"div\",{className:\"ranking-title\",children:[t('銷售額'),\"\\uFF1A\",totalSales]}),/*#__PURE__*/_jsxs(\"div\",{className:\"ranking-title\",children:[t('購買量'),\"\\uFF1A\",totalCount]})]})]});}}):/*#__PURE__*/_jsx(\"p\",{children:t('沒有符合條件的資料')})]})]})})]})}),/*#__PURE__*/_jsx(Tab,{eventKey:\"nft\",title:\"NFT\",children:/*#__PURE__*/_jsxs(Tabs,{defaultActiveKey:\"nftSales\",className:\"mb-3 w-100 custom-tabs second-tabs\",children:[/*#__PURE__*/_jsxs(Tab,{className:\"second-tab\",eventKey:\"nftSales\",title:t('銷售額'),children:[/*#__PURE__*/_jsx(\"center\",{children:/*#__PURE__*/_jsxs(\"h2\",{children:[\"NFT \",t(\"銷售額\")]})}),/*#__PURE__*/_jsx(\"hr\",{}),/*#__PURE__*/_jsx(\"div\",{className:\"pie-chart-wrapper\",children:nftData.totRevenueResults.length>0&&nftSalesData&&nftSalesData.total?/*#__PURE__*/_jsxs(\"div\",{className:\"pie-chart-container\",children:[/*#__PURE__*/_jsx(NftPieChart,{chartData:nftSalesData.total,title:\"\\u7E3D\\u6536\\u76CA\"}),/*#__PURE__*/_jsx(\"hr\",{}),Object.keys(nftSalesData.transfer).length>0&&/*#__PURE__*/_jsx(NftPieChart,{chartData:nftSalesData.transfer,title:\"\\u8F49\\u624B\\u6536\\u76CA\"})]}):/*#__PURE__*/_jsx(\"p\",{children:t('目前沒有購買紀錄')})})]}),/*#__PURE__*/_jsx(Tab,{className:\"second-tab revenueDist\",eventKey:\"revenueDist\",title:t('收益分布'),children:/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"center\",{children:/*#__PURE__*/_jsxs(\"h2\",{children:[\"NFT \",t('收益分布')]})}),/*#__PURE__*/_jsx(\"hr\",{}),/*#__PURE__*/_jsx(\"div\",{style:{display:'flex',flexDirection:'column',alignItems:'center'},className:\"sales-chart\",children:chartData&&chartData.data&&chartData.options&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Bar,{data:chartData.data,options:{...chartData.options,onClick:e=>handleBarClick(e)},className:\"mb-5\"}),pieChartData&&pieChartData.data&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Pie,{data:pieChartData.data,options:NFTpieOptions}),/*#__PURE__*/_jsxs(\"h3\",{children:[selectedComicTitle.title,\" \",selectedComicTitle.state]}),/*#__PURE__*/_jsx(\"h3\",{children:t('前 5 名')}),pieChartData.top5&&pieChartData.top5.map((item,index)=>/*#__PURE__*/_jsx(\"p\",{children:item},index))]})]})})]})})]})})]})]}),loading&&/*#__PURE__*/_jsx(\"div\",{className:\"loading-container\",children:/*#__PURE__*/_jsx(\"div\",{children:t('頁面加載中')})})]});};export default DataAnalysis;","map":{"version":3,"names":["React","useState","useEffect","useMemo","Line","Pie","Bar","Chart","ChartJS","CategoryScale","LinearScale","PointElement","LineElement","Title","Tooltip","Legend","Container","Form","Tabs","Tab","Table","DatePicker","Button","List","Card","message","Select","Row","Col","dayjs","useTranslation","i18n","axios","formatDate","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","register","website","process","env","REACT_APP_Website","API_KEY","REACT_APP_API_KEY","initAllComicData","comicOrigin","reduce","acc","_ref","purchase_date","price","comicTitle","date","Date","year","getFullYear","month","String","getMonth","padStart","day","getDate","quarter","concat","Math","ceil","income","parseFloat","toFixed","updateData","type","key","sales","count","title","titleEntry","find","t","push","quarterKey","monthKey","dayKey","computeSalesData","salesArray","timePeriod","periodData","dataArray","Object","values","allDates","keys","earliestDate","min","map","parseDate","latestDate","max","dateRange","generateDateRangeAll","titleMap","salesMap","countMap","forEach","item","labels","salesData","countData","datasets","label","data","fill","borderColor","backgroundColor","pointStyle","pointRadius","pieData","startDate","endDate","step","dates","currentDate","toISOString","split","floor","toString","setMonth","setDate","setFullYear","transformPieData","period","dataForYear","initFilterComicData","processedData","_ref2","category","filename","computeComicData","comics","selectedComic","selectedPeriod","comicData","aggregatedData","_ref3","allMonths","getDateRange","generateDateRange","borderWidth","dateToNum","getTime","months","arguments","length","undefined","Set","monthsSet","add","slice","Array","from","dateStr","parseInt","parseCustomerDate","calculateSales","summary","_ref4","buyer","purchaseDate","total_amount","buyerData","calculateTotalSummary","totals","_ref5","firstSale","initNFTData","initNFT","lastKey","secondLastKey","lastValue","total","transferRevenue","forSale","value","royalty","nftTitle","tokenTitle","totRevenue","revenueSummary","totRev","transRev","updateSummary","rev","totalRevenue","nftTitles","formatSummary","totRevenueResults","transferRevenueResults","nftPieTot","dataset","revenue","flatMap","nft","top5","sort","a","b","datasetDetails","options","plugins","tooltip","callbacks","context","dataIndex","legend","position","nftChartData","isArray","console","error","comicTitles","totalRevenueData","comic","resaleRevenueData","responsive","scales","x","display","text","test_data_1","test_data_2","DataAnalysis","dataByPeriod","setDataByPeriod","setSalesData","setTimePeriod","setComics","setPieData","pieTop5","setPieTop5","setSelectedComic","lineData","setLineData","detailData","setDetailData","lowestDetailData","setLowestDetailData","comicPeriod","setComicPeriod","x_title","setX_title","setBuyer","buyerPeriod","setBuyerPeriod","selectedBuyer","setSelectedBuyer","cimicRank","setCimicRank","setDates","rankFilterData","setRankFilterData","rankSort","setRankSort","rankPeriodData","setRankPeriodData","rankPeriod","setRankPeriod","nftData","setNftData","nftSalesData","setNftSalesData","chartData","setChartData","pieChartData","setPieChartData","selectedComicTitle","setSelectedComicTitle","loading","setLoading","currentAccount","localStorage","getItem","headers","initData","response","get","params","info","initBuyerData","filtered","warning","handleChartClick","event","currentPeriod","chart","points","getElementsAtEventForMode","intersect","firstPoint","index","generateFilteredData","dataCalculator","labelGenerator","allLabels","l","indexOf","filteredMonthData","_","i","x_year","prev","filteredDayData","x_month","handlePieChartClick","timePeriods","timePeriodKey","timePeriodData","y","pieOptions","color","font","size","tooltipItem","raw","titleColor","bodyColor","maintainAspectRatio","filterOptions","renderLineChart","onClick","e","renderPieChart","renderChart","handlePeriodChange","target","handleComicChange","today","periods","start","end","entries","getSummary","buyerCount","_ref6","currentPeriodData","sortedBuyers","_ref7","_ref8","totalStats","_ref9","getComicsForBuyer","buyerId","_ref10","id","initRankingData","totalSales","totalCount","image","_ref11","saleDate","_ref12","clickRankPeriod","filterDataByRange","startOf","toDate","endOf","days","filteredDays","filter","itemDate","_ref13","log","handleSortChange","sortedRank","_ref14","_ref15","_ref16","_ref17","transfer","NftPieChart","_ref18","className","children","style","marginTop","maxWidth","maxHeight","marginBottom","marginLeft","nftSalesTop5","_ref19","handleBarClick","datasetLabel","datasetIndex","isTotRevenue","dataSource","state","NFTpieOptions","_ref20","_nftData$totRevenueRe","_nftData$totRevenueRe2","isMobileView","setIsMobileView","window","innerWidth","handleResize","addEventListener","removeEventListener","formatBuyerId","defaultActiveKey","eventKey","onChange","striped","hover","defaultValue","width","Option","_ref21","stats","_ref22","comicStats","gutter","span","format","placeholder","disabled","bordered","renderItem","_ref23","Item","src","alt","flexDirection","alignItems"],"sources":["C:/Users/user1/Desktop/blockchain-comics-platform/frontend/src/routes/dataAnalysis.js"],"sourcesContent":["import React, { useState, useEffect, useMemo } from 'react';\r\nimport { Line, Pie, Bar } from 'react-chartjs-2';\r\nimport Chart from 'chart.js/auto';\r\nimport { Chart as ChartJS, CategoryScale, LinearScale, PointElement, LineElement, Title, Tooltip, Legend } from 'chart.js';\r\nimport { Container, Form, Tabs, Tab, Table } from 'react-bootstrap';\r\nimport { DatePicker, Button, List, Card, message, Select, Row, Col } from 'antd';\r\nimport dayjs from 'dayjs';\r\nimport './bootstrap.min.css';\r\nimport { useTranslation } from 'react-i18next';\r\nimport i18n from '../i18n';\r\nimport axios from 'axios';\r\nimport { formatDate } from '../index.js';\r\nChartJS.register( CategoryScale, LinearScale, PointElement, LineElement, Title, Tooltip, Legend );\r\nconst website = process.env.REACT_APP_Website;\r\nconst API_KEY = process.env.REACT_APP_API_KEY;\r\n\r\n// 漫畫－銷售額\r\nconst initAllComicData = (comicOrigin) => {\r\n  return comicOrigin.reduce((acc, { purchase_date, price, comicTitle }) => {\r\n    const date = new Date(purchase_date);\r\n    const year = date.getFullYear();\r\n    const month = String(date.getMonth() + 1).padStart(2, '0');\r\n    const day = String(date.getDate()).padStart(2, '0');\r\n    const quarter = `Q${Math.ceil((date.getMonth() + 1) / 3)}`;\r\n    \r\n    const income = (parseFloat(price) * 0.9).toFixed(3);\r\n    const updateData = (type, key) => {\r\n      if (!acc[type][key]) {\r\n        acc[type][key] = { date: key, sales: 0, count: 0, title: [] };\r\n      }\r\n      const titleEntry = acc[type][key].title.find(t => t.title === comicTitle);\r\n      if (titleEntry) {\r\n        titleEntry.sales = (parseFloat(titleEntry.sales) + parseFloat(income)).toFixed(3);\r\n      } else {\r\n        acc[type][key].title.push({ title: comicTitle, sales: income });\r\n      }\r\n      acc[type][key].sales = (parseFloat(acc[type][key].sales) + parseFloat(income)).toFixed(3);\r\n      acc[type][key].count += 1;\r\n    };\r\n    updateData('year', `${year}`);\r\n    const quarterKey = `${year}-${quarter}`;\r\n    updateData('quarter', quarterKey);\r\n    const monthKey = `${year}-${month}`;\r\n    updateData('month', monthKey);\r\n    const dayKey = `${year}-${month}-${day}`;\r\n    updateData('day', dayKey);\r\n    return acc;\r\n  }, { year: {}, quarter: {}, month: {}, day: {} });\r\n};\r\n\r\nconst computeSalesData = (salesArray, timePeriod, t) => {\r\n  if (!salesArray || !salesArray[timePeriod]) {\r\n    return null;\r\n  }\r\n  const periodData = salesArray[timePeriod] || {};\r\n  const dataArray = Object.values(periodData);\r\n  // Determine the date range\r\n  const allDates = Object.keys(periodData);\r\n  const earliestDate = new Date(Math.min(...allDates.map(date => parseDate(date, timePeriod))));\r\n  const latestDate = new Date(Math.max(...allDates.map(date => parseDate(date, timePeriod))));\r\n  const dateRange = generateDateRangeAll(earliestDate, latestDate, timePeriod);\r\n  // Create a map of dates to sales data\r\n  const titleMap = {};\r\n  const salesMap = {};\r\n  const countMap = {};\r\n  dataArray.forEach(item => {\r\n    salesMap[item.date] = parseFloat(item.sales);\r\n    countMap[item.date] = item.count || 0;\r\n    if (!titleMap[item.date]) {\r\n      titleMap[item.date] = {};\r\n    }\r\n    item.title.forEach(t => {\r\n      const title = t.title;\r\n      const sales = parseFloat(t.sales);\r\n      if (!titleMap[item.date][title]) {\r\n        titleMap[item.date][title] = 0;\r\n      }\r\n      titleMap[item.date][title] += sales;\r\n    });\r\n  });\r\n  // Fill in missing dates with zero sales\r\n  const labels = dateRange;\r\n  const salesData = dateRange.map(date => salesMap[date] || 0);\r\n  const countData = dateRange.map(date => countMap[date] || 0);\r\n\r\n  // Chart.js 数据配置\r\n  return {\r\n    labels,\r\n    datasets: [\r\n      {\r\n        label: t('漫畫銷售額'),\r\n        data: salesData,\r\n        fill: false,\r\n        borderColor: '#1890ff',\r\n        backgroundColor: '#1890ff',\r\n        pointStyle: 'diamond',\r\n        pointRadius: 5,\r\n        countData: countData,\r\n        pieData: titleMap\r\n      },\r\n    ],\r\n  };\r\n};\r\n\r\nconst generateDateRangeAll = (startDate, endDate, step) => {\r\n  const dates = [];\r\n  let currentDate = new Date(startDate);\r\n  const formatDate = (date, step) => {\r\n    const year = date.getFullYear();\r\n    if (step === 'month') {\r\n      return `${year}-${String(date.getMonth() + 1).padStart(2, '0')}`; // YYYY-MM\r\n    } else if (step === 'day') {\r\n      return date.toISOString().split('T')[0]; // YYYY-MM-DD\r\n    } else if (step === 'quarter') {\r\n      const quarter = Math.floor(date.getMonth() / 3) + 1; // Determine the quarter (1-4)\r\n      return `${year}-Q${quarter}`; // YYYY-Q1, YYYY-Q2, etc.\r\n    } else if (step === 'year') {\r\n      return year.toString(); // YYYY\r\n    }\r\n    return ''; // Default case\r\n  };\r\n  while (currentDate <= endDate) {\r\n    dates.push(formatDate(currentDate, step));\r\n    // Move to the next date based on the step\r\n    if (step === 'month') {\r\n      currentDate.setMonth(currentDate.getMonth() + 1);\r\n    } else if (step === 'day') {\r\n      currentDate.setDate(currentDate.getDate() + 1);\r\n    } else if (step === 'year') {\r\n      currentDate.setFullYear(currentDate.getFullYear() + 1);\r\n    } else if (step === 'quarter') {\r\n      currentDate.setMonth(currentDate.getMonth() + 3);\r\n    }\r\n  }\r\n  return dates;\r\n};\r\n\r\nconst transformPieData = (pieData, period) => {\r\n  const dataForYear = pieData[period] || {};\r\n  const labels = Object.keys(dataForYear);\r\n  const data = Object.values(dataForYear);\r\n  return {\r\n    labels,\r\n    datasets: [\r\n      {\r\n        data,\r\n        backgroundColor: ['#8470FF', '#7FFFD4', '#FFD700', '#CDC5BF', '#F0FFFF'], // Customize colors as needed\r\n      },\r\n    ],\r\n  };\r\n};\r\n\r\nconst initFilterComicData = (comicOrigin) => {\r\n  const processedData = comicOrigin.reduce((acc, { purchase_date, price, comicTitle, category, filename }) => {\r\n    const date = new Date(purchase_date);\r\n    const year = date.getFullYear();\r\n    const month = String(date.getMonth() + 1).padStart(2, '0');\r\n    const day = String(date.getDate()).padStart(2, '0');\r\n    const income = (parseFloat(price) * 0.9);\r\n    if (!acc[comicTitle]) {\r\n      acc[comicTitle] = { year: {}, quarter: {}, month: {}, day: {}, category: category, filename: filename };\r\n    }\r\n    const updateData = (type, key) => {\r\n      if (!acc[comicTitle][type][key]) {\r\n        acc[comicTitle][type][key] = { date: key, sales: 0, count: 0 };\r\n      }\r\n      acc[comicTitle][type][key].sales += income;\r\n      acc[comicTitle][type][key].count += 1; // Increment count for each entry\r\n    };\r\n    updateData('year', `${year}`);\r\n    updateData('quarter', `${year}-${month}`);\r\n    updateData('month', `${year}-${month}`);\r\n    updateData('day', `${year}-${month}-${day}`);\r\n    return acc;\r\n  }, {});\r\n  return processedData;\r\n};\r\n\r\nconst computeComicData = (comics, selectedComic, selectedPeriod, t) => {\r\n  if (!comics[selectedComic] || !comics[selectedComic][selectedPeriod]) return null;\r\n  const comicData = comics[selectedComic][selectedPeriod];\r\n  const aggregatedData = Object.values(comicData).reduce((acc, { date, sales, count }) => {\r\n    if (!acc[date]) {\r\n      acc[date] = { sales: 0, count: 0 };\r\n    }\r\n    acc[date].sales += parseFloat(sales);\r\n    acc[date].count += count;\r\n    return acc;\r\n  }, {});\r\n  const step = selectedPeriod === 'month' ? 'month' : selectedPeriod === 'day' ? 'day' : 'year';\r\n  const { startDate, endDate, allMonths } = getDateRange(aggregatedData, step);\r\n  const dateRange = generateDateRange(startDate, endDate, step, allMonths);\r\n  dateRange.forEach(date => {\r\n    if (!aggregatedData[date]) {\r\n      aggregatedData[date] = { sales: 0, count: 0 };\r\n    }\r\n  });\r\n  return {\r\n    labels: dateRange,\r\n    datasets: [{\r\n      label: `${selectedComic} - ${t('漫畫銷售額')}`,\r\n      data: dateRange.map(date => aggregatedData[date].sales.toFixed(3)),\r\n      backgroundColor: '#ff5733',\r\n      borderColor: '#ff5733',\r\n      borderWidth: 1,\r\n      countData: dateRange.map(date => aggregatedData[date].count)\r\n    }],\r\n  };\r\n};\r\n\r\nconst getDateRange = (data, step) => {\r\n  const allDates = Object.keys(data);\r\n  const dateToNum = (date) => {\r\n    if (step === 'month') return new Date(date + '-01').getTime(); // YYYY-MM-01\r\n    if (step === 'day') return new Date(date).getTime(); // YYYY-MM-DD\r\n    return new Date(date).getTime(); // YYYY\r\n  };\r\n  const earliestDate = new Date(Math.min(...allDates.map(date => dateToNum(date))));\r\n  const latestDate = new Date(Math.max(...allDates.map(date => dateToNum(date))));\r\n  if (step === 'month') {\r\n    const months = [];\r\n    for (let year = earliestDate.getFullYear(); year <= latestDate.getFullYear(); year++) {\r\n      for (let month = 1; month <= 12; month++) {\r\n        months.push(`${year}-${String(month).padStart(2, '0')}`);\r\n      }\r\n    }\r\n    return { startDate: earliestDate, endDate: latestDate, allMonths: months };\r\n  }\r\n  return { startDate: earliestDate, endDate: latestDate };\r\n};\r\n\r\nconst generateDateRange = (startDate, endDate, step, allMonths = []) => {\r\n  const dates = new Set();\r\n  let currentDate = new Date(startDate);\r\n  if (step === 'month') {\r\n    const monthsSet = new Set(allMonths);\r\n    while (currentDate <= endDate) {\r\n      dates.add(currentDate.toISOString().slice(0, 7)); // YYYY-MM\r\n      currentDate.setMonth(currentDate.getMonth() + 1);\r\n    }\r\n    return Array.from(monthsSet);\r\n  }\r\n  if (step === 'day') {\r\n    while (currentDate <= endDate) {\r\n      dates.add(currentDate.toISOString().split('T')[0]); // YYYY-MM-DD\r\n      currentDate.setDate(currentDate.getDate() + 1); // Increment by 1 day\r\n    }\r\n  } else if (step === 'year') {\r\n    while (currentDate <= endDate) {\r\n      dates.add(currentDate.getFullYear().toString()); // YYYY\r\n      currentDate.setFullYear(currentDate.getFullYear() + 1);\r\n    }\r\n  }\r\n  return Array.from(dates);\r\n};\r\n\r\n// 日期解析函数\r\nconst parseDate = (dateStr, timePeriod) => {\r\n  let date;\r\n  switch (timePeriod) {\r\n    case 'day':\r\n      date = new Date(dateStr);\r\n      break;\r\n    case 'month':\r\n      date = new Date(dateStr + '-01'); // 假设为该月的第一天\r\n      break;\r\n    case 'quarter':\r\n      const [year, quarter] = dateStr.split('-Q');\r\n      const month = (parseInt(quarter, 10) - 1) * 3 + 1; // 计算季度开始的月份\r\n      date = new Date(`${year}-${month.toString().padStart(2, '0')}-01`);\r\n      break;\r\n    case 'year':\r\n      date = new Date(dateStr + '-01-01'); // 假设为该年的第一天\r\n      break;\r\n    default:\r\n      date = new Date(); // 默认当前日期\r\n  }\r\n  return date.getTime(); // 返回时间戳\r\n};\r\n\r\n\r\n\r\n\r\n// 漫畫－客戶群\r\nconst parseCustomerDate = (dateStr) => new Date(dateStr);\r\n\r\nconst calculateSales = (data, startDate, endDate) => {\r\n  return data.reduce((summary, { buyer, price, purchase_date, comicTitle }) => {\r\n    const purchaseDate = new Date(purchase_date);\r\n    if (startDate <= purchaseDate && purchaseDate <= endDate) {\r\n      if (!summary[buyer]) {\r\n        summary[buyer] = { total_amount: 0, count: 0, comics: {} };\r\n      }\r\n      const buyerData = summary[buyer];\r\n      // 更新總額和數量\r\n      buyerData.total_amount += parseFloat(price) * 0.9;\r\n      buyerData.count += 1;\r\n      // 初始化漫畫統計數據\r\n      if (!buyerData.comics[comicTitle]) {\r\n        buyerData.comics[comicTitle] = { total_amount: 0, count: 0 };\r\n      }\r\n      // 更新個別漫畫的統計數據\r\n      buyerData.comics[comicTitle].total_amount += parseFloat(price) * 0.9;\r\n      buyerData.comics[comicTitle].count += 1;\r\n    }\r\n    return summary;\r\n  }, {});\r\n};\r\n\r\nconst calculateTotalSummary = (salesData) => {\r\n  return Object.values(salesData).reduce((totals, periodData) => {\r\n    Object.values(periodData).forEach(({ total_amount, count }) => {\r\n      totals.total_amount += total_amount;\r\n      totals.count += count;\r\n    });\r\n    return totals;\r\n  }, { total_amount: 0, count: 0 });\r\n};\r\n\r\n\r\n\r\n\r\n// NFT－收益分布\r\nconst firstSale = 0.98;\r\nconst initNFTData = (comicOrigin) => {\r\n  let initNFT = [];\r\n  // 计算每个 NFT 的总收益和转手收益\r\n  comicOrigin.forEach(item => {\r\n      const keys = Object.keys(item.price);\r\n      const lastKey = keys[keys.length - 1];\r\n      const secondLastKey = keys[keys.length - 2] || null;\r\n      const lastValue = parseFloat(item.price[lastKey]);\r\n      let total = 0;\r\n      let transferRevenue = 0;\r\n      if (item.forSale === 0) {  // 已售\r\n          total += parseFloat(item.price[keys[0]]) * firstSale;\r\n          if (lastKey !== '1') {\r\n              for (const key of keys) {\r\n                  if (key !== keys[0]) { // 跳过第一个键\r\n                      const value = parseFloat(item.price[key]);\r\n                      total += value * (item.royalty / 100);\r\n                      transferRevenue += value * (item.royalty / 100);\r\n                  }\r\n              }\r\n          }\r\n      } else if (item.forSale === 1) {  // 未售\r\n          if (secondLastKey) {  // 存在第二个价格\r\n              total += parseFloat(item.price[keys[0]]) * firstSale;\r\n              for (const key of keys.slice(1, -1)) { // 从第二笔到倒数第二笔\r\n                  const value = parseFloat(item.price[key]);\r\n                  total += value * (item.royalty / 100);\r\n                  transferRevenue += value * (item.royalty / 100);\r\n              }\r\n          }\r\n      }\r\n      initNFT.push({\r\n          comicTitle: item.title,\r\n          nftTitle: item.tokenTitle,\r\n          totRevenue: total.toFixed(3),\r\n          transferRevenue: transferRevenue.toFixed(3)\r\n      });\r\n  });\r\n  // 初始化汇总对象\r\n  const revenueSummary = {\r\n      totRevenue: {},\r\n      transferRevenue: {}\r\n  };\r\n  // 汇总总收益和转手收益\r\n  initNFT.forEach(item => {\r\n      const { comicTitle, nftTitle, totRevenue, transferRevenue } = item;\r\n      const totRev = parseFloat(totRevenue);\r\n      const transRev = parseFloat(transferRevenue);\r\n      const updateSummary = (summary, value, rev) => {\r\n          if (!summary[comicTitle]) {\r\n              summary[comicTitle] = { totalRevenue: 0, count: 0, nftTitles: {} };\r\n          }\r\n          summary[comicTitle].totalRevenue += value;\r\n          summary[comicTitle].count += 1;\r\n          if (!summary[comicTitle].nftTitles[nftTitle]) {\r\n              summary[comicTitle].nftTitles[nftTitle] = { totalRevenue: 0, count: 0 };\r\n          }\r\n          summary[comicTitle].nftTitles[nftTitle].totalRevenue += rev;\r\n          summary[comicTitle].nftTitles[nftTitle].count += 1;\r\n      };\r\n      if (totRev !== 0) updateSummary(revenueSummary.totRevenue, totRev, totRev);\r\n      if (transRev !== 0) updateSummary(revenueSummary.transferRevenue, transRev, transRev);\r\n  });\r\n  // 将汇总结果转换为数组\r\n  const formatSummary = (summary) => Object.keys(summary).map(comicTitle => ({\r\n      comicTitle,\r\n      totalRevenue: summary[comicTitle].totalRevenue.toFixed(3),\r\n      count: summary[comicTitle].count,\r\n      nftTitles: Object.keys(summary[comicTitle].nftTitles).map(nftTitle => ({\r\n          nftTitle,\r\n          totalRevenue: summary[comicTitle].nftTitles[nftTitle].totalRevenue.toFixed(3),\r\n          count: summary[comicTitle].nftTitles[nftTitle].count\r\n      }))\r\n  }));\r\n  return {\r\n      totRevenueResults: formatSummary(revenueSummary.totRevenue),\r\n      transferRevenueResults: formatSummary(revenueSummary.transferRevenue)\r\n  };\r\n};\r\n\r\nconst nftPieTot = (data, title, t) => {\r\n  let dataset;\r\n  if (title === '總收益') {\r\n    dataset = data.map(item => ({\r\n      title: item.comicTitle,\r\n      revenue: parseFloat(item.totalRevenue),\r\n      count: item.count,\r\n    }));\r\n  } else if (title === '轉手收益') {\r\n    dataset = data.flatMap(item => item.nftTitles.map(nft => ({\r\n      title: `${item.comicTitle} - ${nft.nftTitle}`,\r\n      revenue: parseFloat(nft.totalRevenue),\r\n      count: nft.count,\r\n    })));\r\n  }\r\n  const top5 = [...dataset].sort((a, b) => b.revenue - a.revenue).slice(0, 5);\r\n  return {\r\n    labels: dataset.map(item => item.title),\r\n    datasets: [{\r\n      label: title,\r\n      data: dataset.map(item => item.revenue),\r\n    }],\r\n    datasetDetails: top5,\r\n    options: {\r\n      plugins: {\r\n        tooltip: {\r\n          callbacks: {\r\n            label: (context) => {\r\n              const item = dataset[context.dataIndex];\r\n              return [`${title}：${item.revenue.toFixed(3)} ETH`, `${t('總比數')}：${item.count}`];\r\n            }\r\n          }\r\n        },\r\n        legend: {\r\n          position: 'right',\r\n        }\r\n      }\r\n    }\r\n  };\r\n};\r\n\r\nconst nftChartData = (totRevenueResults, transferRevenueResults, t) => {\r\n  if (!Array.isArray(totRevenueResults) || !Array.isArray(transferRevenueResults)) {\r\n    console.error('Invalid data: totRevenueResults or transferRevenueResults is not an array');\r\n    return { data: null, options: null };\r\n  }\r\n  // 提取所有的 comicTitle\r\n  const comicTitles = [...new Set([\r\n    ...totRevenueResults.map(item => item.comicTitle),\r\n    ...transferRevenueResults.map(item => item.comicTitle)\r\n  ])];\r\n  // 计算总收益和总比数\r\n  const totalRevenueData = comicTitles.map(title => {\r\n    const comic = totRevenueResults.find(item => item.comicTitle === title);\r\n    return comic ? { totalRevenue: parseFloat(comic.totalRevenue), count: comic.count } : { totalRevenue: 0, count: 0 };\r\n  });\r\n  // 计算转手收益和总比数\r\n  const resaleRevenueData = comicTitles.map(title => {\r\n    const comic = transferRevenueResults.find(item => item.comicTitle === title);\r\n    return comic ? { totalRevenue: parseFloat(comic.totalRevenue), count: comic.count } : { totalRevenue: 0, count: 0 };\r\n  });\r\n  const data = {\r\n    labels: comicTitles,\r\n    datasets: [\r\n      {\r\n        label: t('總收益'),\r\n        data: totalRevenueData.map(item => item.totalRevenue),\r\n        backgroundColor: 'rgba(75, 192, 192, 0.2)',\r\n        borderColor: 'rgba(75, 192, 192, 1)',\r\n        borderWidth: 1,\r\n      },\r\n      {\r\n        label: t('轉手收益'),\r\n        data: resaleRevenueData.map(item => item.totalRevenue),\r\n        backgroundColor: 'rgba(153, 102, 255, 0.2)',\r\n        borderColor: 'rgba(153, 102, 255, 1)',\r\n        borderWidth: 1,\r\n      }\r\n    ]\r\n  };\r\n  const options = {\r\n    responsive: true,\r\n    plugins: {\r\n      legend: {\r\n        position: 'top',\r\n      },\r\n      tooltip: {\r\n        callbacks: {\r\n          label: function (context) {\r\n            const label = context.dataset.label;\r\n            const dataIndex = context.dataIndex;\r\n            const data = label === t('總收益') ? totalRevenueData : resaleRevenueData;\r\n            const { totalRevenue, count } = data[dataIndex];\r\n            return [`${t('總收益')}：${totalRevenue.toFixed(3)}`, `${t('總比數')}：${count}`];\r\n          }\r\n        }\r\n      }\r\n    },\r\n    scales: {\r\n      x: {\r\n        title: {\r\n          display: true,\r\n          text: t('漫畫名稱'),\r\n        },\r\n      },\r\n    },\r\n  };\r\n  return { data, options };\r\n};\r\n\r\n\r\n\r\n\r\n// 測試數據 60 筆\r\nconst test_data_1 = [\r\n  {\r\n    \"buyer\": \"0x7e8f9g0h1i2j3k4l5m6n7o8p9q0r1s2t3u4v4w6x\",\r\n    \"category\": \"玄幻\",\r\n    \"chapterTitle\": \"002-1\",\r\n    \"comicTitle\": \"幽靈學院\",\r\n    \"filename\": \"/test/comic1.png\",\r\n    \"price\": \"0.06\",\r\n    \"purchase_date\": \"2023-02-18T11:00:00.000Z\"\r\n  }, {\r\n    \"buyer\": \"0x3a4b5c6d7e8f9g0h1i2j3k4l5m6n7o8p9q0r1s2t\",\r\n    \"category\": \"搞笑\",\r\n    \"chapterTitle\": \"003-1\",\r\n    \"comicTitle\": \"笑爆天\",\r\n    \"filename\": \"/test/comic2.png\",\r\n    \"price\": \"0.17\",\r\n    \"purchase_date\": \"2024-06-10T16:00:00.000Z\"\r\n  }, {\r\n    \"buyer\": \"0x7e8f9g0h1i2j3k4l5m6n7o8p9q0r1s2t3u4v5w6x\",\r\n    \"category\": \"搞笑\",\r\n    \"chapterTitle\": \"004-1\",\r\n    \"comicTitle\": \"笑爆天\",\r\n    \"filename\": \"/test/comic2.png\",\r\n    \"price\": \"0.16\",\r\n    \"purchase_date\": \"2023-08-25T14:35:00.000Z\"\r\n  }, {\r\n    \"buyer\": \"0x7e8f9g0h1i2j3k4l5m6n7o8p9q0r1s2t3u4v5w6x\",\r\n    \"category\": \"武俠\",\r\n    \"chapterTitle\": \"005-1\",\r\n    \"comicTitle\": \"流浪武士\",\r\n    \"filename\": \"/test/comic3.png\",\r\n    \"price\": \"0.07\",\r\n    \"purchase_date\": \"2024-09-01T11:10:00.000Z\"\r\n  }, {\r\n    \"buyer\": \"0x7e8f9g0h1i2j3k4l5m6n7o8p9q0r1s2t3u4v5w6x\",\r\n    \"category\": \"武俠\",\r\n    \"chapterTitle\": \"001-2\",\r\n    \"comicTitle\": \"流浪武士\",\r\n    \"filename\": \"/test/comic3.png\",\r\n    \"price\": \"0.08\",\r\n    \"purchase_date\": \"2024-03-18T12:45:00.000Z\"\r\n  }, {\r\n    \"buyer\": \"0x7d8e9f0g1h2i3j4k5l6m7n8o9p0q1r2s3t4u5v6w\",\r\n    \"category\": \"玄幻\",\r\n    \"chapterTitle\": \"007-2\",\r\n    \"comicTitle\": \"隱秘之城\",\r\n    \"filename\": \"/test/comic4.png\",\r\n    \"price\": \"0.08\",\r\n    \"purchase_date\": \"2023-06-30T13:00:00.000Z\"\r\n  }, {\r\n    \"buyer\": \"0x7e8f9g0h1i2j3k4l5m6n7o8p9q0r1s2t3u4v5w6x\",\r\n    \"category\": \"玄幻\",\r\n    \"chapterTitle\": \"006-2\",\r\n    \"comicTitle\": \"幽靈學院\",\r\n    \"filename\": \"/test/comic1.png\",\r\n    \"price\": \"0.07\",\r\n    \"purchase_date\": \"2023-12-01T12:20:00.000Z\"\r\n  }, {\r\n    \"buyer\": \"0x7e8f9g0h1i2j3k4l5m6n7o8p9q0r1s2t3u4v5w6x\",\r\n    \"category\": \"玄幻\",\r\n    \"chapterTitle\": \"003-1\",\r\n    \"comicTitle\": \"隱秘之城\",\r\n    \"filename\": \"/test/comic4.png\",\r\n    \"price\": \"0.06\",\r\n    \"purchase_date\": \"2024-05-15T14:35:00.000Z\"\r\n  }, {\r\n    \"buyer\": \"0x7e8f9g0h1i2j3k4l5m6n7o8p9q0r1s2t3u4v5w6x\",\r\n    \"category\": \"戀愛\",\r\n    \"chapterTitle\": \"002-2\",\r\n    \"comicTitle\": \"絕世戀人\",\r\n    \"filename\": \"/test/comic5.png\",\r\n    \"price\": \"0.06\",\r\n    \"purchase_date\": \"2023-04-20T11:00:00.000Z\"\r\n  }, {\r\n    \"buyer\": \"0x7e8f9g0h1i2j3k4l5m6n7o8p9q0r1s2t3u4v5w6x\",\r\n    \"category\": \"戀愛\",\r\n    \"chapterTitle\": \"007-1\",\r\n    \"comicTitle\": \"絕世戀人\",\r\n    \"filename\": \"/test/comic5.png\",\r\n    \"price\": \"0.05\",\r\n    \"purchase_date\": \"2023-11-05T10:45:00.000Z\"\r\n  }, {\r\n    \"buyer\": \"0x7e8f9g0h1i2j3k4l5m6n7o8p9q0r1s2t3u4v5w6x\",\r\n    \"category\": \"戀愛\",\r\n    \"chapterTitle\": \"002-1\",\r\n    \"comicTitle\": \"絕世戀人\",\r\n    \"filename\": \"/test/comic5.png\",\r\n    \"price\": \"0.09\",\r\n    \"purchase_date\": \"2024-08-15T14:55:00.000Z\"\r\n  }, {\r\n    \"buyer\": \"0x8a9b0c1d2e3f4g5h6i7j8k9l0m1n2o3p4q5r6s7t\",\r\n    \"category\": \"搞笑\",\r\n    \"chapterTitle\": \"001-1\",\r\n    \"comicTitle\": \"風起雲湧\",\r\n    \"filename\": \"/test/comic6.png\",\r\n    \"price\": \"0.07\",\r\n    \"purchase_date\": \"2024-01-10T14:25:00.000Z\"\r\n  }, {\r\n    \"buyer\": \"0x6b7c8d9e0f1g2h3i4j5k6l7m8n9o0p1q2r3s4t5u\",\r\n    \"category\": \"搞笑\",\r\n    \"chapterTitle\": \"003-2\",\r\n    \"comicTitle\": \"風起雲湧\",\r\n    \"filename\": \"/test/comic6.png\",\r\n    \"price\": \"0.07\",\r\n    \"purchase_date\": \"2023-06-18T15:20:00.000Z\"\r\n  }, {\r\n    \"buyer\": \"0x9e0f1g2h3i4j5k6l7m8n9o0p1q2r3s4t5u6v7w8x\",\r\n    \"category\": \"搞笑\",\r\n    \"chapterTitle\": \"005-1\",\r\n    \"comicTitle\": \"風起雲湧\",\r\n    \"filename\": \"/test/comic6.png\",\r\n    \"price\": \"0.18\",\r\n    \"purchase_date\": \"2024-07-20T12:30:00.000Z\"\r\n  }, {\r\n    \"buyer\": \"0x9e0f1g2h3i4j5k6l7m8n9o0p1q2r3s4t5u6v7w8x\",\r\n    \"category\": \"搞笑\",\r\n    \"chapterTitle\": \"004-2\",\r\n    \"comicTitle\": \"風起雲湧\",\r\n    \"filename\": \"/test/comic6.png\",\r\n    \"price\": \"0.14\",\r\n    \"purchase_date\": \"2024-08-05T13:50:00.000Z\"\r\n  }, {\r\n    \"buyer\": \"0x6b7c8d9e0f1g2h3i4j5k6l7m8n9o0p1q2r3s4t5u\",\r\n    \"category\": \"冒險\",\r\n    \"chapterTitle\": \"004-2\",\r\n    \"comicTitle\": \"異界遊俠\",\r\n    \"filename\": \"/test/comic7.png\",\r\n    \"price\": \"0.07\",\r\n    \"purchase_date\": \"2023-11-15T12:00:00.000Z\"\r\n  }, {\r\n    \"buyer\": \"0x7d8e9f0g1h2i3j4k5l6m7n8o9p0q1r2s3t4u5v6w\",\r\n    \"category\": \"冒險\",\r\n    \"chapterTitle\": \"006-1\",\r\n    \"comicTitle\": \"異界遊俠\",\r\n    \"filename\": \"/test/comic7.png\",\r\n    \"price\": \"0.06\",\r\n    \"purchase_date\": \"2023-10-10T10:15:00.000Z\"\r\n  }, {\r\n    \"buyer\": \"0x1d2e3f4g5h6i7j8k9l0m1n2o3p4q5r6s7t8u9v0w\",\r\n    \"category\": \"冒險\",\r\n    \"chapterTitle\": \"002-2\",\r\n    \"comicTitle\": \"異界遊俠\",\r\n    \"filename\": \"/test/comic7.png\",\r\n    \"price\": \"0.08\",\r\n    \"purchase_date\": \"2024-07-01T13:00:00.000Z\"\r\n  }, {\r\n    \"buyer\": \"0x4c5d6e7f8g9h0i1j2k3l4m5n6o7p8q9r0s1t2u3v\",\r\n    \"category\": \"戀愛\",\r\n    \"chapterTitle\": \"002-1\",\r\n    \"comicTitle\": \"絕世戀人\",\r\n    \"filename\": \"/test/comic5.png\",\r\n    \"price\": \"0.05\",\r\n    \"purchase_date\": \"2024-03-15T14:25:00.000Z\"\r\n  }, {\r\n    \"buyer\": \"0x7e8f9g0h1i2j3k4l5m6n7o8p9q0r1s2t3u4v5w6x\",\r\n    \"category\": \"武俠\",\r\n    \"chapterTitle\": \"006-2\",\r\n    \"comicTitle\": \"流浪武士\",\r\n    \"filename\": \"/test/comic3.png\",\r\n    \"price\": \"0.08\",\r\n    \"purchase_date\": \"2023-09-25T16:20:00.000Z\"\r\n  }, {\r\n    \"buyer\": \"0x8a9b0c1d2e3f4g5h6i7j8k9l0m1n2o3p4q5r6s7t\",\r\n    \"category\": \"搞笑\",\r\n    \"chapterTitle\": \"003-1\",\r\n    \"comicTitle\": \"風起雲湧\",\r\n    \"filename\": \"/test/comic6.png\",\r\n    \"price\": \"0.07\",\r\n    \"purchase_date\": \"2023-06-12T10:45:00.000Z\"\r\n  }, {\r\n    \"buyer\": \"0x6b7c8d9e0f1g2h3i4j5k6l7m8n9o0p1q2r3s4t5u\",\r\n    \"category\": \"搞笑\",\r\n    \"chapterTitle\": \"003-2\",\r\n    \"comicTitle\": \"風起雲湧\",\r\n    \"filename\": \"/test/comic6.png\",\r\n    \"price\": \"0.09\",\r\n    \"purchase_date\": \"2023-05-05T12:00:00.000Z\"\r\n  }, {\r\n    \"buyer\": \"0x9e0f1g2h3i4j5k6l7m8n9o0p1q2r3s4t5u6v7w8x\",\r\n    \"category\": \"古風\",\r\n    \"chapterTitle\": \"001-1\",\r\n    \"comicTitle\": \"天啟之門\",\r\n    \"filename\": \"/test/comic8.png\",\r\n    \"price\": \"0.16\",\r\n    \"purchase_date\": \"2024-01-20T14:15:00.000Z\"\r\n  }, {\r\n    \"buyer\": \"0x3a4b5c6d7e8f9g0h1i2j3k4l5m6n7o8p9q0r1s2t\",\r\n    \"category\": \"古風\",\r\n    \"chapterTitle\": \"005-1\",\r\n    \"comicTitle\": \"天啟之門\",\r\n    \"filename\": \"/test/comic8.png\",\r\n    \"price\": \"0.08\",\r\n    \"purchase_date\": \"2024-07-30T15:30:00.000Z\"\r\n  }, {\r\n    \"buyer\": \"0x6b7c8d9e0f1g2h3i4j5k6l7m8n9o0p1q2r3s4t5u\",\r\n    \"category\": \"古風\",\r\n    \"chapterTitle\": \"008-1\",\r\n    \"comicTitle\": \"天啟之門\",\r\n    \"filename\": \"/test/comic8.png\",\r\n    \"price\": \"0.09\",\r\n    \"purchase_date\": \"2023-05-10T14:55:00.000Z\"\r\n  }, {\r\n    \"buyer\": \"0x9e0f1g2h3i4j5k6l7m8n9o0p1q2r3s4t5u6v7w8x\",\r\n    \"category\": \"搞笑\",\r\n    \"chapterTitle\": \"002-2\",\r\n    \"comicTitle\": \"笑爆天\",\r\n    \"filename\": \"/test/comic2.png\",\r\n    \"price\": \"0.06\",\r\n    \"purchase_date\": \"2024-04-25T13:10:00.000Z\"\r\n  }, {\r\n    \"buyer\": \"0x6b7c8d9e0f1g2h3i4j5k6l7m8n9o0p1q2r3s4t5u\",\r\n    \"category\": \"玄幻\",\r\n    \"chapterTitle\": \"003-2\",\r\n    \"comicTitle\": \"隱秘之城\",\r\n    \"filename\": \"/test/comic4.png\",\r\n    \"price\": \"0.07\",\r\n    \"purchase_date\": \"2023-08-30T15:45:00.000Z\"\r\n  }, {\r\n    \"buyer\": \"0x7f8g9h0i1j2k3l4m5n6o7p8q9r0s1t2u3v4w5x6y\",\r\n    \"category\": \"搞笑\",\r\n    \"chapterTitle\": \"001-1\",\r\n    \"comicTitle\": \"笑爆天\",\r\n    \"filename\": \"/test/comic2.png\",\r\n    \"price\": \"0.05\",\r\n    \"purchase_date\": \"2024-02-20T16:00:00.000Z\"\r\n  }, {\r\n    \"buyer\": \"0x1c2d3e4f5g6h7i8j9k0l1m2n3o4p5q6r7s8t9u0v\",\r\n    \"category\": \"古風\",\r\n    \"chapterTitle\": \"006-2\",\r\n    \"comicTitle\": \"天啟之門\",\r\n    \"filename\": \"/test/comic8.png\",\r\n    \"price\": \"0.08\",\r\n    \"purchase_date\": \"2023-12-05T16:20:00.000Z\"\r\n  }, {\r\n    \"buyer\": \"0x6b7c8d9e0f1g2h3i4j5k6l7m8n9o0p1q2r3s4t5u\",\r\n    \"category\": \"玄幻\",\r\n    \"chapterTitle\": \"008-2\",\r\n    \"comicTitle\": \"隱秘之城\",\r\n    \"filename\": \"/test/comic4.png\",\r\n    \"price\": \"0.09\",\r\n    \"purchase_date\": \"2023-11-10T13:30:00.000Z\"\r\n  }, {\r\n    \"buyer\": \"0x8f9g0h1i2j3k4l5m6n7o8p9q0r1s2t3u4v5w6x7y\",\r\n    \"category\": \"古風\",\r\n    \"chapterTitle\": \"002-2\",\r\n    \"comicTitle\": \"天啟之門\",\r\n    \"filename\": \"/test/comic8.png\",\r\n    \"price\": \"0.06\",\r\n    \"purchase_date\": \"2023-05-22T14:15:00.000Z\"\r\n  }, {\r\n    \"buyer\": \"0x9b0c1d2e3f4g5h6i7j8k9l0m1n2o3p4q5r6s7t8u\",\r\n    \"category\": \"古風\",\r\n    \"chapterTitle\": \"007-1\",\r\n    \"comicTitle\": \"天啟之門\",\r\n    \"filename\": \"/test/comic8.png\",\r\n    \"price\": \"0.09\",\r\n    \"purchase_date\": \"2024-09-06T16:00:00.000Z\"\r\n  }, {\r\n    \"buyer\": \"0x6b7c8d9e0f1g2h3i4j5k6l7m8n9o0p1q2r3s4t5u\",\r\n    \"category\": \"古風\",\r\n    \"chapterTitle\": \"003-2\",\r\n    \"comicTitle\": \"天啟之門\",\r\n    \"filename\": \"/test/comic8.png\",\r\n    \"price\": \"0.06\",\r\n    \"purchase_date\": \"2024-03-28T15:15:00.000Z\"\r\n  }, {\r\n    \"buyer\": \"0x9e0f1g2h3i4j5k6l7m8n9o0p1q2r3s4t5u6v7w8x\",\r\n    \"category\": \"戀愛\",\r\n    \"chapterTitle\": \"004-2\",\r\n    \"comicTitle\": \"絕世戀人\",\r\n    \"filename\": \"/test/comic5.png\",\r\n    \"price\": \"0.08\",\r\n    \"purchase_date\": \"2024-08-20T12:20:00.000Z\"\r\n  }, {\r\n    \"buyer\": \"0x9e0f1g2h3i4j5k6l7m8n9o0p1q2r3s4t5u6v7w8x\",\r\n    \"category\": \"搞笑\",\r\n    \"chapterTitle\": \"003-1\",\r\n    \"comicTitle\": \"風起雲湧\",\r\n    \"filename\": \"/test/comic6.png\",\r\n    \"price\": \"0.06\",\r\n    \"purchase_date\": \"2023-07-25T11:00:00.000Z\"\r\n  }, {\r\n    \"buyer\": \"0x9e0f1g2h3i4j5k6l7m8n9o0p1q2r3s4t5u6v7w8x\",\r\n    \"category\": \"玄幻\",\r\n    \"chapterTitle\": \"003-1\",\r\n    \"comicTitle\": \"幽靈學院\",\r\n    \"filename\": \"/test/comic1.png\",\r\n    \"price\": \"0.07\",\r\n    \"purchase_date\": \"2024-02-05T14:10:00.000Z\"\r\n  }, {\r\n    \"buyer\": \"0x1d2e3f4g5h6i7j8k9l0m1n2o3p4q5r6s7t8u9v0w\",\r\n    \"category\": \"玄幻\",\r\n    \"chapterTitle\": \"007-2\",\r\n    \"comicTitle\": \"幽靈學院\",\r\n    \"filename\": \"/test/comic1.png\",\r\n    \"price\": \"0.09\",\r\n    \"purchase_date\": \"2023-10-15T16:30:00.000Z\"\r\n  }, {\r\n    \"buyer\": \"0x9e0f1g2h3i4j5k6l7m8n9o0p1q2r3s4t5u6v7w8x\",\r\n    \"category\": \"搞笑\",\r\n    \"chapterTitle\": \"004-2\",\r\n    \"comicTitle\": \"笑爆天\",\r\n    \"filename\": \"/test/comic2.png\",\r\n    \"price\": \"0.08\",\r\n    \"purchase_date\": \"2023-08-10T14:25:00.000Z\"\r\n  }, {\r\n    \"buyer\": \"0x3c4d5e6f7g8h9i0j1k2l3m4n5o6p7q8r9s0t1u2v\",\r\n    \"category\": \"冒險\",\r\n    \"chapterTitle\": \"009-1\",\r\n    \"comicTitle\": \"異界遊俠\",\r\n    \"filename\": \"/test/comic7.png\",\r\n    \"price\": \"0.07\",\r\n    \"purchase_date\": \"2024-06-30T15:45:00.000Z\"\r\n  }, {\r\n    \"buyer\": \"0x3c4d5e6f7g8h9i0j1k2l3m4n5o6p7q8r9s0t1u2v\",\r\n    \"category\": \"冒險\",\r\n    \"chapterTitle\": \"004-2\",\r\n    \"comicTitle\": \"異界遊俠\",\r\n    \"filename\": \"/test/comic7.png\",\r\n    \"price\": \"0.06\",\r\n    \"purchase_date\": \"2024-07-12T16:00:00.000Z\"\r\n  }, {\r\n    \"buyer\": \"0x7e8f9g0h1i2j3k4l5m6n7o8p9q0r1s2t3u4v5w6x\",\r\n    \"category\": \"搞笑\",\r\n    \"chapterTitle\": \"008-1\",\r\n    \"comicTitle\": \"笑爆天\",\r\n    \"filename\": \"/test/comic2.png\",\r\n    \"price\": \"0.08\",\r\n    \"purchase_date\": \"2024-09-05T12:30:00.000Z\"\r\n  }, {\r\n    \"buyer\": \"0x1d2e3f4g5h6i7j8k9l0m1n2o3p4q5r6s7t8u9v0w\",\r\n    \"category\": \"戀愛\",\r\n    \"chapterTitle\": \"004-1\",\r\n    \"comicTitle\": \"絕世戀人\",\r\n    \"filename\": \"/test/comic5.png\",\r\n    \"price\": \"0.09\",\r\n    \"purchase_date\": \"2023-05-10T13:20:00.000Z\"\r\n  }, {\r\n    \"buyer\": \"0x1d2e3f4g5h6i7j8k9l0m1n2o3p4q5r6s7t8u9v0w\",\r\n    \"category\": \"戀愛\",\r\n    \"chapterTitle\": \"004-2\",\r\n    \"comicTitle\": \"絕世戀人\",\r\n    \"filename\": \"/test/comic5.png\",\r\n    \"price\": \"0.09\",\r\n    \"purchase_date\": \"2023-10-25T11:00:00.000Z\"\r\n  }, {\r\n    \"buyer\": \"0x3c4d5e6f7g8h9i0j1k2l3m4n5o6p7q8r9s0t1u2v\",\r\n    \"category\": \"玄幻\",\r\n    \"chapterTitle\": \"008-1\",\r\n    \"comicTitle\": \"幽靈學院\",\r\n    \"filename\": \"/test/comic1.png\",\r\n    \"price\": \"0.07\",\r\n    \"purchase_date\": \"2024-04-05T08:10:00.000Z\"\r\n  }, {\r\n    \"buyer\": \"0x3c4d5e6f7g8h9i0j1k2l3m4n5o6p7q8r9s0t1u2v\",\r\n    \"category\": \"冒險\",\r\n    \"chapterTitle\": \"005-1\",\r\n    \"comicTitle\": \"異界遊俠\",\r\n    \"filename\": \"/test/comic7.png\",\r\n    \"price\": \"0.06\",\r\n    \"purchase_date\": \"2024-08-20T14:25:00.000Z\"\r\n  }, {\r\n    \"buyer\": \"0x3c4d5e6f7g8h9i0j1k2l3m4n5o6p7q8r9s0t1u2v\",\r\n    \"category\": \"古風\",\r\n    \"chapterTitle\": \"005-1\",\r\n    \"comicTitle\": \"天啟之門\",\r\n    \"filename\": \"/test/comic8.png\",\r\n    \"price\": \"0.07\",\r\n    \"purchase_date\": \"2024-07-11T15:30:00.000Z\"\r\n  }, {\r\n    \"buyer\": \"0x7d8e9f0g1h2i3j4k5l6m7n8o9p0q1r2s3t4u5v6w\",\r\n    \"category\": \"古風\",\r\n    \"chapterTitle\": \"006-1\",\r\n    \"comicTitle\": \"天啟之門\",\r\n    \"filename\": \"/test/comic8.png\",\r\n    \"price\": \"0.07\",\r\n    \"purchase_date\": \"2023-10-30T13:15:00.000Z\"\r\n  }, {\r\n    \"buyer\": \"0x1d2e3f4g5h6i7j8k9l0m1n2o3p4q5r6s7t8u9v0w\",\r\n    \"category\": \"古風\",\r\n    \"chapterTitle\": \"007-2\",\r\n    \"comicTitle\": \"天啟之門\",\r\n    \"filename\": \"/test/comic8.png\",\r\n    \"price\": \"0.09\",\r\n    \"purchase_date\": \"2023-12-20T12:45:00.000Z\"\r\n  }, {\r\n    \"buyer\": \"0x3c4d5e6f7g8h9i0j1k2l3m4n5o6p7q8r9s0t1u2v\",\r\n    \"category\": \"戀愛\",\r\n    \"chapterTitle\": \"007-1\",\r\n    \"comicTitle\": \"絕世戀人\",\r\n    \"filename\": \"/test/comic5.png\",\r\n    \"price\": \"0.05\",\r\n    \"purchase_date\": \"2024-03-22T16:30:00.000Z\"\r\n  }, {\r\n    \"buyer\": \"0x3c4d5e6f7g8h9i0j1k2l3m4n5o6p7q8r9s0t1u2v\",\r\n    \"category\": \"玄幻\",\r\n    \"chapterTitle\": \"007-2\",\r\n    \"comicTitle\": \"幽靈學院\",\r\n    \"filename\": \"/test/comic1.png\",\r\n    \"price\": \"0.09\",\r\n    \"purchase_date\": \"2024-04-05T13:10:00.000Z\"\r\n  }, {\r\n    \"buyer\": \"0x3c4d5e6f7g8h9i0j1k2l3m4n5o6p7q8r9s0t1u2v\",\r\n    \"category\": \"搞笑\",\r\n    \"chapterTitle\": \"001-1\",\r\n    \"comicTitle\": \"風起雲湧\",\r\n    \"filename\": \"/test/comic6.png\",\r\n    \"price\": \"0.08\",\r\n    \"purchase_date\": \"2024-01-15T11:45:00.000Z\"\r\n  }, {\r\n    \"buyer\": \"0x1d2e3f4g5h6i7j8k9l0m1n2o3p4q5r6s7t8u9v0w\",\r\n    \"category\": \"玄幻\",\r\n    \"chapterTitle\": \"009-1\",\r\n    \"comicTitle\": \"幽靈學院\",\r\n    \"filename\": \"/test/comic1.png\",\r\n    \"price\": \"0.07\",\r\n    \"purchase_date\": \"2023-07-20T15:00:00.000Z\"\r\n  }, {\r\n    \"buyer\": \"0x4c5d6e7f8g9h0i1j2k3l4m5n6o7p8q9r0s1t2u3v\",\r\n    \"category\": \"戀愛\",\r\n    \"chapterTitle\": \"007-1\",\r\n    \"comicTitle\": \"絕世戀人\",\r\n    \"filename\": \"/test/comic5.png\",\r\n    \"price\": \"0.08\",\r\n    \"purchase_date\": \"2023-04-10T13:30:00.000Z\"\r\n  }, {\r\n    \"buyer\": \"0x3c4d5e6f7g8h9i0j1k2l3m4n5o6p7q8r9s0t1u2v\",\r\n    \"category\": \"冒險\",\r\n    \"chapterTitle\": \"008-1\",\r\n    \"comicTitle\": \"異界遊俠\",\r\n    \"filename\": \"/test/comic7.png\",\r\n    \"price\": \"0.08\",\r\n    \"purchase_date\": \"2024-05-05T14:00:00.000Z\"\r\n  }, {\r\n    \"buyer\": \"0x6f7g8h9i0j1k2l3m4n5o6p7q8r9s0t1u2v3w4x5y\",\r\n    \"category\": \"冒險\",\r\n    \"chapterTitle\": \"005-2\",\r\n    \"comicTitle\": \"異界遊俠\",\r\n    \"filename\": \"/test/comic7.png\",\r\n    \"price\": \"0.06\",\r\n    \"purchase_date\": \"2024-06-15T13:45:00.000Z\"\r\n  }, {\r\n    \"buyer\": \"0x7g8h9i0j1k2l3m4n5o6p7q8r9s0t1u2v3w4x5y6z\",\r\n    \"category\": \"古風\",\r\n    \"chapterTitle\": \"008-1\",\r\n    \"comicTitle\": \"天啟之門\",\r\n    \"filename\": \"/test/comic8.png\",\r\n    \"price\": \"0.09\",\r\n    \"purchase_date\": \"2024-03-05T15:20:00.000Z\"\r\n  }, {\r\n    \"buyer\": \"0x8h9i0j1k2l3m4n5o6p7q8r9s0t1u2v3w4x5y6z7a\",\r\n    \"category\": \"戀愛\",\r\n    \"chapterTitle\": \"009-2\",\r\n    \"comicTitle\": \"絕世戀人\",\r\n    \"filename\": \"/test/comic5.png\",\r\n    \"price\": \"0.07\",\r\n    \"purchase_date\": \"2024-02-15T12:30:00.000Z\"\r\n  }, {\r\n    \"buyer\": \"0x9i0j1k2l3m4n5o6p7q8r9s0t1u2v3w4x5y6z7a8b\",\r\n    \"category\": \"武俠\",\r\n    \"chapterTitle\": \"003-2\",\r\n    \"comicTitle\": \"流浪武士\",\r\n    \"filename\": \"/test/comic3.png\",\r\n    \"price\": \"0.08\",\r\n    \"purchase_date\": \"2024-07-05T14:25:00.000Z\"\r\n  }, {\r\n    \"buyer\": \"0x1d2e3f4g5h6i7j8k9l0m1n2o3p4q5r6s7t8u9v0w\",\r\n    \"category\": \"古風\",\r\n    \"chapterTitle\": \"007-1\",\r\n    \"comicTitle\": \"天啟之門\",\r\n    \"filename\": \"/test/comic8.png\",\r\n    \"price\": \"0.09\",\r\n    \"purchase_date\": \"2023-11-20T16:30:00.000Z\"\r\n  }, {\r\n    \"buyer\": \"0x1k2l3m4n5o6p7q8r9s0t1u2v3w4x5y6z7a8b9c0d\",\r\n    \"category\": \"武俠\",\r\n    \"chapterTitle\": \"010-1\",\r\n    \"comicTitle\": \"流浪武士\",\r\n    \"filename\": \"/test/comic3.png\",\r\n    \"price\": \"0.06\",\r\n    \"purchase_date\": \"2024-08-25T13:10:00.000Z\"\r\n  }  \r\n];\r\n//1.幽靈學院 玄幻 /test/comic1.png\r\n//2.笑爆天 搞笑 /test/comic2.png\r\n//3.流浪武士 武俠 /test/comic3.png\r\n//4.隱秘之城 玄幻 /test/comic4.png\r\n//5.絕世戀人 戀愛 /test/comic5.png\r\n//6.風起雲湧 搞笑 /test/comic6.png\r\n//7.異界遊俠 冒險 /test/comic7.png\r\n//8.天啟之門 古風 /test/comic8.png\r\n\r\n// 測試數據 22 筆\r\nconst test_data_2 = [\r\n  {\r\n    \"forSale\": 1,\r\n    \"price\": { \"0\": \"0.3\", \"1\": \"0.35\", \"3\": \"0.5\" },\r\n    \"royalty\": 5,\r\n    \"title\": \"幽靈學院\",\r\n    \"tokenTitle\": \"異象\"\r\n  },\r\n  {\r\n    \"forSale\": 0,\r\n    \"price\": { \"0\": \"0.2\", \"1\": \"0.15\" },\r\n    \"royalty\": 4,\r\n    \"title\": \"幽靈學院\",\r\n    \"tokenTitle\": \"歸途\"\r\n  },\r\n  {\r\n    \"forSale\": 1,\r\n    \"price\": { \"0\": \"0.2\", \"1\": \"0.2\", \"2\": \"0.15\", \"3\": \"0.3\" },\r\n    \"royalty\": 6,\r\n    \"title\": \"幽靈學院\",\r\n    \"tokenTitle\": \"歸途\"\r\n  },\r\n  {\r\n    \"forSale\": 0,\r\n    \"price\": { \"0\": \"0.25\", \"1\": \"0.28\", \"2\": \"0.35\" },\r\n    \"royalty\": 7,\r\n    \"title\": \"隱秘之城\",\r\n    \"tokenTitle\": \"群像\"\r\n  },\r\n  {\r\n    \"forSale\": 1,\r\n    \"price\": { \"0\": \"0.25\", \"1\": \"0.2\", \"2\": \"0.2\" },\r\n    \"royalty\": 3,\r\n    \"title\": \"隱秘之城\",\r\n    \"tokenTitle\": \"群像\"\r\n  },\r\n  {\r\n    \"forSale\": 0,\r\n    \"price\": { \"0\": \"0.25\", \"1\": \"0.25\", \"2\": \"0.3\", \"5\": \"0.3\" },\r\n    \"royalty\": 8,\r\n    \"title\": \"隱秘之城\",\r\n    \"tokenTitle\": \"霧靄\"\r\n  },\r\n  {\r\n    \"forSale\": 1,\r\n    \"price\": { \"0\": \"0.09\", \"1\": \"0.10\" },\r\n    \"royalty\": 5,\r\n    \"title\": \"天啟之門\",\r\n    \"tokenTitle\": \"白道士\"\r\n  },\r\n  {\r\n    \"forSale\": 0,\r\n    \"price\": { \"0\": \"0.1\", \"1\": \"0.12\", \"3\": \"0.13\" },\r\n    \"royalty\": 9,\r\n    \"title\": \"天啟之門\",\r\n    \"tokenTitle\": \"白道士\"\r\n  },\r\n  {\r\n    \"forSale\": 1,\r\n    \"price\": { \"0\": \"0.1\", \"1\": \"0.14\", \"2\": \"0.15\", \"4\": \"0.2\" },\r\n    \"royalty\": 2,\r\n    \"title\": \"天啟之門\",\r\n    \"tokenTitle\": \"天靈地寶\"\r\n  },\r\n  {\r\n    \"forSale\": 0,\r\n    \"price\": { \"0\": \"0.16\", \"1\": \"0.25\" },\r\n    \"royalty\": 10,\r\n    \"title\": \"絕世戀人\",\r\n    \"tokenTitle\": \"他的他\"\r\n  },\r\n  {\r\n    \"forSale\": 1,\r\n    \"price\": { \"0\": \"0.16\", \"1\": \"0.1\", \"2\": \"0.25\" },\r\n    \"royalty\": 4,\r\n    \"title\": \"絕世戀人\",\r\n    \"tokenTitle\": \"他的他\"\r\n  },\r\n  {\r\n    \"forSale\": 0,\r\n    \"price\": { \"0\": \"0.16\", \"1\": \"0.28\" },\r\n    \"royalty\": 6,\r\n    \"title\": \"絕世戀人\",\r\n    \"tokenTitle\": \"他的他\"\r\n  },\r\n  {\r\n    \"forSale\": 1,\r\n    \"price\": { \"0\": \"0.05\", \"1\": \"0.1\" },\r\n    \"royalty\": 3,\r\n    \"title\": \"風起雲湧\",\r\n    \"tokenTitle\": \"小宜茶館\"\r\n  },\r\n  {\r\n    \"forSale\": 0,\r\n    \"price\": { \"0\": \"0.05\", \"1\": \"0.08\", \"2\": \"0.09\", \"3\": \"0.10\" },\r\n    \"royalty\": 8,\r\n    \"title\": \"風起雲湧\",\r\n    \"tokenTitle\": \"小宜茶館\"\r\n  },\r\n  {\r\n    \"forSale\": 1,\r\n    \"price\": { \"0\": \"0.05\", \"1\": \"0.10\", \"2\": \"0.11\" },\r\n    \"royalty\": 5,\r\n    \"title\": \"風起雲湧\",\r\n    \"tokenTitle\": \"小酌\"\r\n  },\r\n  {\r\n    \"forSale\": 0,\r\n    \"price\": { \"0\": \"0.2\", \"1\": \"0.2\", \"2\": \"0.26\", \"3\": \"0.28\", \"5\": \"0.25\" },\r\n    \"royalty\": 7,\r\n    \"title\": \"異界遊俠\",\r\n    \"tokenTitle\": \"裘壇主軼聞紀\"\r\n  },\r\n  {\r\n    \"forSale\": 1,\r\n    \"price\": { \"0\": \"0.2\", \"1\": \"0.14\", \"2\": \"0.15\" },\r\n    \"royalty\": 6,\r\n    \"title\": \"幽靈學院\",\r\n    \"tokenTitle\": \"歸途\"\r\n  },\r\n  {\r\n    \"forSale\": 0,\r\n    \"price\": { \"0\": \"0.2\", \"1\": \"0.28\", \"2\": \"0.3\", \"3\": \"0.2\" },\r\n    \"royalty\": 9,\r\n    \"title\": \"異界遊俠\",\r\n    \"tokenTitle\": \"軼聞\"\r\n  },\r\n  {\r\n    \"forSale\": 1,\r\n    \"price\": { \"0\": \"0.2\", \"1\": \"0.25\", \"2\": \"0.25\" },\r\n    \"royalty\": 2,\r\n    \"title\": \"笑爆天\",\r\n    \"tokenTitle\": \"哈哈哈\"\r\n  },\r\n  {\r\n    \"forSale\": 0,\r\n    \"price\": { \"0\": \"0.2\", \"1\": \"0.25\" },\r\n    \"royalty\": 8,\r\n    \"title\": \"天啟之門\",\r\n    \"tokenTitle\": \"無悔\"\r\n  },\r\n  {\r\n    \"forSale\": 1,\r\n    \"price\": { \"0\": \"0.2\", \"1\": \"0.22\", \"2\": \"0.23\" },\r\n    \"royalty\": 4,\r\n    \"title\": \"天啟之門\",\r\n    \"tokenTitle\": \"無悔\"\r\n  },\r\n  {\r\n    \"forSale\": 0,\r\n    \"price\": { \"0\": \"0.25\", \"1\": \"0.4\" },\r\n    \"royalty\": 10,\r\n    \"title\": \"幽靈學院\",\r\n    \"tokenTitle\": \"啟程\"\r\n  }\r\n];\r\n\r\n\r\nconst DataAnalysis = () => {\r\n  const [dataByPeriod, setDataByPeriod] = useState({ year: {}, quarter: {}, month: {}, day: {} });\r\n  const [salesData, setSalesData] = useState('');\r\n  const [timePeriod, setTimePeriod] = useState('year');\r\n  const [comics, setComics] = useState([]);\r\n  const [pieData, setPieData] = useState(null);\r\n  const [pieTop5, setPieTop5] = useState(null);\r\n  const [selectedComic, setSelectedComic] = useState('');\r\n  const [lineData, setLineData] = useState({});\r\n  const [detailData, setDetailData] = useState(null);\r\n  const [lowestDetailData, setLowestDetailData] = useState(null);\r\n  const [comicPeriod, setComicPeriod] = useState('year');\r\n  const [x_title, setX_title] = useState({year: '', month: ''});\r\n\r\n  const [buyer, setBuyer] = useState({});\r\n  const [buyerPeriod, setBuyerPeriod] = useState('28天');\r\n  const [selectedBuyer, setSelectedBuyer] = useState('');\r\n\r\n  const [cimicRank, setCimicRank] = useState('');\r\n  const [dates, setDates] = useState(null);\r\n  const [rankFilterData, setRankFilterData] = useState([]);\r\n  const [rankSort, setRankSort] = useState('sales');\r\n  const [rankPeriodData, setRankPeriodData] = useState([]);\r\n  const [rankPeriod, setRankPeriod] = useState('28天');\r\n\r\n  const [nftData, setNftData] = useState([]);\r\n  const [nftSalesData, setNftSalesData] = useState({});\r\n  const [chartData, setChartData] = useState({ data: '', options: '' });\r\n  const [pieChartData, setPieChartData] = useState('');\r\n  const [selectedComicTitle, setSelectedComicTitle] = useState('');\r\n\r\n  const { t } = useTranslation();\r\n  const [loading, setLoading] = useState(true);\r\n  const currentAccount = localStorage.getItem(\"currentAccount\");\r\n  const headers = {'api-key': API_KEY};\r\n\r\n  const initData = async () => {\r\n    try {\r\n      const response = await axios.get(`${website}/api/dataAnalysis/records`, {\r\n        headers,\r\n        params: { currentAccount }\r\n      });\r\n      const comicOrigin = response.data;\r\n      //console.log(comicOrigin);\r\n      \r\n      //if (comicOrigin.comics.length === 0) {\r\n      if (test_data_1.length === 0) {\r\n        message.info(t('目前沒有漫畫購買紀錄'));\r\n      };\r\n      //if (comicOrigin.nft.length === 0) {\r\n      if (test_data_1.length === 0) {\r\n        message.info(t('目前沒有NFT購買紀錄'));\r\n      }; \r\n      const comic = comicOrigin.comics;\r\n      //const nft = comicOrigin.nft;\r\n      const nft = test_data_2;\r\n\r\n      //const processedData = initAllComicData(comic);\r\n      const processedData = initAllComicData(test_data_1);\r\n      //console.log(processedData);\r\n      setDataByPeriod(processedData);\r\n      \r\n      //const comics = initFilterComicData(comic);\r\n      const comics = initFilterComicData(test_data_1);\r\n      //console.log(comics);\r\n      setComics(comics);\r\n\r\n      //await initBuyerData(comic);\r\n      await initBuyerData(test_data_1);\r\n\r\n      const filtered = {};\r\n      for (const key in comics) {\r\n        if (comics[key].category) {\r\n          filtered[key] = {\r\n            day: comics[key].day,\r\n            category: comics[key].category,\r\n            filename: comics[key].filename\r\n          };\r\n        };\r\n      };\r\n      //console.log(filtered);\r\n      setCimicRank(filtered);\r\n\r\n      const initNFT = initNFTData(nft);\r\n      //console.log(initNFT);\r\n      setNftData(initNFT);\r\n\r\n      setLoading(false);\r\n    } catch (error) {\r\n      console.error('Error fetching records:', error);\r\n      message.warning('頁面加載失敗，請重新在試!');\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    initData();\r\n  }, [currentAccount]);\r\n\r\n  // 漫畫－銷售額\r\n  useEffect(() => {\r\n    setSalesData(computeSalesData(dataByPeriod, timePeriod, t));\r\n  }, [dataByPeriod, timePeriod]);\r\n\r\n  useEffect(() => {\r\n    if (selectedComic === t('請選擇漫畫') || timePeriod === 'quarter') {\r\n      return;\r\n    }\r\n    const data = computeComicData(comics, selectedComic, timePeriod, t);\r\n    setLineData(data);\r\n  }, [selectedComic, timePeriod]);\r\n\r\n  const handleChartClick = (event, currentPeriod) => {\r\n    const chart = event.chart;\r\n    if (!chart) return;\r\n    const points = chart.getElementsAtEventForMode(event, 'nearest', { intersect: true }, true);\r\n    if (points.length === 0) return;\r\n    const firstPoint = points[0];\r\n    const label = chart.data.labels[firstPoint.index];\r\n    const generateFilteredData = (period, label, dataCalculator, labelGenerator) => {\r\n      const data = dataCalculator(comics, selectedComic, period, t);\r\n      const allLabels = labelGenerator(label);\r\n      return {\r\n        labels: allLabels,\r\n        datasets: [{\r\n          label: `${selectedComic} - ${t('銷售額')}`,\r\n          data: allLabels.map(l => {\r\n            const index = data.labels.indexOf(l);\r\n            return index >= 0 ? data.datasets[0].data[index] : 0;\r\n          }),\r\n          backgroundColor: '#ff5733',\r\n          borderColor: '#ff5733',\r\n          borderWidth: 1,\r\n          countData: allLabels.map(l => {\r\n            const index = data.labels.indexOf(l);\r\n            return index >= 0 ? data.datasets[0].countData[index] : 0;\r\n          })\r\n        }]\r\n      };\r\n    };\r\n    if (currentPeriod === 'year') {\r\n      const year = label;\r\n      const filteredMonthData = generateFilteredData(\r\n        'month',\r\n        year,\r\n        computeComicData,\r\n        year => Array.from({ length: 12 }, (_, i) => `${year}-${String(i + 1).padStart(2, '0')}`)\r\n      );\r\n      setComicPeriod('month');\r\n      const x_year = filteredMonthData.labels[0].split('-')[0];\r\n      setX_title(prev => ({ ...prev, year: x_year }));\r\n      setDetailData(filteredMonthData);\r\n      setLowestDetailData(null);\r\n    } else if (currentPeriod === 'month') {\r\n      const month = label;\r\n      const filteredDayData = generateFilteredData(\r\n        'day',\r\n        month,\r\n        computeComicData,\r\n        month => Array.from({ length: 31 }, (_, i) => `${month}-${String(i + 1).padStart(2, '0')}`)\r\n      );\r\n      setComicPeriod('day');\r\n      const x_month = filteredDayData.labels[0].slice(0, 7);\r\n      setX_title(prev => ({ ...prev, month: x_month }));\r\n      setLowestDetailData(filteredDayData);\r\n    }\r\n  };\r\n\r\n  const handlePieChartClick = (event) => {\r\n    const chart = event.chart;\r\n    if (!chart) return;\r\n    const points = chart.getElementsAtEventForMode(event, 'nearest', { intersect: true }, true);\r\n    if (points.length > 0) {\r\n      const firstPoint = points[0];\r\n      const label = chart.data.labels[firstPoint.index];\r\n      const timePeriods = {\r\n        year: 'year',\r\n        quarter: 'quarter',\r\n        month: 'month',\r\n        day: 'day'\r\n      };\r\n      const timePeriodKey = timePeriods[timePeriod];\r\n      const timePeriodData = computeSalesData(dataByPeriod, timePeriodKey, t);\r\n      const pieChartData = transformPieData(timePeriodData.datasets[0].pieData, label);\r\n      const { labels, datasets } = pieChartData;\r\n      const data = datasets[0].data;\r\n      const top5 = labels\r\n        .map((label, index) => ({ label, value: data[index] }))\r\n        .sort((a, b) => b.value - a.value)\r\n        .slice(0, 5);\r\n      setPieTop5({\r\n        date: label,\r\n        title: top5.map((item, index) => `${index + 1}. ${item.label}：${item.value} ETH`)\r\n      });\r\n      if (pieChartData.labels.length === 0) {\r\n        message.info(t('目前沒有購買紀錄'));\r\n      }\r\n      setPieData(pieChartData);\r\n    }\r\n  };\r\n\r\n  const options = {\r\n    responsive: true,\r\n    plugins: {\r\n      legend: {\r\n        position: 'top',\r\n      },\r\n      tooltip: {\r\n        callbacks: {\r\n          label: (context) => {\r\n            const index = context.dataIndex;\r\n            const sales = context.dataset.data[index];\r\n            const count = context.dataset.countData[index];\r\n            return [`${t('銷售額')}：${sales}`, `${t('數量')}：${count}`];\r\n          },\r\n        },\r\n      },\r\n    },\r\n    scales: {\r\n      x: {\r\n        title: {\r\n          display: true,\r\n          text: t('日期'),\r\n        },\r\n      },\r\n      y: {\r\n        title: {\r\n          display: true,\r\n          text: t('銷售額'),\r\n        },\r\n      },\r\n    },\r\n  };\r\n\r\n  const pieOptions = {\r\n    responsive: true, // 使图表在不同屏幕尺寸下自适应\r\n    plugins: {\r\n      legend: {\r\n        position: 'top', // 图例位置（'top', 'bottom', 'left', 'right'）\r\n        labels: {\r\n          color: '#333', // 图例文本颜色\r\n          font: {\r\n            size: 14, // 图例文本字体大小\r\n          },\r\n        },\r\n      },\r\n      tooltip: {\r\n        callbacks: {\r\n          label: function (tooltipItem) {\r\n            const label = tooltipItem.label || '';\r\n            const value = tooltipItem.raw.toFixed(3); // 显示小数点后两位\r\n            return `${label}: ${value}`;\r\n          },\r\n        },\r\n        backgroundColor: '#fff', // 工具提示背景颜色\r\n        titleColor: '#000', // 工具提示标题颜色\r\n        bodyColor: '#000', // 工具提示主体颜色\r\n        borderColor: '#ddd', // 工具提示边框颜色\r\n        borderWidth: 1, // 工具提示边框宽度\r\n      },\r\n    },\r\n    maintainAspectRatio: false, // 不保持图表宽高比，使其填满容器\r\n  };\r\n\r\n  const filterOptions = {\r\n    responsive: true,\r\n    plugins: {\r\n      legend: {\r\n        position: 'top',\r\n      },\r\n      tooltip: {\r\n        callbacks: {\r\n          label: (context) => {\r\n            const index = context.dataIndex;\r\n            const sales = context.dataset.data[index];\r\n            const count = context.dataset.countData[index];\r\n            return [`${t('銷售額')}：${sales}`, `${t('數量')}：${count}`];\r\n          },\r\n        },\r\n      },\r\n    },\r\n    scales: {\r\n      y: {\r\n        title: {\r\n          display: true,\r\n          text: t('銷售額'),\r\n        },\r\n      },\r\n    },\r\n  };\r\n\r\n  const renderLineChart = (data, options) => {\r\n    if (data) {\r\n      return (\r\n        <Line\r\n          data={data}\r\n          options={{\r\n            ...options,\r\n            onClick: (e) => handlePieChartClick(e),\r\n          }}\r\n        />\r\n      );\r\n    }\r\n  };\r\n\r\n  const renderPieChart = (data, pieOptions) => {\r\n    if (data) {\r\n      return (\r\n        <Pie data={data} options={{pieOptions}}/>\r\n      );\r\n    }\r\n    <Pie data={pieData} options={pieOptions} />\r\n  };\r\n\r\n  const renderChart = (data, options, period) => {\r\n    if (data) {\r\n      return (\r\n        <Line\r\n          data={data}\r\n          options={{\r\n            ...options,\r\n            onClick: (e) => handleChartClick(e, period),\r\n          }}\r\n        />\r\n      );\r\n    }\r\n  };\r\n\r\n  const handlePeriodChange = (e) => {\r\n    const period = e.target.value;\r\n    if (period === 'quarter') {\r\n      setLineData({});\r\n    }\r\n    setTimePeriod(period);\r\n    setComicPeriod(period);\r\n    setDetailData(null);\r\n    setLowestDetailData(null);\r\n    setX_title({});\r\n    setPieData(null);\r\n  };\r\n\r\n  const handleComicChange = (e) => {\r\n    setSelectedComic(e.target.value);\r\n    setDetailData(null);\r\n    setLowestDetailData(null);\r\n    setX_title({});\r\n  };\r\n\r\n\r\n\r\n\r\n  // 漫畫－客戶群\r\n  const today = new Date();\r\n  const periods = {\r\n    '7天': [new Date(today.getTime() - 7 * 24 * 60 * 60 * 1000), today],\r\n    '28天': [new Date(today.getTime() - 28 * 24 * 60 * 60 * 1000), today],\r\n    '90天': [new Date(today.getTime() - 90 * 24 * 60 * 60 * 1000), today],\r\n    '180天': [new Date(today.getTime() - 180 * 24 * 60 * 60 * 1000), today],\r\n    '2023': [new Date('2023-01-01T00:00:00Z'), new Date('2023-12-31T23:59:59Z')],\r\n    '2024': [new Date('2024-01-01T00:00:00Z'), new Date('2024-12-31T23:59:59Z')],\r\n    '發布至今': [new Date('2023-01-01T00:00:00Z'), today],\r\n  };\r\n\r\n  const initBuyerData = (data) => {\r\n    const salesData = {};\r\n    for (const [period, [start, end]] of Object.entries(periods)) {\r\n      salesData[period] = calculateSales(data, start, end);\r\n    }\r\n    setBuyer(salesData);\r\n  };\r\n\r\n  const getSummary = (periodData) => {\r\n    const summary = { total_amount: 0, count: 0, buyerCount: 0 };\r\n    Object.values(periodData || {}).forEach(({ total_amount, count }) => {\r\n      summary.total_amount += total_amount;\r\n      summary.count += count;\r\n    });\r\n    summary.buyerCount = Object.keys(periodData || {}).length;\r\n    return summary;\r\n  };\r\n\r\n  const currentPeriodData = buyer[buyerPeriod] || {};\r\n  const summary = getSummary(currentPeriodData);\r\n\r\n  const sortedBuyers = Object.entries(currentPeriodData).sort(([, a], [, b]) =>\r\n    rankSort === 'sales' ? b.total_amount - a.total_amount : b.count - a.count\r\n  );\r\n\r\n  const totalStats = Object.values(currentPeriodData).reduce(\r\n    (acc, { total_amount, count }) => {\r\n      acc.total_amount += total_amount;\r\n      acc.count += count;\r\n      return acc;\r\n    },\r\n    { total_amount: 0, count: 0 }\r\n  );\r\n\r\n  const getComicsForBuyer = (buyerId) => {\r\n    const buyer = sortedBuyers.find(([id]) => id === buyerId);\r\n    return buyer ? Object.entries(buyer[1].comics) : [];\r\n  };\r\n\r\n\r\n\r\n\r\n  // 漫畫－排行榜\r\n  useEffect(() => {\r\n    initRankingData();\r\n  }, [cimicRank]);\r\n\r\n  const initRankingData = () => {\r\n    const aggregatedData = {};\r\n    for (const comic in cimicRank) {\r\n      const { category, filename, day } = cimicRank[comic];\r\n      const comicData = Object.keys(periods).reduce((acc, period) => {\r\n        acc[period] = { totalSales: 0, totalCount: 0, category, image: filename };\r\n        return acc;\r\n      }, {});\r\n      Object.values(day).forEach(({ date, sales, count }) => {\r\n        const saleDate = new Date(date);\r\n        for (const [period, [startDate, endDate]] of Object.entries(periods)) {\r\n          if (saleDate >= startDate && saleDate <= endDate) {\r\n            comicData[period].totalSales += sales;\r\n            comicData[period].totalCount += count;\r\n          }\r\n        }\r\n      });\r\n      Object.entries(comicData).forEach(([period, data]) => {\r\n        if (!aggregatedData[period]) aggregatedData[period] = {};\r\n        if (data.totalCount > 0) {\r\n          aggregatedData[period][comic] = {\r\n            totalSales: data.totalSales.toFixed(3),\r\n            totalCount: data.totalCount,\r\n            category: data.category,\r\n            image: data.image,\r\n          };\r\n        }\r\n      });\r\n    }\r\n    setRankPeriodData(aggregatedData);\r\n  };\r\n\r\n  const clickRankPeriod = (period) => {\r\n    setRankPeriod(period);\r\n    setRankFilterData(rankPeriodData[period] || {});\r\n  };\r\n\r\n  const filterDataByRange = async () => {\r\n    if (dates && dates[0] && dates[1]) {\r\n      const start = dates[0].startOf('day').toDate();\r\n      const end = dates[1].endOf('day').toDate();\r\n      const aggregatedData = {};\r\n      for (const comic in cimicRank) {\r\n        const days = cimicRank[comic].day;\r\n        const filteredDays = Object.values(days).filter((item) => {\r\n          const itemDate = new Date(item.date);\r\n          return itemDate >= start && itemDate <= end;\r\n        });\r\n        if (filteredDays.length > 0) {\r\n          let totalSales = 0;\r\n          let totalCount = 0;\r\n          filteredDays.forEach(({ sales, count }) => {\r\n            totalSales += sales;\r\n            totalCount += count;\r\n          });\r\n          //const response = await axios.get(`${website}/api/comicIMG/${cimicRank[comic].filename}`, { responseType: 'blob', headers });\r\n          //const image = URL.createObjectURL(response.data);\r\n          aggregatedData[comic] = {\r\n            totalSales: totalSales.toFixed(3),\r\n            totalCount,\r\n            category: cimicRank[comic].category,\r\n            //image: image\r\n            image: cimicRank[comic].filename\r\n          };\r\n        }\r\n      }\r\n      if (Object.keys(aggregatedData).length > 0) {\r\n        console.log(aggregatedData);\r\n        setRankFilterData(aggregatedData);\r\n        setRankPeriod('');\r\n      } else {\r\n        message.info('沒有符合條件的資料');\r\n        setRankFilterData({});\r\n      }\r\n    } else {\r\n      message.warning('請選擇完整的日期區間');\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    setRankFilterData([]);\r\n  }, [dates]);\r\n\r\n  const handleSortChange = (value: string) => {\r\n    setRankSort(value);\r\n  };\r\n\r\n  const sortedRank = () => {\r\n    const entries = Object.entries(rankFilterData);\r\n    if (rankSort === 'sales') {\r\n      return entries.sort(([ , a], [ , b]) => b.totalSales - a.totalSales);\r\n    } else if (rankSort === 'count') {\r\n      return entries.sort(([ , a], [ , b]) => b.totalCount - a.totalCount);\r\n    }\r\n    return entries;\r\n  };\r\n\r\n\r\n  // NFT－收益分布\r\n  useEffect(() => {\r\n    if (nftData && nftData.totRevenueResults && nftData.transferRevenueResults) {\r\n      const { data, options } = nftChartData(nftData.totRevenueResults, nftData.transferRevenueResults, t);\r\n      setChartData({ data, options });\r\n      setNftSalesData({\r\n        total: nftPieTot(nftData.totRevenueResults, '總收益', t),\r\n        transfer: nftPieTot(nftData.transferRevenueResults, '轉手收益', t)\r\n      });\r\n    }\r\n  }, [nftData]);\r\n\r\n  const NftPieChart = ({ chartData, title }) => (\r\n    <div className=\"pie-chart-item\">\r\n      <Pie\r\n        data={chartData}\r\n        options={chartData.options}\r\n        style={{ marginTop: \"-40px\", maxWidth: \"500px\", maxHeight: \"500px\" }}\r\n      />\r\n      <div style={{ marginTop: \"-40px\", marginBottom: \"0px\", marginLeft: \"5%\" }}>\r\n        <h3>{t(title)}</h3>\r\n        <h4>{t('前 5 名')}</h4>\r\n        {nftSalesTop5(chartData)}\r\n      </div>\r\n    </div>\r\n  );\r\n\r\n  const nftSalesTop5 = ({ datasetDetails }) => (\r\n    <div style={{ marginTop: '20px' }}>\r\n      {datasetDetails.map((item, index) => (\r\n        <div key={item.title}>\r\n          {index + 1}. {item.title}：{item.revenue.toFixed(3)} ETH\r\n        </div>\r\n      ))}\r\n    </div>\r\n  );\r\n\r\n  const handleBarClick = (event) => {\r\n    const chart = event.chart;\r\n    if (!chart) return;\r\n    const points = chart.getElementsAtEventForMode(event, 'nearest', { intersect: true }, true);\r\n    if (points.length === 0) return;\r\n    const index = points[0].index;\r\n    const comicTitle = chartData.data.labels[index];\r\n    const datasetLabel = chartData.data.datasets[points[0].datasetIndex].label;\r\n    const isTotRevenue = datasetLabel === t('總收益');\r\n    const dataSource = isTotRevenue ? nftData.totRevenueResults : nftData.transferRevenueResults;\r\n    const comic = dataSource.find(item => item.comicTitle === comicTitle);\r\n    const nftTitles = comic ? comic.nftTitles : [];\r\n    const pieData = {\r\n      labels: nftTitles.map(nft => nft.nftTitle),\r\n      datasets: [{\r\n        data: nftTitles.map(nft => parseFloat(nft.totalRevenue)),\r\n      }]\r\n    };\r\n    const top5 = nftTitles\r\n      .sort((a, b) => parseFloat(b.totalRevenue) - parseFloat(a.totalRevenue)) // 根据总收益排序\r\n      .slice(0, 5) // 获取前五名\r\n      .map((nft, index) => `${index + 1}. ${nft.nftTitle}：${nft.totalRevenue} ETH`);\r\n    setSelectedComicTitle({title: comicTitle, state: datasetLabel});\r\n    setPieChartData({ data: pieData, top5: top5 });\r\n  };\r\n  \r\n  const NFTpieOptions = {\r\n    responsive: true,\r\n    plugins: {\r\n      legend: {\r\n        position: 'top',\r\n        labels: {\r\n          color: '#333',\r\n          font: {\r\n            size: 14,\r\n          },\r\n        },\r\n      },\r\n      tooltip: {\r\n        callbacks: {\r\n          label: ({ label, raw }) => {\r\n            const count = nftData.totRevenueResults\r\n              .find(item => item.comicTitle === selectedComicTitle.title)\r\n              ?.nftTitles.find(nft => nft.nftTitle === label)?.count || 0;\r\n            return [`${t('總收益')}：${raw.toFixed(3)}`, `${t('總比數')}：${count}`];\r\n          }\r\n        },\r\n      },\r\n    },\r\n  };\r\n\r\n  const [isMobileView, setIsMobileView] = useState(window.innerWidth < 768);\r\n\r\n  useEffect(() => {\r\n    const handleResize = () => setIsMobileView(window.innerWidth < 768);\r\n\r\n    window.addEventListener('resize', handleResize);\r\n    // 初次渲染時也要確認\r\n    handleResize();\r\n\r\n    // 移除事件監聽器\r\n    return () => window.removeEventListener('resize', handleResize);\r\n  }, []);\r\n\r\n  // 格式化 buyerId：如果是手機視圖，顯示省略號\r\n  const formatBuyerId = (buyerId) => {\r\n    if (!buyerId) return '';\r\n    return isMobileView ? `${buyerId.slice(0, 5)}...${buyerId.slice(-5)}` : buyerId;\r\n  };\r\n  \r\n\r\n  return (\r\n    <>\r\n      {!loading &&\r\n        <Container className='dataAnalysis pb-5'>\r\n          <div className='dataAnalysis-title'>\r\n            <h2 className='text-center fw-bold' style={{backgroundColor: \"green\"}}>{t('數據分析')}</h2>\r\n          </div>\r\n          <Tabs defaultActiveKey=\"comic\" id=\"data-analysis-tabs\" className=\"mt-4 mb-3 w-100\">\r\n            <Tab eventKey=\"comic\" title={t('漫畫')}>\r\n              <Tabs defaultActiveKey=\"comicSales\" className=\"mb-3 w-100 custom-tabs second-tabs\">\r\n                <Tab className='second-tab' eventKey=\"comicSales\" title={t('銷售額')}>\r\n                  <div style={{marginBottom: \"50px\"}} className='sales-chart'>\r\n                    <div className='d-flex align-items-center justify-content-between'>\r\n                      <h1>{t('漫畫總銷售額')}</h1>\r\n                      <Form.Select value={timePeriod} onChange={handlePeriodChange}>\r\n                        <option value=\"year\">{t('年')}</option>\r\n                        <option value=\"quarter\">{t('季')}</option>\r\n                        <option value=\"month\">{t('月')}</option>\r\n                        <option value=\"day\">{t('日')}</option>\r\n                      </Form.Select>\r\n                    </div>\r\n                    {salesData && salesData.labels.length > 0 ? (\r\n                      <>\r\n                        {renderLineChart(salesData, options)}\r\n                        {pieData && Object.keys(pieData).length > 0 && (\r\n                          <>\r\n                            <center>\r\n                              <h2>{t('漫畫銷售佔比')}</h2>\r\n                              {pieTop5 && pieTop5.title.length !== 0 ? (\r\n                                <>\r\n                                  <div style={{maxWidth: \"500px\", maxHeight: \"500px\"}}>\r\n                                    {renderPieChart(pieData, pieOptions)}\r\n                                  </div>\r\n                                  <h3>{pieTop5.date} {t('前 5 名')}</h3>\r\n                                  {pieTop5.title && pieTop5.title.map((item, index) => (\r\n                                    <p key={index}>{item}</p>\r\n                                  ))}\r\n                                </>\r\n                              ) : (\r\n                                <>\r\n                                  <h3>{pieTop5.date} {t('前 5 名')}</h3>\r\n                                  <p>{t('目前沒有購買紀錄')}</p>\r\n                                </>\r\n                              )}\r\n                            </center>\r\n                          </>\r\n                        )}\r\n                      </>\r\n                    ) : (\r\n                      <p>{t('目前沒有購買紀錄')}</p>\r\n                    )}\r\n\r\n                    <h3 className='mt-5'>{t('篩選漫畫')}</h3>\r\n                    <Form.Select className='mt-4 mb-4' value={selectedComic} onChange={handleComicChange}>\r\n                      <option value=\"\">{t('請選擇漫畫')}</option>\r\n                      {Object.keys(comics).map((comic, index) => (\r\n                        <option key={index} value={comic}>{comic}</option>\r\n                      ))}\r\n                    </Form.Select>\r\n                    {lineData && Object.keys(lineData).length > 0 && (\r\n                      <>\r\n                        {renderChart(lineData, options, timePeriod)}\r\n                        {renderChart(detailData, filterOptions, timePeriod === 'year' ? 'month' : comicPeriod)}\r\n\r\n                        {timePeriod === 'year' && (comicPeriod === 'month' || comicPeriod === 'day') && (\r\n                          <center><p>{x_title.year}</p></center>\r\n                        )}\r\n\r\n                        {renderChart(lowestDetailData, filterOptions, timePeriod === 'month' ? 'day' : comicPeriod)}\r\n                        {(timePeriod === 'year' && comicPeriod === 'day') ? (\r\n                          <center><p>{x_title.month}</p></center>\r\n                        ) : timePeriod === 'month' ? (\r\n                          <center><p>{x_title.month}</p></center>\r\n                        ) : (\r\n                          null\r\n                        )}\r\n                      </>\r\n                    )}\r\n                  </div>\r\n                </Tab>\r\n                <Tab className='second-tab' eventKey=\"comicCustomer\" title={t('客户群')}>\r\n                  <div>\r\n                    <h1 className='mb-2'>{t('買家銷售總覽')}</h1>\r\n                    <div className=\"scrollable-container\">\r\n                      <div className=\"scrollable-buttons\">\r\n                        {Object.keys(buyer).map((period) => (\r\n                          <Button\r\n                            className=\"mb-2 btn\"\r\n                            key={period}\r\n                            onClick={() => setBuyerPeriod(period)}\r\n                          >\r\n                            {t(period)}\r\n                          </Button>\r\n                        ))}\r\n                      </div>\r\n                    </div>\r\n                    <div className='customer-text pt-3'>\r\n                      <Table striped hover className='mb-4 income-table'>\r\n                        <thead>\r\n                          <tr>\r\n                              <th>{t('區間')}</th>\r\n                              <th>{t('買家數量')}</th>\r\n                              <th>{t('總收益')}</th>\r\n                              <th>{t('總數量')}</th>\r\n                          </tr>\r\n                        </thead>\r\n                        <tbody>\r\n                          <tr>\r\n                              <td>{t(buyerPeriod)}</td>\r\n                              <td>{summary.buyerCount}</td>\r\n                              <td>${summary.total_amount.toFixed(3)}</td>\r\n                              <td>{summary.count}</td>\r\n                          </tr>\r\n                        </tbody>\r\n                      </Table>\r\n                      <Select\r\n                        defaultValue=\"sales\"\r\n                        style={{ width: 200, marginBottom: 16 }}\r\n                        onChange={handleSortChange}\r\n                      >\r\n                        <Select.Option value=\"sales\">{t('銷售額排序')}</Select.Option>\r\n                        <Select.Option value=\"count\">{t('購買量排序')}</Select.Option>\r\n                      </Select>\r\n                      <Table striped hover>\r\n                        <thead>\r\n                          <tr>\r\n                            <th>{t('買家')}</th>\r\n                            <th>{t('銷售額')}</th>\r\n                            <th>{t('總數量')}</th>\r\n                          </tr>\r\n                        </thead>\r\n                        <tbody>\r\n                          {sortedBuyers.map(([buyerId, stats]) => (\r\n                            <React.Fragment key={buyerId}>\r\n                              <tr onClick={() => setSelectedBuyer(buyerId === selectedBuyer ? null : buyerId)} className='pt-2'>\r\n                                <td data-label={t('買家')}>{formatBuyerId(buyerId)}</td>\r\n                                <td data-label={t('銷售額')}>${stats.total_amount.toFixed(3)}</td>\r\n                                <td data-label={t('總數量')}>{stats.count}</td>\r\n                              </tr>\r\n                              {selectedBuyer === buyerId && (\r\n                                getComicsForBuyer(buyerId).map(([comicTitle, comicStats]) => (\r\n                                  <tr key={comicTitle} className=\"sub-table-row\">\r\n                                    <td>{comicTitle}</td>\r\n                                    <td>${comicStats.total_amount.toFixed(3)}</td>\r\n                                    <td>{comicStats.count}</td>\r\n                                  </tr>\r\n                                ))\r\n                              )}\r\n                            </React.Fragment>\r\n                          ))}\r\n                        </tbody>\r\n                      </Table>\r\n                    </div>\r\n                  </div>\r\n                </Tab>\r\n                <Tab className='second-tab' eventKey=\"comicRank\" title={t('排行榜')}>\r\n                  <div>\r\n                    <h2>{t('選擇日期區間')}：{t(rankPeriod)}</h2>\r\n                    <div className=\"scrollable-container\">\r\n                      <div className=\"scrollable-buttons\">\r\n                        {Object.keys(periods).map((period) => (\r\n                          <Button\r\n                            className=\"mb-2 btn\"\r\n                            key={period}\r\n                            onClick={() => clickRankPeriod(period)}\r\n                          >\r\n                            {t(period)}\r\n                          </Button>\r\n                        ))}\r\n                      </div>\r\n                    </div>\r\n                    <Row gutter={16}>\r\n                      <Col span={12}>\r\n                        <div style={{ marginBottom: 16 }}>\r\n                          <DatePicker\r\n                            onChange={(value) => setDates([value, dates ? dates[1] : null])}\r\n                            format=\"YYYY/MM/DD\"\r\n                            style={{ width: '100%' }}\r\n                            placeholder={t('開始日期')}\r\n                          />\r\n                        </div>\r\n                      </Col>\r\n                      <Col span={12}>\r\n                        <div style={{ marginBottom: 16 }}>\r\n                          <DatePicker\r\n                            onChange={(value) => setDates([dates ? dates[0] : null, value])}\r\n                            format=\"YYYY/MM/DD\"\r\n                            style={{ width: '100%' }}\r\n                            placeholder={t('結束日期')}\r\n                          />\r\n                        </div>\r\n                      </Col>\r\n                    </Row>\r\n                    <div className='d-flex align-items-center justify-content-between'>\r\n                      <Button\r\n                        type=\"primary\"\r\n                        onClick={filterDataByRange}\r\n                        disabled={!dates || !dates[0] || !dates[1]}\r\n                      >\r\n                        {t('顯示資料')}\r\n                      </Button>\r\n                      <Select\r\n                        defaultValue=\"sales\"\r\n                        style={{ width: 200}}\r\n                        onChange={handleSortChange}\r\n                      >\r\n                        <Select.Option value=\"sales\">{t('銷售額排序')}</Select.Option>\r\n                        <Select.Option value=\"count\">{t('購買量排序')}</Select.Option>\r\n                      </Select>\r\n                    </div>\r\n                    <div style={{ marginTop: 16 }}>\r\n                      <h3>{t('符合條件的資料：')}</h3>\r\n                      {Object.keys(rankFilterData).length > 0 ? (\r\n                        <List\r\n                          className=\"rankingList\"\r\n                          bordered\r\n                          dataSource={sortedRank()}\r\n                          renderItem={([comic, { totalSales, totalCount, image, category }]) => (\r\n                            <List.Item className=\"d-flex align-items-center ranking-list\">\r\n                              <div className=\"ranking-image\">\r\n                                <img src={image} alt={comic} className=\"ranking-thumbnail\" />\r\n                              </div>\r\n                              <div className=\"ranking-card-info ms-3\">\r\n                                <div className=\"ranking-title fw-bold\">{comic}</div>\r\n                                <div className=\"ranking-title\">{t('類型')}：{category}</div>\r\n                                <div className=\"ranking-title\">{t('銷售額')}：{totalSales}</div>\r\n                                <div className=\"ranking-title\">{t('購買量')}：{totalCount}</div>\r\n                              </div>\r\n                            </List.Item>\r\n                          )}\r\n                        />\r\n                      ) : (\r\n                        <p>{t('沒有符合條件的資料')}</p>\r\n                      )}\r\n                    </div>\r\n                  </div>\r\n                </Tab>\r\n              </Tabs>\r\n            </Tab>\r\n            <Tab eventKey=\"nft\" title=\"NFT\">\r\n              <Tabs defaultActiveKey=\"nftSales\" className=\"mb-3 w-100 custom-tabs second-tabs\">\r\n                <Tab className='second-tab' eventKey=\"nftSales\" title={t('銷售額')}>\r\n                  <center><h2>NFT {t(\"銷售額\")}</h2></center><hr />\r\n                  <div className=\"pie-chart-wrapper\">\r\n                    {(nftData.totRevenueResults.length > 0 && nftSalesData && nftSalesData.total) ? (\r\n                      <div className=\"pie-chart-container\">\r\n                        <NftPieChart chartData={nftSalesData.total} title=\"總收益\" />\r\n                        <hr />\r\n                        {Object.keys(nftSalesData.transfer).length > 0 && <NftPieChart chartData={nftSalesData.transfer} title=\"轉手收益\" />}\r\n                      </div>\r\n                    ) : (\r\n                      <p>{t('目前沒有購買紀錄')}</p>\r\n                    )}\r\n                  </div>\r\n                </Tab>\r\n                <Tab className='second-tab revenueDist' eventKey=\"revenueDist\" title={t('收益分布')}>\r\n                  <div>\r\n                    <center><h2>NFT {t('收益分布')}</h2></center><hr />\r\n                    <div style={{ display: 'flex', flexDirection: 'column', alignItems: 'center' }} className='sales-chart'>\r\n                      {chartData && chartData.data && chartData.options && (\r\n                        <>\r\n                          <Bar\r\n                            data={chartData.data}\r\n                            options={{ ...chartData.options, onClick: (e) => handleBarClick(e) }}\r\n                            className='mb-5'\r\n                          />\r\n                          {pieChartData && pieChartData.data && (\r\n                            <>\r\n                              <Pie\r\n                                data={pieChartData.data}\r\n                                options={NFTpieOptions}\r\n                                \r\n                              />\r\n                              <h3>{selectedComicTitle.title} {selectedComicTitle.state}</h3>\r\n                              <h3>{t('前 5 名')}</h3>\r\n                              {pieChartData.top5 && pieChartData.top5.map((item, index) => (\r\n                                <p key={index}>{item}</p>\r\n                              ))}\r\n                            </>\r\n                          )}\r\n                        </>\r\n                      )}\r\n                    </div>\r\n                  </div>\r\n                </Tab>\r\n              </Tabs>\r\n            </Tab>\r\n          </Tabs>\r\n        </Container>\r\n      }\r\n      {loading &&  \r\n        <div className=\"loading-container\">\r\n            <div>{t('頁面加載中')}</div>\r\n        </div>\r\n      }\r\n    </>\r\n  );\r\n};\r\n\r\n\r\nexport default DataAnalysis;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}