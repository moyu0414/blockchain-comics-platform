{"ast":null,"code":"import React,{useState,useEffect}from'react';import{Link,useParams}from\"react-router-dom\";import{Container,Col,Row,Table,ButtonToolbar,Pagination}from'react-bootstrap';import'./bootstrap.min.css';import{useTranslation}from'react-i18next';import i18n from'../i18n';import axios from'axios';import{sortByTimestamp}from'../index';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const website=process.env.REACT_APP_Website;const API_KEY=process.env.REACT_APP_API_KEY;function EditChapter(){const[comic,setComic]=useState([]);const[chapters,setChapters]=useState([]);const{comicID}=useParams();const[loading,setLoading]=useState(true);const{t}=useTranslation();const storedArrayJSON=localStorage.getItem('comicDatas');const currentAccount=localStorage.getItem(\"currentAccount\");const headers={'api-key':API_KEY};const fetchedData=[];let temp=[];let chapterInfo=[];const initData=async()=>{try{const storedArray=JSON.parse(storedArrayJSON);// 假设 storedArrayJSON 是一个 JSON 字符串\nfor(let i=0;i<storedArray.length;i++){if(storedArray[i].is_exist===0){const imageResponse=await axios.get(\"\".concat(website,\"/api/comicIMG/\").concat(storedArray[i].comic_id),{responseType:'blob',headers});const image=URL.createObjectURL(imageResponse.data);if(storedArray[i].comicID===comicID){temp.push({comicHash:storedArray[i].comic_id,comicID:storedArray[i].comicID,title:storedArray[i].title,image:image});}}}setComic(temp);try{const response=await axios.get(\"\".concat(website,\"/api/comicDetail\"),{headers:headers,params:{comicHash:temp[0].comicHash,currentAccount:currentAccount}});let chapters=response.data;sortByTimestamp(chapters);//console.log(chapters);\nfor(let i=0;i<chapters.length;i++){if(currentAccount==chapters[i].creator){let id='Chapter'+(i+1);chapterInfo.push({title:chapters[i].title,price:chapters[i].price,chapterID:id});}}setChapters(chapterInfo);//console.log(chapterInfo);\n}catch(error){console.error('Error fetching records:',error);}setLoading(false);}catch(error){console.error('Error initializing contract:',error);}};useEffect(()=>{initData();},[comicID,currentAccount]);const[currentPage,setCurrentPage]=useState(1);const itemsPerPage=10;// 每頁顯示的章節數量\nconst totalPages=Math.ceil(chapters.length/itemsPerPage);const handlePageChange=page=>{setCurrentPage(page);};// 計算當前頁面的章節切片的起始索引\nconst startIndex=(currentPage-1)*itemsPerPage;const currentChapters=chapters.slice(startIndex,startIndex+itemsPerPage);const getPageItems=()=>{const pageItems=[];const maxPagesToShow=5;// 顯示的最大頁碼數量\nif(totalPages<=maxPagesToShow){// 如果總頁數小於等於最大顯示頁碼數，則顯示所有頁碼\nfor(let i=1;i<=totalPages;i++){pageItems.push(/*#__PURE__*/_jsx(Pagination.Item,{active:i===currentPage,onClick:()=>handlePageChange(i),children:i},i));}}else{// 計算中間的頁碼範圍\nconst middlePages=Math.floor(maxPagesToShow/2);let startPage=Math.max(2,currentPage-middlePages);let endPage=Math.min(totalPages-1,currentPage+middlePages);if(currentPage-startPage<=middlePages){endPage=Math.min(totalPages-1,startPage+maxPagesToShow-2);}if(endPage-currentPage<=middlePages){startPage=Math.max(2,endPage-maxPagesToShow+2);}// 第一頁\npageItems.push(/*#__PURE__*/_jsx(Pagination.Item,{active:currentPage===1,onClick:()=>handlePageChange(1),children:\"1\"},1));if(startPage>2){pageItems.push(/*#__PURE__*/_jsx(Pagination.Ellipsis,{},\"ellipsis-start\"));}// 中間的頁碼\nfor(let i=startPage;i<=endPage;i++){pageItems.push(/*#__PURE__*/_jsx(Pagination.Item,{active:i===currentPage,onClick:()=>handlePageChange(i),children:i},i));}if(endPage<totalPages-1){pageItems.push(/*#__PURE__*/_jsx(Pagination.Ellipsis,{},\"ellipsis-end\"));}// 最後一頁\npageItems.push(/*#__PURE__*/_jsx(Pagination.Item,{active:currentPage===totalPages,onClick:()=>handlePageChange(totalPages),children:totalPages},totalPages));}return pageItems;};return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(\"div\",{children:[!loading&&/*#__PURE__*/_jsxs(Container,{className:\"editChapter\",children:[/*#__PURE__*/_jsx(Row,{className:\"pt-5\",children:/*#__PURE__*/_jsxs(Link,{to:\"/comicDetail/\".concat(comic[0].comicID),children:[/*#__PURE__*/_jsx(\"div\",{className:\"d-block mx-auto img-fluid createSuccess-image-container\",children:/*#__PURE__*/_jsx(\"img\",{className:\"d-block mx-auto -fluid\",src:comic[0].image,alt:\"800x400\"})}),/*#__PURE__*/_jsx(\"h4\",{className:\"text-center pt-2\",children:comic[0].title})]})}),/*#__PURE__*/_jsx(Row,{className:\"pt-4 chapter-title-section\",children:/*#__PURE__*/_jsxs(Col,{className:\"\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex justify-content-between align-items-center\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"fw-bold mb-0\",children:t('章節目錄')}),/*#__PURE__*/_jsx(\"p\",{className:\"text-end mb-0\",children:t('查看全部章節')})]}),/*#__PURE__*/_jsx(\"hr\",{})]})}),/*#__PURE__*/_jsx(Row,{className:\"justify-content-center\",children:/*#__PURE__*/_jsx(Col,{className:\"d-flex justify-content-center chapter-table\",children:/*#__PURE__*/_jsx(Table,{size:\"sm\",children:/*#__PURE__*/_jsx(\"tbody\",{children:currentChapters.map((chapter,index)=>/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{className:\"text-center fw-bold\",children:t('第幾章',{chapter:startIndex+index+1})}),/*#__PURE__*/_jsx(\"td\",{className:\"text-center\",children:chapter.title}),/*#__PURE__*/_jsx(\"td\",{className:\"text-center\",children:chapter.price}),/*#__PURE__*/_jsx(\"td\",{className:\"text-center\",children:/*#__PURE__*/_jsx(Link,{to:\"/editWork\",state:{showChapterForm:true,comicID:comic.length>0?comic[0].comicID:null,chapterID:chapters.length>0?chapter.chapterID:null},children:/*#__PURE__*/_jsx(\"button\",{className:\"btn\",children:t('編輯')})})})]},index))})})})}),/*#__PURE__*/_jsx(Row,{className:\"pt-2 pb-5 justify-content-center table-button\",children:/*#__PURE__*/_jsx(Col,{className:\"d-flex justify-content-center\",children:/*#__PURE__*/_jsx(ButtonToolbar,{\"aria-label\":\"Toolbar with pagination\",children:/*#__PURE__*/_jsxs(Pagination,{children:[/*#__PURE__*/_jsx(Pagination.Prev,{onClick:()=>handlePageChange(currentPage-1),disabled:currentPage<=1,className:\"pagination-button\"}),getPageItems(),/*#__PURE__*/_jsx(Pagination.Next,{onClick:()=>handlePageChange(currentPage+1),disabled:currentPage>=totalPages,className:\"pagination-button\"})]})})})})]}),loading&&/*#__PURE__*/_jsx(\"div\",{className:\"loading-container\",children:/*#__PURE__*/_jsx(\"div\",{children:t('頁面加載中')})})]})});}export default EditChapter;","map":{"version":3,"names":["React","useState","useEffect","Link","useParams","Container","Col","Row","Table","ButtonToolbar","Pagination","useTranslation","i18n","axios","sortByTimestamp","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","website","process","env","REACT_APP_Website","API_KEY","REACT_APP_API_KEY","EditChapter","comic","setComic","chapters","setChapters","comicID","loading","setLoading","t","storedArrayJSON","localStorage","getItem","currentAccount","headers","fetchedData","temp","chapterInfo","initData","storedArray","JSON","parse","i","length","is_exist","imageResponse","get","concat","comic_id","responseType","image","URL","createObjectURL","data","push","comicHash","title","response","params","creator","id","price","chapterID","error","console","currentPage","setCurrentPage","itemsPerPage","totalPages","Math","ceil","handlePageChange","page","startIndex","currentChapters","slice","getPageItems","pageItems","maxPagesToShow","Item","active","onClick","children","middlePages","floor","startPage","max","endPage","min","Ellipsis","className","to","src","alt","size","map","chapter","index","state","showChapterForm","Prev","disabled","Next"],"sources":["C:/Users/user1/Desktop/blockchain-comics-platform/frontend/src/routes/editChapter.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { Link, useParams } from \"react-router-dom\";\r\nimport { Container, Col, Row, Table, ButtonToolbar, Pagination } from 'react-bootstrap';\r\nimport './bootstrap.min.css';\r\nimport { useTranslation } from 'react-i18next';\r\nimport i18n from '../i18n';\r\nimport axios from 'axios';\r\nimport { sortByTimestamp } from '../index';\r\nconst website = process.env.REACT_APP_Website;\r\nconst API_KEY = process.env.REACT_APP_API_KEY;\r\n\r\nfunction EditChapter() {\r\n    const [comic, setComic] = useState([]);\r\n    const [chapters, setChapters] = useState([]);\r\n    const { comicID } = useParams();\r\n    const [loading, setLoading] = useState(true);\r\n    const { t } = useTranslation();\r\n    const storedArrayJSON = localStorage.getItem('comicDatas');\r\n    const currentAccount = localStorage.getItem(\"currentAccount\");\r\n    const headers = {'api-key': API_KEY};\r\n    const fetchedData = [];\r\n    let temp = [];\r\n    let chapterInfo = [];\r\n\r\n    const initData = async () => {\r\n        try {\r\n            const storedArray = JSON.parse(storedArrayJSON); // 假设 storedArrayJSON 是一个 JSON 字符串\r\n            for (let i = 0; i < storedArray.length; i++) {\r\n                if (storedArray[i].is_exist === 0) {\r\n                    const imageResponse = await axios.get(`${website}/api/comicIMG/${storedArray[i].comic_id}`, { responseType: 'blob', headers });\r\n                    const image = URL.createObjectURL(imageResponse.data);\r\n                    if (storedArray[i].comicID === comicID) {\r\n                        temp.push({\r\n                            comicHash: storedArray[i].comic_id,\r\n                            comicID: storedArray[i].comicID,\r\n                            title: storedArray[i].title,\r\n                            image: image,\r\n                        });\r\n                    }\r\n                }\r\n            }\r\n            setComic(temp);\r\n\r\n            try {\r\n                const response = await axios.get(`${website}/api/comicDetail`, {\r\n                    headers: headers,\r\n                    params: {\r\n                        comicHash: temp[0].comicHash,\r\n                        currentAccount: currentAccount\r\n                    }\r\n                });\r\n                let chapters = response.data;\r\n                sortByTimestamp(chapters);\r\n                //console.log(chapters);\r\n\r\n                for (let i = 0; i < chapters.length; i++) {\r\n                    if (currentAccount == chapters[i].creator){\r\n                        let id = 'Chapter' + (i+1);\r\n                        chapterInfo.push({\r\n                        title: chapters[i].title,\r\n                        price: chapters[i].price,\r\n                        chapterID: id\r\n                        });\r\n                    }\r\n                }\r\n                setChapters(chapterInfo);\r\n                //console.log(chapterInfo);\r\n            } catch (error) {\r\n                console.error('Error fetching records:', error);\r\n            }\r\n            setLoading(false);\r\n        } catch (error) {\r\n            console.error('Error initializing contract:', error);\r\n        }\r\n    };\r\n\r\n    useEffect(() => {\r\n        initData();\r\n    }, [comicID, currentAccount]);\r\n\r\n    \r\n    const [currentPage, setCurrentPage] = useState(1);\r\n    const itemsPerPage = 10; // 每頁顯示的章節數量\r\n    const totalPages = Math.ceil(chapters.length / itemsPerPage);\r\n\r\n    const handlePageChange = (page) => {\r\n        setCurrentPage(page);\r\n    };\r\n\r\n    // 計算當前頁面的章節切片的起始索引\r\n    const startIndex = (currentPage - 1) * itemsPerPage;\r\n    const currentChapters = chapters.slice(startIndex, startIndex + itemsPerPage);\r\n\r\n    const getPageItems = () => {\r\n        const pageItems = [];\r\n        const maxPagesToShow = 5; // 顯示的最大頁碼數量\r\n    \r\n        if (totalPages <= maxPagesToShow) {\r\n            // 如果總頁數小於等於最大顯示頁碼數，則顯示所有頁碼\r\n            for (let i = 1; i <= totalPages; i++) {\r\n                pageItems.push(\r\n                    <Pagination.Item key={i} active={i === currentPage} onClick={() => handlePageChange(i)}>\r\n                        {i}\r\n                    </Pagination.Item>\r\n                );\r\n            }\r\n        } else {\r\n            // 計算中間的頁碼範圍\r\n            const middlePages = Math.floor(maxPagesToShow / 2);\r\n            let startPage = Math.max(2, currentPage - middlePages);\r\n            let endPage = Math.min(totalPages - 1, currentPage + middlePages);\r\n    \r\n            if (currentPage - startPage <= middlePages) {\r\n                endPage = Math.min(totalPages - 1, startPage + maxPagesToShow - 2);\r\n            }\r\n    \r\n            if (endPage - currentPage <= middlePages) {\r\n                startPage = Math.max(2, endPage - maxPagesToShow + 2);\r\n            }\r\n    \r\n            // 第一頁\r\n            pageItems.push(\r\n                <Pagination.Item key={1} active={currentPage === 1} onClick={() => handlePageChange(1)}>\r\n                    1\r\n                </Pagination.Item>\r\n            );\r\n    \r\n            if (startPage > 2) {\r\n                pageItems.push(<Pagination.Ellipsis key=\"ellipsis-start\" />);\r\n            }\r\n    \r\n            // 中間的頁碼\r\n            for (let i = startPage; i <= endPage; i++) {\r\n                pageItems.push(\r\n                    <Pagination.Item key={i} active={i === currentPage} onClick={() => handlePageChange(i)}>\r\n                        {i}\r\n                    </Pagination.Item>\r\n                );\r\n            }\r\n    \r\n            if (endPage < totalPages - 1) {\r\n                pageItems.push(<Pagination.Ellipsis key=\"ellipsis-end\" />);\r\n            }\r\n    \r\n            // 最後一頁\r\n            pageItems.push(\r\n                <Pagination.Item key={totalPages} active={currentPage === totalPages} onClick={() => handlePageChange(totalPages)}>\r\n                    {totalPages}\r\n                </Pagination.Item>\r\n            );\r\n        }\r\n    \r\n        return pageItems;\r\n    };\r\n\r\n    return (\r\n        <>\r\n            <div>\r\n                {!loading &&\r\n                    <Container className='editChapter'>\r\n                        {/* 此處會放上該漫畫的封面+名稱供預覽 跟創作者頁面creatorPage的一樣*/}\r\n                        <Row className=\"pt-5\">\r\n                            <Link to={`/comicDetail/${comic[0].comicID}`}>\r\n                                <div className=\"d-block mx-auto img-fluid createSuccess-image-container\">\r\n                                    <img\r\n                                        className=\"d-block mx-auto -fluid\"\r\n                                        src={comic[0].image}\r\n                                        alt=\"800x400\"\r\n                                    />\r\n                                </div>\r\n                                <h4 className='text-center pt-2'>{comic[0].title}</h4>\r\n                            </Link>\r\n                        </Row>\r\n                        <Row className='pt-4 chapter-title-section'>\r\n                            <Col className=''>\r\n                                <div className='d-flex justify-content-between align-items-center'>\r\n                                    <h3 className='fw-bold mb-0'>{t('章節目錄')}</h3>\r\n                                    <p className='text-end mb-0'>{t('查看全部章節')}</p>\r\n                                </div>\r\n                                <hr/>\r\n                            </Col>\r\n                        </Row>\r\n                        <Row className='justify-content-center'>\r\n                            <Col className='d-flex justify-content-center chapter-table'>\r\n                                <Table size=\"sm\">\r\n                                    <tbody>\r\n                                        {currentChapters.map((chapter, index) => (\r\n                                            <tr key={index}>\r\n                                                <td className='text-center fw-bold'>{t('第幾章', { chapter: startIndex + index + 1 })}</td>\r\n                                                <td className='text-center'>{chapter.title}</td>\r\n                                                <td className='text-center'>{chapter.price}</td>\r\n                                                <td className='text-center'>\r\n                                                    <Link\r\n                                                        to={\"/editWork\"}\r\n                                                        state={{\r\n                                                            showChapterForm: true,\r\n                                                            comicID: comic.length > 0 ? comic[0].comicID : null,\r\n                                                            chapterID: chapters.length > 0 ? chapter.chapterID : null\r\n                                                        }}\r\n                                                    >\r\n                                                        <button className=\"btn\">{t('編輯')}</button>\r\n                                                    </Link>\r\n                                                </td>\r\n                                            </tr>\r\n                                        ))}\r\n                                    </tbody>\r\n                                </Table>\r\n                            </Col>\r\n                        </Row>\r\n                        <Row className='pt-2 pb-5 justify-content-center table-button'>\r\n                            <Col className='d-flex justify-content-center'>\r\n                                <ButtonToolbar aria-label=\"Toolbar with pagination\">\r\n                                    <Pagination>\r\n                                        <Pagination.Prev \r\n                                            onClick={() => handlePageChange(currentPage - 1)} disabled={currentPage <= 1} \r\n                                            className='pagination-button'\r\n                                        />\r\n                                        {getPageItems()}\r\n                                        <Pagination.Next \r\n                                            onClick={() => handlePageChange(currentPage + 1)} disabled={currentPage >= totalPages} \r\n                                            className='pagination-button'\r\n                                        />\r\n                                    </Pagination>\r\n                                </ButtonToolbar>\r\n                            </Col>\r\n                        </Row>\r\n                        \r\n                    </Container>\r\n                }\r\n                {loading &&  \r\n                    <div className=\"loading-container\">\r\n                        <div>{t('頁面加載中')}</div>\r\n                    </div>\r\n                }\r\n            </div>\r\n        </>\r\n    );\r\n}\r\n\r\nexport default EditChapter;\r\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,CAAEC,SAAS,KAAQ,OAAO,CAClD,OAASC,IAAI,CAAEC,SAAS,KAAQ,kBAAkB,CAClD,OAASC,SAAS,CAAEC,GAAG,CAAEC,GAAG,CAAEC,KAAK,CAAEC,aAAa,CAAEC,UAAU,KAAQ,iBAAiB,CACvF,MAAO,qBAAqB,CAC5B,OAASC,cAAc,KAAQ,eAAe,CAC9C,MAAO,CAAAC,IAAI,KAAM,SAAS,CAC1B,MAAO,CAAAC,KAAK,KAAM,OAAO,CACzB,OAASC,eAAe,KAAQ,UAAU,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,CAAAC,QAAA,IAAAC,SAAA,yBAC3C,KAAM,CAAAC,OAAO,CAAGC,OAAO,CAACC,GAAG,CAACC,iBAAiB,CAC7C,KAAM,CAAAC,OAAO,CAAGH,OAAO,CAACC,GAAG,CAACG,iBAAiB,CAE7C,QAAS,CAAAC,WAAWA,CAAA,CAAG,CACnB,KAAM,CAACC,KAAK,CAAEC,QAAQ,CAAC,CAAG5B,QAAQ,CAAC,EAAE,CAAC,CACtC,KAAM,CAAC6B,QAAQ,CAAEC,WAAW,CAAC,CAAG9B,QAAQ,CAAC,EAAE,CAAC,CAC5C,KAAM,CAAE+B,OAAQ,CAAC,CAAG5B,SAAS,CAAC,CAAC,CAC/B,KAAM,CAAC6B,OAAO,CAAEC,UAAU,CAAC,CAAGjC,QAAQ,CAAC,IAAI,CAAC,CAC5C,KAAM,CAAEkC,CAAE,CAAC,CAAGxB,cAAc,CAAC,CAAC,CAC9B,KAAM,CAAAyB,eAAe,CAAGC,YAAY,CAACC,OAAO,CAAC,YAAY,CAAC,CAC1D,KAAM,CAAAC,cAAc,CAAGF,YAAY,CAACC,OAAO,CAAC,gBAAgB,CAAC,CAC7D,KAAM,CAAAE,OAAO,CAAG,CAAC,SAAS,CAAEf,OAAO,CAAC,CACpC,KAAM,CAAAgB,WAAW,CAAG,EAAE,CACtB,GAAI,CAAAC,IAAI,CAAG,EAAE,CACb,GAAI,CAAAC,WAAW,CAAG,EAAE,CAEpB,KAAM,CAAAC,QAAQ,CAAG,KAAAA,CAAA,GAAY,CACzB,GAAI,CACA,KAAM,CAAAC,WAAW,CAAGC,IAAI,CAACC,KAAK,CAACX,eAAe,CAAC,CAAE;AACjD,IAAK,GAAI,CAAAY,CAAC,CAAG,CAAC,CAAEA,CAAC,CAAGH,WAAW,CAACI,MAAM,CAAED,CAAC,EAAE,CAAE,CACzC,GAAIH,WAAW,CAACG,CAAC,CAAC,CAACE,QAAQ,GAAK,CAAC,CAAE,CAC/B,KAAM,CAAAC,aAAa,CAAG,KAAM,CAAAtC,KAAK,CAACuC,GAAG,IAAAC,MAAA,CAAIhC,OAAO,mBAAAgC,MAAA,CAAiBR,WAAW,CAACG,CAAC,CAAC,CAACM,QAAQ,EAAI,CAAEC,YAAY,CAAE,MAAM,CAAEf,OAAQ,CAAC,CAAC,CAC9H,KAAM,CAAAgB,KAAK,CAAGC,GAAG,CAACC,eAAe,CAACP,aAAa,CAACQ,IAAI,CAAC,CACrD,GAAId,WAAW,CAACG,CAAC,CAAC,CAAChB,OAAO,GAAKA,OAAO,CAAE,CACpCU,IAAI,CAACkB,IAAI,CAAC,CACNC,SAAS,CAAEhB,WAAW,CAACG,CAAC,CAAC,CAACM,QAAQ,CAClCtB,OAAO,CAAEa,WAAW,CAACG,CAAC,CAAC,CAAChB,OAAO,CAC/B8B,KAAK,CAAEjB,WAAW,CAACG,CAAC,CAAC,CAACc,KAAK,CAC3BN,KAAK,CAAEA,KACX,CAAC,CAAC,CACN,CACJ,CACJ,CACA3B,QAAQ,CAACa,IAAI,CAAC,CAEd,GAAI,CACA,KAAM,CAAAqB,QAAQ,CAAG,KAAM,CAAAlD,KAAK,CAACuC,GAAG,IAAAC,MAAA,CAAIhC,OAAO,qBAAoB,CAC3DmB,OAAO,CAAEA,OAAO,CAChBwB,MAAM,CAAE,CACJH,SAAS,CAAEnB,IAAI,CAAC,CAAC,CAAC,CAACmB,SAAS,CAC5BtB,cAAc,CAAEA,cACpB,CACJ,CAAC,CAAC,CACF,GAAI,CAAAT,QAAQ,CAAGiC,QAAQ,CAACJ,IAAI,CAC5B7C,eAAe,CAACgB,QAAQ,CAAC,CACzB;AAEA,IAAK,GAAI,CAAAkB,CAAC,CAAG,CAAC,CAAEA,CAAC,CAAGlB,QAAQ,CAACmB,MAAM,CAAED,CAAC,EAAE,CAAE,CACtC,GAAIT,cAAc,EAAIT,QAAQ,CAACkB,CAAC,CAAC,CAACiB,OAAO,CAAC,CACtC,GAAI,CAAAC,EAAE,CAAG,SAAS,EAAIlB,CAAC,CAAC,CAAC,CAAC,CAC1BL,WAAW,CAACiB,IAAI,CAAC,CACjBE,KAAK,CAAEhC,QAAQ,CAACkB,CAAC,CAAC,CAACc,KAAK,CACxBK,KAAK,CAAErC,QAAQ,CAACkB,CAAC,CAAC,CAACmB,KAAK,CACxBC,SAAS,CAAEF,EACX,CAAC,CAAC,CACN,CACJ,CACAnC,WAAW,CAACY,WAAW,CAAC,CACxB;AACJ,CAAE,MAAO0B,KAAK,CAAE,CACZC,OAAO,CAACD,KAAK,CAAC,yBAAyB,CAAEA,KAAK,CAAC,CACnD,CACAnC,UAAU,CAAC,KAAK,CAAC,CACrB,CAAE,MAAOmC,KAAK,CAAE,CACZC,OAAO,CAACD,KAAK,CAAC,8BAA8B,CAAEA,KAAK,CAAC,CACxD,CACJ,CAAC,CAEDnE,SAAS,CAAC,IAAM,CACZ0C,QAAQ,CAAC,CAAC,CACd,CAAC,CAAE,CAACZ,OAAO,CAAEO,cAAc,CAAC,CAAC,CAG7B,KAAM,CAACgC,WAAW,CAAEC,cAAc,CAAC,CAAGvE,QAAQ,CAAC,CAAC,CAAC,CACjD,KAAM,CAAAwE,YAAY,CAAG,EAAE,CAAE;AACzB,KAAM,CAAAC,UAAU,CAAGC,IAAI,CAACC,IAAI,CAAC9C,QAAQ,CAACmB,MAAM,CAAGwB,YAAY,CAAC,CAE5D,KAAM,CAAAI,gBAAgB,CAAIC,IAAI,EAAK,CAC/BN,cAAc,CAACM,IAAI,CAAC,CACxB,CAAC,CAED;AACA,KAAM,CAAAC,UAAU,CAAG,CAACR,WAAW,CAAG,CAAC,EAAIE,YAAY,CACnD,KAAM,CAAAO,eAAe,CAAGlD,QAAQ,CAACmD,KAAK,CAACF,UAAU,CAAEA,UAAU,CAAGN,YAAY,CAAC,CAE7E,KAAM,CAAAS,YAAY,CAAGA,CAAA,GAAM,CACvB,KAAM,CAAAC,SAAS,CAAG,EAAE,CACpB,KAAM,CAAAC,cAAc,CAAG,CAAC,CAAE;AAE1B,GAAIV,UAAU,EAAIU,cAAc,CAAE,CAC9B;AACA,IAAK,GAAI,CAAApC,CAAC,CAAG,CAAC,CAAEA,CAAC,EAAI0B,UAAU,CAAE1B,CAAC,EAAE,CAAE,CAClCmC,SAAS,CAACvB,IAAI,cACV5C,IAAA,CAACN,UAAU,CAAC2E,IAAI,EAASC,MAAM,CAAEtC,CAAC,GAAKuB,WAAY,CAACgB,OAAO,CAAEA,CAAA,GAAMV,gBAAgB,CAAC7B,CAAC,CAAE,CAAAwC,QAAA,CAClFxC,CAAC,EADgBA,CAEL,CACrB,CAAC,CACL,CACJ,CAAC,IAAM,CACH;AACA,KAAM,CAAAyC,WAAW,CAAGd,IAAI,CAACe,KAAK,CAACN,cAAc,CAAG,CAAC,CAAC,CAClD,GAAI,CAAAO,SAAS,CAAGhB,IAAI,CAACiB,GAAG,CAAC,CAAC,CAAErB,WAAW,CAAGkB,WAAW,CAAC,CACtD,GAAI,CAAAI,OAAO,CAAGlB,IAAI,CAACmB,GAAG,CAACpB,UAAU,CAAG,CAAC,CAAEH,WAAW,CAAGkB,WAAW,CAAC,CAEjE,GAAIlB,WAAW,CAAGoB,SAAS,EAAIF,WAAW,CAAE,CACxCI,OAAO,CAAGlB,IAAI,CAACmB,GAAG,CAACpB,UAAU,CAAG,CAAC,CAAEiB,SAAS,CAAGP,cAAc,CAAG,CAAC,CAAC,CACtE,CAEA,GAAIS,OAAO,CAAGtB,WAAW,EAAIkB,WAAW,CAAE,CACtCE,SAAS,CAAGhB,IAAI,CAACiB,GAAG,CAAC,CAAC,CAAEC,OAAO,CAAGT,cAAc,CAAG,CAAC,CAAC,CACzD,CAEA;AACAD,SAAS,CAACvB,IAAI,cACV5C,IAAA,CAACN,UAAU,CAAC2E,IAAI,EAASC,MAAM,CAAEf,WAAW,GAAK,CAAE,CAACgB,OAAO,CAAEA,CAAA,GAAMV,gBAAgB,CAAC,CAAC,CAAE,CAAAW,QAAA,CAAC,GAExF,EAFsB,CAEL,CACrB,CAAC,CAED,GAAIG,SAAS,CAAG,CAAC,CAAE,CACfR,SAAS,CAACvB,IAAI,cAAC5C,IAAA,CAACN,UAAU,CAACqF,QAAQ,IAAK,gBAAkB,CAAC,CAAC,CAChE,CAEA;AACA,IAAK,GAAI,CAAA/C,CAAC,CAAG2C,SAAS,CAAE3C,CAAC,EAAI6C,OAAO,CAAE7C,CAAC,EAAE,CAAE,CACvCmC,SAAS,CAACvB,IAAI,cACV5C,IAAA,CAACN,UAAU,CAAC2E,IAAI,EAASC,MAAM,CAAEtC,CAAC,GAAKuB,WAAY,CAACgB,OAAO,CAAEA,CAAA,GAAMV,gBAAgB,CAAC7B,CAAC,CAAE,CAAAwC,QAAA,CAClFxC,CAAC,EADgBA,CAEL,CACrB,CAAC,CACL,CAEA,GAAI6C,OAAO,CAAGnB,UAAU,CAAG,CAAC,CAAE,CAC1BS,SAAS,CAACvB,IAAI,cAAC5C,IAAA,CAACN,UAAU,CAACqF,QAAQ,IAAK,cAAgB,CAAC,CAAC,CAC9D,CAEA;AACAZ,SAAS,CAACvB,IAAI,cACV5C,IAAA,CAACN,UAAU,CAAC2E,IAAI,EAAkBC,MAAM,CAAEf,WAAW,GAAKG,UAAW,CAACa,OAAO,CAAEA,CAAA,GAAMV,gBAAgB,CAACH,UAAU,CAAE,CAAAc,QAAA,CAC7Gd,UAAU,EADOA,UAEL,CACrB,CAAC,CACL,CAEA,MAAO,CAAAS,SAAS,CACpB,CAAC,CAED,mBACInE,IAAA,CAAAI,SAAA,EAAAoE,QAAA,cACItE,KAAA,QAAAsE,QAAA,EACK,CAACvD,OAAO,eACLf,KAAA,CAACb,SAAS,EAAC2F,SAAS,CAAC,aAAa,CAAAR,QAAA,eAE9BxE,IAAA,CAACT,GAAG,EAACyF,SAAS,CAAC,MAAM,CAAAR,QAAA,cACjBtE,KAAA,CAACf,IAAI,EAAC8F,EAAE,iBAAA5C,MAAA,CAAkBzB,KAAK,CAAC,CAAC,CAAC,CAACI,OAAO,CAAG,CAAAwD,QAAA,eACzCxE,IAAA,QAAKgF,SAAS,CAAC,yDAAyD,CAAAR,QAAA,cACpExE,IAAA,QACIgF,SAAS,CAAC,wBAAwB,CAClCE,GAAG,CAAEtE,KAAK,CAAC,CAAC,CAAC,CAAC4B,KAAM,CACpB2C,GAAG,CAAC,SAAS,CAChB,CAAC,CACD,CAAC,cACNnF,IAAA,OAAIgF,SAAS,CAAC,kBAAkB,CAAAR,QAAA,CAAE5D,KAAK,CAAC,CAAC,CAAC,CAACkC,KAAK,CAAK,CAAC,EACpD,CAAC,CACN,CAAC,cACN9C,IAAA,CAACT,GAAG,EAACyF,SAAS,CAAC,4BAA4B,CAAAR,QAAA,cACvCtE,KAAA,CAACZ,GAAG,EAAC0F,SAAS,CAAC,EAAE,CAAAR,QAAA,eACbtE,KAAA,QAAK8E,SAAS,CAAC,mDAAmD,CAAAR,QAAA,eAC9DxE,IAAA,OAAIgF,SAAS,CAAC,cAAc,CAAAR,QAAA,CAAErD,CAAC,CAAC,MAAM,CAAC,CAAK,CAAC,cAC7CnB,IAAA,MAAGgF,SAAS,CAAC,eAAe,CAAAR,QAAA,CAAErD,CAAC,CAAC,QAAQ,CAAC,CAAI,CAAC,EAC7C,CAAC,cACNnB,IAAA,QAAI,CAAC,EACJ,CAAC,CACL,CAAC,cACNA,IAAA,CAACT,GAAG,EAACyF,SAAS,CAAC,wBAAwB,CAAAR,QAAA,cACnCxE,IAAA,CAACV,GAAG,EAAC0F,SAAS,CAAC,6CAA6C,CAAAR,QAAA,cACxDxE,IAAA,CAACR,KAAK,EAAC4F,IAAI,CAAC,IAAI,CAAAZ,QAAA,cACZxE,IAAA,UAAAwE,QAAA,CACKR,eAAe,CAACqB,GAAG,CAAC,CAACC,OAAO,CAAEC,KAAK,gBAChCrF,KAAA,OAAAsE,QAAA,eACIxE,IAAA,OAAIgF,SAAS,CAAC,qBAAqB,CAAAR,QAAA,CAAErD,CAAC,CAAC,KAAK,CAAE,CAAEmE,OAAO,CAAEvB,UAAU,CAAGwB,KAAK,CAAG,CAAE,CAAC,CAAC,CAAK,CAAC,cACxFvF,IAAA,OAAIgF,SAAS,CAAC,aAAa,CAAAR,QAAA,CAAEc,OAAO,CAACxC,KAAK,CAAK,CAAC,cAChD9C,IAAA,OAAIgF,SAAS,CAAC,aAAa,CAAAR,QAAA,CAAEc,OAAO,CAACnC,KAAK,CAAK,CAAC,cAChDnD,IAAA,OAAIgF,SAAS,CAAC,aAAa,CAAAR,QAAA,cACvBxE,IAAA,CAACb,IAAI,EACD8F,EAAE,CAAE,WAAY,CAChBO,KAAK,CAAE,CACHC,eAAe,CAAE,IAAI,CACrBzE,OAAO,CAAEJ,KAAK,CAACqB,MAAM,CAAG,CAAC,CAAGrB,KAAK,CAAC,CAAC,CAAC,CAACI,OAAO,CAAG,IAAI,CACnDoC,SAAS,CAAEtC,QAAQ,CAACmB,MAAM,CAAG,CAAC,CAAGqD,OAAO,CAAClC,SAAS,CAAG,IACzD,CAAE,CAAAoB,QAAA,cAEFxE,IAAA,WAAQgF,SAAS,CAAC,KAAK,CAAAR,QAAA,CAAErD,CAAC,CAAC,IAAI,CAAC,CAAS,CAAC,CACxC,CAAC,CACP,CAAC,GAfAoE,KAgBL,CACP,CAAC,CACC,CAAC,CACL,CAAC,CACP,CAAC,CACL,CAAC,cACNvF,IAAA,CAACT,GAAG,EAACyF,SAAS,CAAC,+CAA+C,CAAAR,QAAA,cAC1DxE,IAAA,CAACV,GAAG,EAAC0F,SAAS,CAAC,+BAA+B,CAAAR,QAAA,cAC1CxE,IAAA,CAACP,aAAa,EAAC,aAAW,yBAAyB,CAAA+E,QAAA,cAC/CtE,KAAA,CAACR,UAAU,EAAA8E,QAAA,eACPxE,IAAA,CAACN,UAAU,CAACgG,IAAI,EACZnB,OAAO,CAAEA,CAAA,GAAMV,gBAAgB,CAACN,WAAW,CAAG,CAAC,CAAE,CAACoC,QAAQ,CAAEpC,WAAW,EAAI,CAAE,CAC7EyB,SAAS,CAAC,mBAAmB,CAChC,CAAC,CACDd,YAAY,CAAC,CAAC,cACflE,IAAA,CAACN,UAAU,CAACkG,IAAI,EACZrB,OAAO,CAAEA,CAAA,GAAMV,gBAAgB,CAACN,WAAW,CAAG,CAAC,CAAE,CAACoC,QAAQ,CAAEpC,WAAW,EAAIG,UAAW,CACtFsB,SAAS,CAAC,mBAAmB,CAChC,CAAC,EACM,CAAC,CACF,CAAC,CACf,CAAC,CACL,CAAC,EAEC,CAAC,CAEf/D,OAAO,eACJjB,IAAA,QAAKgF,SAAS,CAAC,mBAAmB,CAAAR,QAAA,cAC9BxE,IAAA,QAAAwE,QAAA,CAAMrD,CAAC,CAAC,OAAO,CAAC,CAAM,CAAC,CACtB,CAAC,EAET,CAAC,CACR,CAAC,CAEX,CAEA,cAAe,CAAAR,WAAW","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}