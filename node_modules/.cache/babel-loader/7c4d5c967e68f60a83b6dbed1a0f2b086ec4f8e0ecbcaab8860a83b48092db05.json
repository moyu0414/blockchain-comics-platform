{"ast":null,"code":"import React,{useState,useEffect,useRef}from'react';import{Container,Row,Col,Form,Button,Modal}from'react-bootstrap';import{CardImage}from'react-bootstrap-icons';import{useNavigate}from'react-router-dom';import{message}from'antd';import html2canvas from'html2canvas';import{initializeWeb3,disableAllButtons,enableAllButtons}from'../index';import comicData from'../contracts/ComicPlatform.json';import{useTranslation}from'react-i18next';import i18n from'../i18n';import axios from'axios';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const website=process.env.REACT_APP_Website;const API_KEY=process.env.REACT_APP_API_KEY;const VerifyPage=()=>{const[formData,setFormData]=useState({name:'',penName:'',email:'',account:''});const[account,setAccount]=useState('');const[isButtonDisabled,setIsButtonDisabled]=useState(false);const[secondsLeft,setSecondsLeft]=useState(0);const[file,setFile]=useState([]);const[previewImg,setPreviewImg]=useState('');const[ipAddress,setIpAddress]=useState('');const[info,setInfo]=useState({version:'',ip:'',deviceInfo:'',timestamp:''});const[termsContent,setTermsContent]=useState('');const[showModal,setShowModal]=useState(false);const inputRefs=useRef([]);const{t}=useTranslation();const language=localStorage.getItem('language')||i18n.language;const headers={'api-key':API_KEY};useEffect(()=>{const fetchIPAddress=async()=>{const web3=await initializeWeb3(t);if(!web3){return;}const web3Instance=new web3.eth.Contract(comicData.abi,comicData.address);const accounts=await web3.eth.getAccounts();if(accounts[0]){const currentAccount=accounts[0].toLowerCase();setAccount(currentAccount);const isCreator=await axios.get(\"\".concat(website,\"/api/isCreator\"),{headers:headers,params:{currentAccount:currentAccount}});if(isCreator.data[0].is_creator===3){alert(t('您已被本平台禁用使用者權限！'));window.location.replace('/');}else if(isCreator.data[0].is_creator===1){alert(t('您已擁有使用者權限！'));window.location.replace('/readerPage');}else if(isCreator.data[0].is_creator===2){alert(t('管理者審核中，請稍後在試！'));window.location.replace('/readerPage');}try{const response=await axios.get(\"\".concat(website,\"/api/getIP\"),{headers});const getDeviceInfo=()=>({userAgent:navigator.userAgent,platform:navigator.platform});setInfo({version:'1.0',ip:response.data.ip,deviceInfo:JSON.stringify(getDeviceInfo()),timestamp:new Date().toISOString()});setShowModal(true);}catch(error){alert('Error fetching IP address: '+error);}}else{message.info(t('請先登入以太坊錢包，才開放創作者認證'));return;}};fetchIPAddress();},[account]);const TermsModal=_ref=>{let{onAccept}=_ref;const[checked,setChecked]=useState(false);const navigate=useNavigate();const modalBodyRef=useRef(null);const handleAccept=async()=>{if(checked){try{const termsIMG=await axios.get(\"\".concat(website,\"/api/termsIMG/\").concat(info.version,\"/\").concat(language),{headers});setShowModal(false);if(!termsIMG.data.state){modalBodyRef.current.style.overflowY='visible';modalBodyRef.current.style.maxHeight='none';const canvas=await html2canvas(modalBodyRef.current);const imgData=canvas.toDataURL('image/png');const byteString=atob(imgData.split(',')[1]);const mimeString=imgData.split(',')[0].split(':')[1].split(';')[0];const ab=new Uint8Array(byteString.length);for(let i=0;i<byteString.length;i++){ab[i]=byteString.charCodeAt(i);}const blob=new Blob([ab],{type:mimeString});const formData=new FormData();formData.append('termsIMG',blob,'terms_image.png');formData.append('version',info.version);formData.append('language',language);const response=await axios.post(\"\".concat(website,\"/api/terms-version\"),formData,{headers});if(!response.data.state){console.error('Failed to upload terms image.');}}}catch(error){console.error('Error capturing modal or uploading:',error);}}else{message.info(t('請同意平台的使用條款，才能進行帳號驗證!'));}};const handleReject=()=>{setShowModal(false);navigate('/readerPage');};return/*#__PURE__*/_jsxs(Modal,{show:showModal,onHide:handleReject,centered:true,dialogClassName:\"verify-custom-modal\",children:[/*#__PURE__*/_jsx(Modal.Header,{closeButton:true,children:/*#__PURE__*/_jsxs(Modal.Title,{children:[/*#__PURE__*/_jsx(\"b\",{children:\"web3toon\"}),\" \",t('使用條款')]})}),/*#__PURE__*/_jsxs(Modal.Body,{ref:modalBodyRef,children:[/*#__PURE__*/_jsxs(\"p\",{children:[t('歡迎使用'),\" \",/*#__PURE__*/_jsx(\"b\",{children:\"web3toon\"}),\" \",t('前言')]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"1. **\",t('服務內容'),\"**\"]}),/*#__PURE__*/_jsx(\"p\",{children:t('服務內容_條款')}),/*#__PURE__*/_jsxs(\"p\",{children:[\"2. **\",t('使用者責任'),\"**\"]}),/*#__PURE__*/_jsx(\"p\",{children:t('使用者責任_條款')}),/*#__PURE__*/_jsx(\"p\",{children:t('使用者責任_條款_1')}),/*#__PURE__*/_jsxs(\"p\",{children:[\"3. **\",t('知識產權'),\"**\"]}),/*#__PURE__*/_jsx(\"p\",{children:t('知識產權_條款')}),/*#__PURE__*/_jsxs(\"p\",{children:[\"4. **\",t('隱私政策'),\"**\"]}),/*#__PURE__*/_jsx(\"p\",{children:t('隱私政策_條款')}),/*#__PURE__*/_jsxs(\"p\",{children:[\"5. **\",t('盜版及非法作品處理'),\"**\"]}),/*#__PURE__*/_jsx(\"p\",{children:t('盜版及非法作品處理_條款')}),/*#__PURE__*/_jsx(\"p\",{children:t('盜版及非法作品處理_條款_1')}),/*#__PURE__*/_jsxs(\"p\",{children:[\"6. **\",t('責任免除'),\"**\"]}),/*#__PURE__*/_jsx(\"p\",{children:t('責任免除_條款')}),/*#__PURE__*/_jsxs(\"p\",{children:[\"7. **\",t('條款變更'),\"**\"]}),/*#__PURE__*/_jsx(\"p\",{children:t('條款變更_條款')}),/*#__PURE__*/_jsxs(\"p\",{children:[\"8. **\",t('爭議解決'),\"**\"]}),/*#__PURE__*/_jsx(\"p\",{children:t('爭議解決_條款')}),/*#__PURE__*/_jsxs(\"p\",{children:[\"9. **\",t('其他'),\"**\"]}),/*#__PURE__*/_jsx(\"p\",{children:t('其他_條款')}),/*#__PURE__*/_jsx(Form.Group,{className:\"mb-3\",children:/*#__PURE__*/_jsx(Form.Check,{type:\"checkbox\",label:t('我同意上述的使用條款'),checked:checked,onChange:()=>setChecked(!checked)})})]}),/*#__PURE__*/_jsxs(Modal.Footer,{children:[/*#__PURE__*/_jsx(Button,{variant:\"secondary\",onClick:handleReject,children:t('拒絕')}),/*#__PURE__*/_jsx(Button,{variant:\"primary\",onClick:handleAccept,children:t('接受')})]})]});};const handleChange=e=>{setFormData({...formData,[e.target.name]:e.target.value});};const isFormComplete=()=>{return formData.name&&formData.penName&&formData.email&&file.length!==0;};const isComplete=()=>{const verificationCode=inputRefs.current.map(input=>input.value).join('');return formData.name&&formData.penName&&formData.email&&file.length!==0&&verificationCode.length===6;};const handleSubmit=async e=>{e.preventDefault();if(formData.penName.length>30){message.info(t('筆名不可超過30字！'));return;};try{const updatedFormData={...formData,account:account,version:info.version,filename:\"\".concat(language,\".jpg\")};const response=await axios.post(\"\".concat(website,\"/api/send-verification-email\"),updatedFormData,{headers});if(response.data.state){message.info(t('驗證碼15分鐘內有效!'));startCountdown();}else{message.info(t('email發送錯誤，請重新再試!'));}}catch(error){console.error('Mailbox verification error:',error);}};const startCountdown=()=>{setIsButtonDisabled(true);setSecondsLeft(60);const interval=setInterval(()=>{setSecondsLeft(prev=>{if(prev<=1){clearInterval(interval);setIsButtonDisabled(false);return 0;}return prev-1;});},1000);};const handleInputChange=(e,index)=>{// 確保每個輸入框的參考數組都有對應的值\nconst inputs=inputRefs.current;// 移動到下一個輸入框\nif(e.target.value.length===1&&index<inputs.length-1){inputs[index+1].focus();}// 防止用戶刪除輸入內容時焦點不會回到前一個輸入框\nif(e.target.value.length===0&&index>0){inputs[index-1].focus();}};const handleClick=async()=>{try{const verificationCode=inputRefs.current.map(input=>input.value).join('');const formData=new FormData();formData.append('creatorIMG',file);formData.append('token',verificationCode);formData.append('account',account);formData.append('terms',JSON.stringify(info));const response=await axios.post(\"\".concat(website,\"/api/verify-email\"),formData,{headers});let state=response.data.state;if(state){disableAllButtons();window.location.replace(\"/verifySuccess\");}else{message.info(t('驗證失敗，請重新再試！'));}enableAllButtons();}catch(error){console.error('Verify email error:',error);}};const previewPromoCover=file=>{const reader=new FileReader();reader.readAsDataURL(file);reader.onloadend=()=>{setPreviewImg(reader.result);};};const handleFileChange=event=>{const file=event.target.files[0];if(!file){setPreviewImg('');return;}if(validateFileType(file)){setFile(file);previewPromoCover(file);}else{message.info(t('文件類型不支持，請上傳...格式的圖片'));return-1;}};const validateFileType=file=>{const allowedTypes=[\"image/jpeg\",\"image/png\",\"image/jpg\"];return allowedTypes.includes(file.type);};return/*#__PURE__*/_jsx(Container,{className:\"verifyPage\",children:/*#__PURE__*/_jsx(Row,{className:\"justify-content-center\",children:/*#__PURE__*/_jsxs(Col,{xs:12,md:8,children:[/*#__PURE__*/_jsxs(Form.Group,{controlId:\"file-upload\",className:\"pt-4 pb-3\",children:[showModal&&/*#__PURE__*/_jsx(TermsModal,{onAccept:()=>setShowModal(false)}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex'},children:[/*#__PURE__*/_jsx(Form.Label,{className:\"label-style col-form-label\",style:{marginRight:'1rem'},children:t('個人封面')}),/*#__PURE__*/_jsx(Form.Control,{type:\"file\",style:{flex:1,marginBottom:'1rem'},onChange:handleFileChange})]}),/*#__PURE__*/_jsx(\"div\",{className:\"file-upload\",children:previewImg?/*#__PURE__*/_jsx(\"div\",{className:\"profile-section\",children:/*#__PURE__*/_jsx(\"img\",{src:previewImg,alt:\"Cover Preview\"})}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(CardImage,{size:48}),/*#__PURE__*/_jsx(\"div\",{id:\"notimage2\",className:\"hidden\",children:t('上傳個人封面')})]})})]}),/*#__PURE__*/_jsxs(Form.Group,{controlId:\"formRealName\",className:\"mb-3\",children:[/*#__PURE__*/_jsx(Form.Label,{children:t('真實姓名')}),/*#__PURE__*/_jsx(Form.Control,{type:\"text\",name:\"name\",value:formData.name,onChange:handleChange,placeholder:t('請輸入真實姓名')})]}),/*#__PURE__*/_jsxs(Form.Group,{controlId:\"formPenName\",className:\"mb-3\",children:[/*#__PURE__*/_jsx(Form.Label,{children:t('筆名（30字以內）')}),/*#__PURE__*/_jsx(Form.Control,{type:\"text\",name:\"penName\",value:formData.penName,onChange:handleChange,placeholder:t('請輸入創作者筆名')})]}),/*#__PURE__*/_jsxs(Form.Group,{controlId:\"formEmail\",className:\"mb-3\",children:[/*#__PURE__*/_jsx(Form.Label,{children:t('電子郵件')}),/*#__PURE__*/_jsx(Form.Control,{type:\"email\",name:\"email\",value:formData.email,onChange:handleChange,placeholder:t('請輸入電子郵件')})]}),/*#__PURE__*/_jsx(Button,{onClick:handleSubmit,className:\"mb-5 float-end\",variant:isFormComplete()?'success':'secondary',disabled:!isFormComplete()||isButtonDisabled,children:t('信箱驗證')}),/*#__PURE__*/_jsxs(Form.Group,{controlId:\"formVerificationCode\",className:\" mb-3\",children:[isButtonDisabled&&/*#__PURE__*/_jsx(\"p\",{className:\"mt-4 \",style:{marginBottom:\"-10px\"},children:t('60秒後再啟動按鈕-幾秒',{secondsLeft:secondsLeft})}),/*#__PURE__*/_jsx(Form.Label,{className:\"verification\",children:t('信箱驗證碼')}),/*#__PURE__*/_jsx(\"div\",{className:\"verification-code-inputs w-100\",children:[...Array(6)].map((_,index)=>/*#__PURE__*/_jsx(Form.Control,{type:\"text\",maxLength:\"1\",className:\"verification-code-input\",ref:el=>inputRefs.current[index]=el,onChange:e=>handleInputChange(e,index)},index))})]}),/*#__PURE__*/_jsx(\"div\",{className:\"verification-btn-section mt-4 w-100\",children:/*#__PURE__*/_jsx(Button,{onClick:handleClick,variant:isComplete()?'success':'secondary',disabled:!isComplete(),className:\"verify-btn\",children:t('驗證')})})]})})});};export default VerifyPage;","map":{"version":3,"names":["React","useState","useEffect","useRef","Container","Row","Col","Form","Button","Modal","CardImage","useNavigate","message","html2canvas","initializeWeb3","disableAllButtons","enableAllButtons","comicData","useTranslation","i18n","axios","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","website","process","env","REACT_APP_Website","API_KEY","REACT_APP_API_KEY","VerifyPage","formData","setFormData","name","penName","email","account","setAccount","isButtonDisabled","setIsButtonDisabled","secondsLeft","setSecondsLeft","file","setFile","previewImg","setPreviewImg","ipAddress","setIpAddress","info","setInfo","version","ip","deviceInfo","timestamp","termsContent","setTermsContent","showModal","setShowModal","inputRefs","t","language","localStorage","getItem","headers","fetchIPAddress","web3","web3Instance","eth","Contract","abi","address","accounts","getAccounts","currentAccount","toLowerCase","isCreator","get","concat","params","data","is_creator","alert","window","location","replace","response","getDeviceInfo","userAgent","navigator","platform","JSON","stringify","Date","toISOString","error","TermsModal","_ref","onAccept","checked","setChecked","navigate","modalBodyRef","handleAccept","termsIMG","state","current","style","overflowY","maxHeight","canvas","imgData","toDataURL","byteString","atob","split","mimeString","ab","Uint8Array","length","i","charCodeAt","blob","Blob","type","FormData","append","post","console","handleReject","show","onHide","centered","dialogClassName","children","Header","closeButton","Title","Body","ref","Group","className","Check","label","onChange","Footer","variant","onClick","handleChange","e","target","value","isFormComplete","isComplete","verificationCode","map","input","join","handleSubmit","preventDefault","updatedFormData","filename","startCountdown","interval","setInterval","prev","clearInterval","handleInputChange","index","inputs","focus","handleClick","previewPromoCover","reader","FileReader","readAsDataURL","onloadend","result","handleFileChange","event","files","validateFileType","allowedTypes","includes","xs","md","controlId","display","Label","marginRight","Control","flex","marginBottom","src","alt","size","id","placeholder","disabled","Array","_","maxLength","el"],"sources":["C:/Users/user1/Desktop/blockchain-comics-platform/frontend/src/routes/verifyPage.js"],"sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\r\nimport { Container, Row, Col, Form, Button, Modal } from 'react-bootstrap';\r\nimport { CardImage } from 'react-bootstrap-icons';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport { message } from 'antd';\r\nimport html2canvas from 'html2canvas';\r\nimport { initializeWeb3, disableAllButtons, enableAllButtons } from '../index';\r\nimport comicData from '../contracts/ComicPlatform.json';\r\nimport { useTranslation } from 'react-i18next';\r\nimport i18n from '../i18n';\r\nimport axios from 'axios';\r\nconst website = process.env.REACT_APP_Website;\r\nconst API_KEY = process.env.REACT_APP_API_KEY;\r\n\r\nconst VerifyPage = () => {\r\n    const [formData, setFormData] = useState({name: '', penName: '', email: '', account: ''});\r\n    const [account, setAccount] = useState('');\r\n    const [isButtonDisabled, setIsButtonDisabled] = useState(false);\r\n    const [secondsLeft, setSecondsLeft] = useState(0);\r\n    const [file, setFile] = useState([]);\r\n    const [previewImg, setPreviewImg] = useState('');\r\n    const [ipAddress, setIpAddress] = useState('');\r\n    const [info, setInfo] = useState({ version: '', ip: '', deviceInfo: '', timestamp: '' });\r\n    const [termsContent, setTermsContent] = useState('');\r\n    const [showModal, setShowModal] = useState(false);\r\n    const inputRefs = useRef([]);\r\n    const { t } = useTranslation();\r\n    const language = localStorage.getItem('language') || i18n.language;\r\n    const headers = {'api-key': API_KEY};\r\n\r\n    useEffect(() => {\r\n        const fetchIPAddress = async () => {\r\n            const web3 = await initializeWeb3(t);\r\n            if (!web3) {\r\n                return;\r\n            }\r\n            const web3Instance = new web3.eth.Contract(comicData.abi, comicData.address);\r\n            const accounts = await web3.eth.getAccounts();\r\n            if (accounts[0]) {\r\n                const currentAccount = accounts[0].toLowerCase()\r\n                setAccount(currentAccount);\r\n                const isCreator = await axios.get(`${website}/api/isCreator`, {\r\n                    headers: headers,\r\n                    params: {\r\n                        currentAccount: currentAccount\r\n                    }\r\n                });\r\n                if (isCreator.data[0].is_creator === 3) {\r\n                    alert(t('您已被本平台禁用使用者權限！'));\r\n                    window.location.replace('/');\r\n                } else if (isCreator.data[0].is_creator === 1) {\r\n                    alert(t('您已擁有使用者權限！'));\r\n                    window.location.replace('/readerPage');\r\n                } else if (isCreator.data[0].is_creator === 2) {\r\n                    alert(t('管理者審核中，請稍後在試！'));\r\n                    window.location.replace('/readerPage');\r\n                }\r\n                try {\r\n                    const response = await axios.get(`${website}/api/getIP`, { headers });\r\n                    const getDeviceInfo = () => ({\r\n                        userAgent: navigator.userAgent,\r\n                        platform: navigator.platform,\r\n                    });\r\n                    setInfo({\r\n                        version: '1.0',\r\n                        ip: response.data.ip,\r\n                        deviceInfo: JSON.stringify(getDeviceInfo()),\r\n                        timestamp: new Date().toISOString(),\r\n                    });\r\n                    setShowModal(true);\r\n                } catch (error) {\r\n                    alert('Error fetching IP address: ' + error);\r\n                }\r\n            } else {\r\n                message.info(t('請先登入以太坊錢包，才開放創作者認證'));\r\n                return;\r\n            }\r\n        };\r\n\r\n        fetchIPAddress();\r\n    }, [account]);\r\n\r\n    const TermsModal = ({ onAccept }) => {\r\n        const [checked, setChecked] = useState(false);\r\n        const navigate = useNavigate();\r\n        const modalBodyRef = useRef(null);\r\n        const handleAccept = async () => {\r\n            if (checked) {\r\n                try {\r\n                    const termsIMG = await axios.get(`${website}/api/termsIMG/${info.version}/${language}`, {headers});\r\n                    setShowModal(false);\r\n                    if (!termsIMG.data.state) {\r\n                        modalBodyRef.current.style.overflowY = 'visible';\r\n                        modalBodyRef.current.style.maxHeight = 'none';\r\n                        const canvas = await html2canvas(modalBodyRef.current);\r\n                        const imgData = canvas.toDataURL('image/png');\r\n                        const byteString = atob(imgData.split(',')[1]);\r\n                        const mimeString = imgData.split(',')[0].split(':')[1].split(';')[0];\r\n                        const ab = new Uint8Array(byteString.length);\r\n                        for (let i = 0; i < byteString.length; i++) {\r\n                            ab[i] = byteString.charCodeAt(i);\r\n                        }\r\n                        const blob = new Blob([ab], { type: mimeString });\r\n                        const formData = new FormData();\r\n                        formData.append('termsIMG', blob, 'terms_image.png');\r\n                        formData.append('version', info.version);\r\n                        formData.append('language', language);\r\n            \r\n                        const response = await axios.post(`${website}/api/terms-version`, formData, { headers });\r\n                        if (!response.data.state) {\r\n                            console.error('Failed to upload terms image.');\r\n                        }\r\n                    }\r\n                } catch (error) {\r\n                    console.error('Error capturing modal or uploading:', error);\r\n                }\r\n            } else {\r\n                message.info(t('請同意平台的使用條款，才能進行帳號驗證!'));\r\n            }\r\n        };\r\n        const handleReject = () => {\r\n            setShowModal(false);\r\n            navigate('/readerPage');\r\n        };\r\n        return (\r\n            <Modal show={showModal} onHide={handleReject} centered dialogClassName=\"verify-custom-modal\">\r\n                <Modal.Header closeButton>\r\n                    <Modal.Title>\r\n                    <b>web3toon</b> {t('使用條款')}\r\n                    </Modal.Title>\r\n                </Modal.Header>\r\n                <Modal.Body ref={modalBodyRef}>\r\n                    <p>{t('歡迎使用')} <b>web3toon</b> {t('前言')}</p>\r\n                    <p>1. **{t('服務內容')}**</p>\r\n                    <p>{t('服務內容_條款')}</p>\r\n                    <p>2. **{t('使用者責任')}**</p>\r\n                    <p>{t('使用者責任_條款')}</p>\r\n                    <p>{t('使用者責任_條款_1')}</p>\r\n                    <p>3. **{t('知識產權')}**</p>\r\n                    <p>{t('知識產權_條款')}</p>\r\n                    <p>4. **{t('隱私政策')}**</p>\r\n                    <p>{t('隱私政策_條款')}</p>\r\n                    <p>5. **{t('盜版及非法作品處理')}**</p>\r\n                    <p>{t('盜版及非法作品處理_條款')}</p>\r\n                    <p>{t('盜版及非法作品處理_條款_1')}</p>\r\n                    <p>6. **{t('責任免除')}**</p>\r\n                    <p>{t('責任免除_條款')}</p>\r\n                    <p>7. **{t('條款變更')}**</p>\r\n                    <p>{t('條款變更_條款')}</p>\r\n                    <p>8. **{t('爭議解決')}**</p>\r\n                    <p>{t('爭議解決_條款')}</p>\r\n                    <p>9. **{t('其他')}**</p>\r\n                    <p>{t('其他_條款')}</p>\r\n                    <Form.Group className=\"mb-3\">\r\n                    <Form.Check\r\n                        type=\"checkbox\"\r\n                        label={t('我同意上述的使用條款')}\r\n                        checked={checked}\r\n                        onChange={() => setChecked(!checked)}\r\n                    />\r\n                    </Form.Group>\r\n                </Modal.Body>\r\n                <Modal.Footer>\r\n                    <Button variant=\"secondary\" onClick={handleReject}>\r\n                    {t('拒絕')}\r\n                    </Button>\r\n                    <Button variant=\"primary\" onClick={handleAccept}>\r\n                    {t('接受')}\r\n                    </Button>\r\n                </Modal.Footer>\r\n            </Modal>\r\n        );\r\n    };\r\n\r\n    const handleChange = (e) => {\r\n        setFormData({\r\n            ...formData,\r\n            [e.target.name]: e.target.value\r\n        });\r\n    };\r\n\r\n    const isFormComplete = () => {\r\n        return formData.name && formData.penName && formData.email && file.length !== 0;\r\n    };\r\n\r\n    const isComplete = () => {\r\n        const verificationCode = inputRefs.current.map(input => input.value).join('');\r\n        return formData.name && formData.penName && formData.email && file.length !== 0 && verificationCode.length === 6;\r\n    };\r\n\r\n    const handleSubmit = async (e) => {\r\n        e.preventDefault();\r\n        if (formData.penName.length > 30) {\r\n            message.info(t('筆名不可超過30字！'));\r\n            return;\r\n        };\r\n        try {\r\n            const updatedFormData = { ...formData, account: account, version: info.version ,filename: `${language}.jpg` };\r\n            const response = await axios.post(`${website}/api/send-verification-email`, updatedFormData, { headers });\r\n            if (response.data.state) {\r\n                message.info(t('驗證碼15分鐘內有效!'))\r\n                startCountdown();\r\n            } else {\r\n                message.info(t('email發送錯誤，請重新再試!'))\r\n            }\r\n        } catch (error) {\r\n            console.error('Mailbox verification error:', error);\r\n        }\r\n    };\r\n\r\n    const startCountdown = () => {\r\n        setIsButtonDisabled(true);\r\n        setSecondsLeft(60);\r\n        const interval = setInterval(() => {\r\n            setSecondsLeft(prev => {\r\n                if (prev <= 1) {\r\n                    clearInterval(interval);\r\n                    setIsButtonDisabled(false);\r\n                    return 0;\r\n                }\r\n                return prev - 1;\r\n            });\r\n        }, 1000);\r\n    };\r\n\r\n    const handleInputChange = (e, index) => {\r\n        // 確保每個輸入框的參考數組都有對應的值\r\n        const inputs = inputRefs.current;\r\n\r\n        // 移動到下一個輸入框\r\n        if (e.target.value.length === 1 && index < inputs.length - 1) {\r\n        inputs[index + 1].focus();\r\n        }\r\n\r\n        // 防止用戶刪除輸入內容時焦點不會回到前一個輸入框\r\n        if (e.target.value.length === 0 && index > 0) {\r\n        inputs[index - 1].focus();\r\n        }\r\n    };\r\n\r\n    const handleClick = async () => {\r\n        try {\r\n            const verificationCode = inputRefs.current.map(input => input.value).join('');\r\n\r\n            const formData = new FormData();\r\n            formData.append('creatorIMG', file);\r\n            formData.append('token', verificationCode);\r\n            formData.append('account', account);\r\n            formData.append('terms', JSON.stringify(info));\r\n            const response = await axios.post(`${website}/api/verify-email`, formData, { headers });\r\n            \r\n            let state = response.data.state;\r\n            if (state) {\r\n                disableAllButtons();\r\n                window.location.replace(\"/verifySuccess\");\r\n            } else {\r\n                message.info(t('驗證失敗，請重新再試！'));\r\n            }\r\n            enableAllButtons();\r\n        } catch (error) {\r\n            console.error('Verify email error:', error);\r\n        }\r\n    };\r\n\r\n    const previewPromoCover = (file) => {\r\n        const reader = new FileReader();\r\n        reader.readAsDataURL(file);\r\n        reader.onloadend = () => {\r\n            setPreviewImg(reader.result);\r\n        };\r\n    };\r\n\r\n    const handleFileChange = (event) => {\r\n        const file = event.target.files[0];\r\n        if (!file) {\r\n            setPreviewImg('');\r\n            return;\r\n        }\r\n        if (validateFileType(file)) {\r\n            setFile(file);\r\n            previewPromoCover(file);\r\n        } else {\r\n            message.info(t('文件類型不支持，請上傳...格式的圖片'));\r\n            return -1;\r\n        }\r\n    };\r\n\r\n    const validateFileType = (file) => {\r\n        const allowedTypes = [\"image/jpeg\", \"image/png\", \"image/jpg\"];\r\n        return allowedTypes.includes(file.type);\r\n    };\r\n    \r\n    \r\n    return (\r\n        <Container className='verifyPage'>\r\n            <Row className=\"justify-content-center\">\r\n                <Col xs={12} md={8}>\r\n                    <Form.Group controlId=\"file-upload\" className='pt-4 pb-3'>\r\n                        {showModal && <TermsModal onAccept={() => setShowModal(false)} />}\r\n                        <div style={{ display: 'flex' }}>\r\n                            <Form.Label className='label-style col-form-label' style={{ marginRight: '1rem'}}>\r\n                                {t('個人封面')}\r\n                            </Form.Label>\r\n                            <Form.Control\r\n                                type=\"file\"\r\n                                style={{ flex: 1, marginBottom: '1rem' }}\r\n                                onChange={handleFileChange}\r\n                            />\r\n                        </div>\r\n                        <div className='file-upload'>\r\n                            {previewImg ? (\r\n                                <div className='profile-section'>\r\n                                    <img\r\n                                        src={previewImg}\r\n                                        alt=\"Cover Preview\"\r\n                                    />\r\n                                </div>\r\n                                \r\n                            ) : (\r\n                                <>\r\n                                    <CardImage size={48} />\r\n                                    <div id=\"notimage2\" className=\"hidden\">{t('上傳個人封面')}</div>\r\n                                </>\r\n                            )}\r\n                        </div>\r\n                    </Form.Group>\r\n\r\n                    <Form.Group controlId=\"formRealName\" className=\"mb-3\">\r\n                        <Form.Label>{t('真實姓名')}</Form.Label>\r\n                        <Form.Control\r\n                            type=\"text\"\r\n                            name=\"name\"\r\n                            value={formData.name}\r\n                            onChange={handleChange}\r\n                            placeholder={t('請輸入真實姓名')}\r\n                        />\r\n                    </Form.Group>\r\n\r\n                    <Form.Group controlId=\"formPenName\" className=\"mb-3\">\r\n                        <Form.Label>{t('筆名（30字以內）')}</Form.Label>\r\n                        <Form.Control\r\n                            type=\"text\"\r\n                            name=\"penName\"\r\n                            value={formData.penName}\r\n                            onChange={handleChange}\r\n                            placeholder={t('請輸入創作者筆名')}\r\n                        />\r\n                    </Form.Group>\r\n\r\n                    <Form.Group controlId=\"formEmail\" className=\"mb-3\">\r\n                        <Form.Label>{t('電子郵件')}</Form.Label>\r\n                        <Form.Control\r\n                            type=\"email\"\r\n                            name=\"email\"\r\n                            value={formData.email}\r\n                            onChange={handleChange}\r\n                            placeholder={t('請輸入電子郵件')}\r\n                        />\r\n                    </Form.Group>\r\n\r\n                    <Button\r\n                        onClick={handleSubmit}\r\n                        className=\"mb-5 float-end\"\r\n                        variant={isFormComplete() ? 'success' : 'secondary'}\r\n                        disabled={!isFormComplete()  || isButtonDisabled}\r\n                    >\r\n                        {t('信箱驗證')}\r\n                    </Button>\r\n\r\n                    <Form.Group controlId=\"formVerificationCode\" className=\" mb-3\">\r\n                        {isButtonDisabled && (\r\n                            <p className=\"mt-4 \" style={{ marginBottom: \"-10px\" }}>{t('60秒後再啟動按鈕-幾秒', { secondsLeft: secondsLeft })}</p>\r\n                        )}\r\n                        <Form.Label className=\"verification\">{t('信箱驗證碼')}</Form.Label>\r\n                        <div className=\"verification-code-inputs w-100\">\r\n                        {[...Array(6)].map((_, index) => (\r\n                            <Form.Control\r\n                            key={index}\r\n                            type=\"text\"\r\n                            maxLength=\"1\"\r\n                            className=\"verification-code-input\"\r\n                            ref={(el) => (inputRefs.current[index] = el)}\r\n                            onChange={(e) => handleInputChange(e, index)}\r\n                        />\r\n                        ))}\r\n                        </div>\r\n                    </Form.Group>\r\n\r\n                    <div className=\"verification-btn-section mt-4 w-100\">\r\n                        <Button \r\n                            onClick={handleClick}\r\n                            variant={isComplete() ? 'success' : 'secondary'}\r\n                            disabled={!isComplete()}\r\n                            className=\"verify-btn\"\r\n                        >{t('驗證')}</Button>\r\n                    </div>\r\n                </Col>\r\n            </Row>\r\n        </Container>\r\n    );\r\n};\r\n\r\nexport default VerifyPage;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}