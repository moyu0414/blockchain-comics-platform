{"ast":null,"code":"import React,{useState,useEffect,useRef}from'react';import{Link}from'react-router-dom';import{Form,Row,Col,Button,ProgressBar,Container}from'react-bootstrap';import Web3 from'web3';import{CardImage}from'react-bootstrap-icons';import{message}from'antd';import{disableAllButtons,enableAllButtons}from'../index';import comicData from'../contracts/ComicPlatform.json';import $ from'jquery';import{useLocation}from'react-router-dom';import{useTranslation}from'react-i18next';import i18n from'../i18n';import axios from'axios';import CryptoJS from'crypto-js';import{MdClose,MdDragHandle}from'react-icons/md';// 導入小叉叉圖標和拖曳圖標\nimport{DragDropContext,Draggable,Droppable}from'react-beautiful-dnd';// 拖放功能，讓使用者可以拖曳圖片來重新排列它們的順序。\nimport imageCompression from'browser-image-compression';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const website=process.env.REACT_APP_Website;const API_KEY=process.env.REACT_APP_API_KEY;const CreateWork=props=>{const[web3,setWeb3]=useState(null);const[contract,setContract]=useState(null);const[formParams,updateFormParams]=useState({title:'',description:'',category:''});const[formParams_1,updateFormParams_1]=useState({title:'',price:'',isFree:false});const[msg,updateMsg]=useState('');const[stepCompleted,setStepCompleted]=useState(false);const[showChapterForm,setShowChapterForm]=useState(false);const[previewImageUrl,setPreviewImageUrl]=useState(null);// 單一圖片預覽\nconst[previewImageUrls,setPreviewImageUrls]=useState([]);// 多個圖片預覽\nconst[comicHash,setComicHash]=useState('');// 儲存檔案哈希值的狀態\nconst location=useLocation();const[hashValue,setHashValue]=useState('');const[file,setFiles]=useState([]);const[coverFile,setCoverFile]=useState([]);const[promoPreviewImageUrl,setPromoPreviewImageUrl]=useState('');const[isCreator,setIsCreator]=useState(false);const fileInputRef=useRef(null);const{t}=useTranslation();const currentAccount=localStorage.getItem(\"currentAccount\");const headers={'api-key':API_KEY};let mergedFile='';let chapterHash='';const[grading,setGrading]=useState([\"戀愛\",\"懸疑\",\"恐怖\",\"冒險\",\"古風\",\"玄幻\",\"武俠\",\"搞笑\"]);// 連接到 Web3 的函數\nasync function connectToWeb3(){if(window.ethereum){try{// 請求用戶授權\nconst web3=new Web3(window.ethereum);setWeb3(web3);const contractInstance=new web3.eth.Contract(comicData.abi,comicData.address);setContract(contractInstance);const accounts=await web3.eth.getAccounts();if(accounts[0]){let account=accounts[0].toLowerCase();try{const response=await axios.get(`${website}/api/isCreator`,{headers:headers,params:{currentAccount:account}});if(response.data[0].is_creator===1){try{setIsCreator(true);}catch(error){console.error('Error initializing contract:',error);}}else{message.info(t('請先進行創作者驗證，才開放創作者專區'));}}catch(error){console.error('Error fetching isCreator:',error);}}else{message.info(t('請先登入以太坊錢包，才開放創作者專區'));}}catch(error){console.error(error);}}else{message.info(t('請安裝MetaMask'));}};// 漫畫上傳函數\nconst createComic=async e=>{e.preventDefault();try{setComicHash(hashValue);const fillFile=await checkFile();if(fillFile===-1)return;if(!contract){console.error('合約實例未初始化');return;}disableAllButtons();updateMsg(t('正在上傳漫畫至合約中'));//console.log(\"comicHash：\" + hashValue);\n//console.log(\"title：\" + formParams.title);\n//console.log(\"author：\" + currentAccount);\n//console.log(\"description：\" + formParams.description);\n//console.log(\"level：\" + formParams.category);\n//console.log(file);\n//console.log(coverFile);\nawait contract.methods.uploadComic(hashValue,formParams.title).send({from:currentAccount});const timestamp=Date.now();const formData=new FormData();formData.append('comicIMG',file);// 使用正确的字段名，这里是 'comicIMG'\nformData.append('creator',currentAccount);formData.append('title',formParams.title);formData.append('description',formParams.description);formData.append('category',formParams.category);formData.append('is_exist',0);formData.append('comic_id',hashValue);formData.append('timestamp',timestamp);if(coverFile.length!=0){formData.append('coverFile',coverFile);const protoFilename=\"promoCover.jpg\";formData.append('protoFilename',protoFilename);}else{formData.append('protoFilename','');};try{const response=await axios.post(`${website}/api/add/comics`,formData,{headers:{'Content-Type':'multipart/form-data','api-key':API_KEY}});//console.log('Comic added successfully:', response.data);\nmessage.info(t('漫畫成功上傳'));enableAllButtons();setShowChapterForm(true);updateMsg(\"\");updateFormParams({category:'',title:'',description:''});setHashValue('');setFiles('');}catch(error){alert(t('漫畫添加至資料庫時發生錯誤：')+error);enableAllButtons();updateMsg(\"\");}}catch(error){if(error.message.includes('User denied transaction signature')){message.info(t('拒绝交易'));}else{alert(t('上傳漫畫時發生錯誤')+error);}enableAllButtons();setShowChapterForm(false);updateMsg(\"\");}};// 章節上傳函數\nconst createChapter=async e=>{if(e){e.preventDefault();}try{const fillFile=await checkFile();if(fillFile===-1)return;if(!contract){console.error('合約實例未初始化');return;}let price_temp=formParams_1.price;if(price_temp&&!isNaN(parseFloat(price_temp))){price_temp=parseFloat(price_temp);price_temp=web3.utils.toWei(price_temp.toString(),'ether');if(price_temp<10000000000000000&&formParams_1.isFree===false){message.info(t('價格至少0.01 ETH'));return;}}disableAllButtons();updateMsg(t('正在添加章節至合約中'));await handleGeneratePages();// 等待合併圖片操作完成\nawait handleFileReaderLoad();// 等待計算 chapterHash 值操作完成\n//console.log(\"comicHash：\" + comicHash);\n//console.log(\"chapterHash：\" + chapterHash);\n//console.log(\"title：\" + formParams_1.title);\n//console.log(\"price：\" + formParams_1.price);\nawait contract.methods.addChapter(comicHash,chapterHash,formParams_1.title,price_temp).send({from:currentAccount});const timestamp=Date.now();const formData=new FormData();formData.append('chapterIMG',mergedFile);// 使用正确的字段名，这里是 'chapterIMG'\nformData.append('comic_id',comicHash);formData.append('price',formParams_1.price);formData.append('title',formParams_1.title);formData.append('chapter_hash',chapterHash);formData.append('timestamp',timestamp);try{const response=await axios.post(`${website}/api/add/chapters`,formData,{headers:{'Content-Type':'multipart/form-data','api-key':API_KEY}});//console.log('chapter added successfully:', response.data);\nenableAllButtons();updateMsg(\"\");updateFormParams_1({title:'',price:''});let uploadComicData={[comicHash]:formParams_1.title};localStorage.setItem('uploadComicData',JSON.stringify(uploadComicData));window.location.replace(\"/createSuccess\");}catch(error){alert(t('章節內容添加至資料庫時發生錯誤：')+error);enableAllButtons();updateMsg(\"\");}}catch(error){if(error.message.includes('User denied transaction signature')){message.info(t('拒绝交易'));}else{alert(t('添加章節時發生錯誤')+error);}enableAllButtons();setShowChapterForm(true);updateMsg(\"\");}};// 處理單張圖片，資料驗證、預覽\nconst handleFileInputChange=async event=>{const file=event.target.files[0];if(!file){setPreviewImageUrl('');return;}if(validateFileType(file)){previewImage(file);if(file.size<600*1024){setFiles(file);}else{try{const compressedBlob=await imageCompression(file,{maxSizeMB:0.6});const compressFile=new File([compressedBlob],'file.jpg',{type:'image/jpeg',lastModified:Date.now()});setFiles(compressFile);}catch(error){alert(t('圖片壓縮錯誤：')+error);}}}else{message.info(t('文件類型不支持，請上傳...格式的圖片'));return-1;}const reader=new FileReader();reader.onload=handleFileReaderLoad;reader.readAsArrayBuffer(file);};const handleButtonClick=()=>{fileInputRef.current.click();// 觸發檔案輸入框的點擊事件\n};// 處理多張圖片，資料驗證、預覽\nconst handleMultiFileInputChange=event=>{const files=event.target.files;const fileArray=Array.from(files);fileArray.forEach(file=>{if(validateFileType(file)){previewImage(file);}else{message.info(t('文件類型不支持，請上傳...格式的圖片'));return-1;}});const urls=fileArray.map(file=>{return URL.createObjectURL(file);// 创建预览 URL\n});setFiles(prevFiles=>[...prevFiles,...fileArray]);// 添增新文件到舊文件列表中\nsetPreviewImageUrls(prevUrls=>[...prevUrls,...urls]);// 添加新預覽 URL 到舊預覽 URL 列表中\n};// 分別處理單張、多張圖片，計算 chapterHash\nconst handleFileReaderLoad=async event=>{let fileBuffer;if(event instanceof Event){// 單張圖片處理\nfileBuffer=event.target.result;}else if(mergedFile instanceof File){// 多張圖片處理\nfileBuffer=await mergedFile.arrayBuffer();}else{throw new Error('Unsupported event or mergedFile type');}const hash=CryptoJS.SHA256(CryptoJS.lib.WordArray.create(fileBuffer));const timestamp=Date.now().toString();const hashValue=hash.toString(CryptoJS.enc.Hex);const combinedValue=hashValue+timestamp;const finalValue=\"0x\"+combinedValue.slice(-64);if(event instanceof Event){setHashValue(finalValue);// 單張圖片處理中設置最終的 hash 值\n}else{chapterHash=finalValue;// 多張圖片處理中設置最終的 hash 值\n}};const createPromoCover=async event=>{const file=event.target.files[0];if(!file){setPromoPreviewImageUrl('');return;}if(validateFileType(file)){previewPromoCover(file);if(file.size<600*1024){setCoverFile(file);return;}try{const compressedBlob=await imageCompression(file,{maxSizeMB:0.6});const compressFile=new File([compressedBlob],'file.jpg',{type:'image/jpeg',lastModified:Date.now()});setCoverFile(compressFile);}catch(error){alert(t('圖片壓縮錯誤：')+error);}}else{message.info(t('文件類型不支持，請上傳...格式的圖片'));return-1;}};// 驗證檔案類型是否符合要求\nconst validateFileType=file=>{const allowedTypes=[\"image/jpeg\",\"image/png\",\"image/jpg\"];return allowedTypes.includes(file.type);};// 預覽圖片\nconst previewImage=file=>{const reader=new FileReader();reader.readAsDataURL(file);reader.onloadend=()=>{setPreviewImageUrl(reader.result);};};// 預覽圖片\nconst previewPromoCover=file=>{const reader=new FileReader();reader.readAsDataURL(file);reader.onloadend=()=>{setPromoPreviewImageUrl(reader.result);};};// 允許使用者刪除不需要的文件預覽\nconst handleRemoveFile=index=>{const newFiles=[...file];const newUrls=[...previewImageUrls];newFiles.splice(index,1);newUrls.splice(index,1);setFiles(newFiles);setPreviewImageUrls(newUrls);};const handleDragEnd=result=>{if(!result.destination){return;}const items=[...file];const urls=[...previewImageUrls];const[reorderedItem]=items.splice(result.source.index,1);const[reorderedUrl]=urls.splice(result.source.index,1);items.splice(result.destination.index,0,reorderedItem);urls.splice(result.destination.index,0,reorderedUrl);setFiles(items);setPreviewImageUrls(urls);};// 漫畫等級取值\nfunction ChoseLevel(e){let choseLevel=e.target.value;formParams.category=choseLevel;};// 檔案不可為空\nasync function checkFile(){if(showChapterForm==false){const{category,title,description}=formParams;if(title&&title.length>50){message.info(t('標題命名不可超過50個字!'));return-1;}else if(!category||!title||!description||file.length===0){updateMsg(t('請填寫所有欄位'));return-1;}}else{const{title,price,isFree}=formParams_1;if(title&&title.length>50){message.info(t('標題命名不可超過50個字!'));return-1;}else if(!comicHash||!title||!formParams_1.isFree&&!price||file.length===0){updateMsg(t('請填寫所有欄位'));return-1;}};};useEffect(()=>{connectToWeb3();},[]);useEffect(()=>{// 检查是否传递了参数并设置 showChapterForm 状态\nif(location.state&&location.state.showChapterForm){//console.log(\"Location state:\", location.state);\nsetComicHash(location.state.comicHash);setShowChapterForm(true);}},[location]);// 处理生成合并图片并进行翻页\nconst handleGeneratePages=async()=>{return new Promise(async(resolve,reject)=>{const singleFile=file[0];if(file.length===1){if(singleFile.size<600*1024){mergedFile=singleFile;// 尺寸小於600KB，直接回傳\nresolve();return;}try{const compressedBlob=await imageCompression(singleFile,{maxSizeMB:0.6});mergedFile=new File([compressedBlob],'compress.jpg',{type:'image/jpeg',lastModified:Date.now()});resolve();}catch(error){alert(t('圖片壓縮錯誤：')+error);reject(error);}}else{const canvas=document.createElement('canvas');const ctx=canvas.getContext('2d');canvas.width=file.length*1200;// 合併後的寬度\ncanvas.height=1600;// 固定高度\nawait Promise.all(file.map((file,index)=>{return new Promise(resolve=>{const img=new Image();img.onload=()=>{ctx.drawImage(img,index*1200,0,1200,1600);resolve();};img.src=URL.createObjectURL(file);});}));canvas.toBlob(async blob=>{const mergedFileBlob=new Blob([blob],{type:'image/jpeg'});try{const compressedBlob=await imageCompression(mergedFileBlob,{maxSizeMB:0.6,useWebWorker:true});const finalCanvas=document.createElement('canvas');finalCanvas.width=canvas.width;finalCanvas.height=canvas.height;const finalCtx=finalCanvas.getContext('2d');const compressedImage=new Image();compressedImage.onload=()=>{finalCtx.drawImage(compressedImage,0,0,finalCanvas.width,finalCanvas.height);finalCanvas.toBlob(finalBlob=>{mergedFile=new File([finalBlob],'compress.jpg',{type:'image/jpeg',lastModified:Date.now()});// 创建下载链接并触发下载\n//const downloadLink = document.createElement('a');\n//downloadLink.href = URL.createObjectURL(mergedFile);\n//downloadLink.download = fileName;\n//downloadLink.click();\nresolve();},'image/jpeg');};compressedImage.src=URL.createObjectURL(new Blob([compressedBlob]));}catch(error){alert(t('圖片壓縮錯誤：')+error);reject(error);}},'image/jpeg');}});};return/*#__PURE__*/_jsxs(\"div\",{className:\"upload-form\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"step-container\",children:[/*#__PURE__*/_jsxs(\"div\",{className:`step-item ${stepCompleted&&!showChapterForm?'step-completed':''}`,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"step-line\",children:[/*#__PURE__*/_jsx(\"div\",{className:`line ${stepCompleted?'bg-blue':'bg-gray'}`}),/*#__PURE__*/_jsx(\"div\",{className:\"dot\",children:\"1\"}),/*#__PURE__*/_jsx(\"div\",{className:`line ${stepCompleted?'bg-blue':'bg-gray'}`})]}),/*#__PURE__*/_jsx(\"div\",{className:\"step-title\",children:t('新增漫畫')})]}),/*#__PURE__*/_jsxs(\"div\",{className:`step-item ${!showChapterForm&&!stepCompleted?'step-item-gray':''}`,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"step-line\",children:[/*#__PURE__*/_jsx(\"div\",{className:`line ${!showChapterForm&&!stepCompleted?'bg-gray':'bg-blue'}`}),/*#__PURE__*/_jsx(\"div\",{className:\"dot\",children:\"2\"}),/*#__PURE__*/_jsx(\"div\",{className:`line ${!showChapterForm&&!stepCompleted?'bg-gray':'bg-blue'}`})]}),/*#__PURE__*/_jsx(\"div\",{className:\"step-title\",children:t('添加章節')})]})]}),showChapterForm?/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(Form,{children:[/*#__PURE__*/_jsxs(Form.Group,{as:Row,className:\"mb-3 label-container\",children:[/*#__PURE__*/_jsx(Form.Label,{column:true,sm:3,className:\"label-style col-form-label label-section\",children:t('本章名稱')}),/*#__PURE__*/_jsx(Col,{sm:9,children:/*#__PURE__*/_jsx(Form.Control,{type:\"text\",value:formParams_1.title,placeholder:t('請輸入章節名稱'),onChange:e=>updateFormParams_1({...formParams_1,title:e.target.value}),disabled:!isCreator})})]}),/*#__PURE__*/_jsxs(Form.Group,{as:Row,className:\"mb-2 label-container\",children:[/*#__PURE__*/_jsx(Form.Label,{column:true,sm:3,className:\"label-style col-form-label label-section\",children:t('本章價格')}),/*#__PURE__*/_jsx(Col,{sm:9,children:/*#__PURE__*/_jsx(Form.Control,{type:\"number\",value:formParams_1.isFree?'0':formParams_1.price// 如果 isFree 為 true，顯示 '0'，否則顯示 formParams_1.price\n,placeholder:t('至少 0.01 ETH'),step:\"0.01\",disabled:formParams_1.isFree||!isCreator// 如果 isFree 為 true，則禁用輸入框\n,onChange:e=>{if(!formParams_1.isFree){// 如果不是免費狀態才更新 price\nupdateFormParams_1({...formParams_1,price:e.target.value});}}})})]}),/*#__PURE__*/_jsx(Form.Group,{as:Row,className:\"mb-3\",children:/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex'},children:[/*#__PURE__*/_jsx(Form.Label,{column:true,sm:3,className:\"label-style  \",children:t('本章免費')}),/*#__PURE__*/_jsx(Form.Check,{type:\"checkbox\",onChange:e=>{const isFree=e.target.checked;updateFormParams_1({...formParams_1,isFree:isFree,price:isFree?0:formParams_1.price// 如果是免费，则将价格设为 0，否则保持原来的价格\n});},disabled:!isCreator,checked:formParams_1.isFree,style:{transform:'scale(1.8)',marginTop:'12px',marginLeft:'1.3rem'}})]})}),/*#__PURE__*/_jsxs(Form.Group,{as:Row,className:\"mb-2\",children:[/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex'},children:[/*#__PURE__*/_jsx(Form.Label,{className:\"label-style col-form-label\",style:{marginRight:'1rem',whiteSpace:'nowrap'},children:t('本章作品上傳')}),/*#__PURE__*/_jsx(Form.Control,{type:\"file\",onChange:handleMultiFileInputChange,disabled:!isCreator,multiple:true,style:{flex:1}// 使文件输入框占据剩余空间\n})]}),/*#__PURE__*/_jsx(\"div\",{className:\"file-upload-long\",style:{display:'flex',flexDirection:'column'},children:/*#__PURE__*/_jsx(\"div\",{id:\"start\",style:{display:'block'},children:previewImageUrls.length>0?/*#__PURE__*/_jsx(DragDropContext,{onDragEnd:handleDragEnd,children:/*#__PURE__*/_jsx(Droppable,{droppableId:\"droppable\",children:provided=>/*#__PURE__*/_jsxs(\"div\",{ref:provided.innerRef,...provided.droppableProps,className:\"image-list\",children:[previewImageUrls.map((url,index)=>/*#__PURE__*/_jsx(Draggable,{draggableId:`draggable-${index}`,index:index,children:provided=>/*#__PURE__*/_jsxs(\"div\",{ref:provided.innerRef,...provided.draggableProps,...provided.dragHandleProps,className:\"image-item\",children:[/*#__PURE__*/_jsx(\"img\",{src:url,alt:`Preview ${index}`,className:\"preview-image\"}),/*#__PURE__*/_jsx(Button,{onClick:()=>handleRemoveFile(index),className:\"remove-button\",variant:\"light\",children:/*#__PURE__*/_jsx(MdClose,{className:\"MdClose-button\"})}),/*#__PURE__*/_jsx(MdDragHandle,{style:{position:'absolute',bottom:'5px',right:'5px',cursor:'grab'}})]})},index)),provided.placeholder]})})}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(CardImage,{size:48}),/*#__PURE__*/_jsxs(\"div\",{id:\"notimage2\",className:\"hidden\",children:[t('上傳本章漫畫內容'),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{}),t('條漫：請上傳1整章圖檔'),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{}),t('頁漫：請上傳多張圖檔'),/*#__PURE__*/_jsx(\"br\",{}),t('寬度：1200/張、長度：1600px')]})]})})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"text-red-500 text-center\",children:msg}),/*#__PURE__*/_jsx(Button,{onClick:createChapter,id:\"list-button\",\"data-backgroundcolor\":\"#fff\",children:t('確認上傳')})]})}):/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(Form,{children:[/*#__PURE__*/_jsxs(Form.Group,{as:Row,className:\"mb-3 label-container\",children:[/*#__PURE__*/_jsx(Form.Label,{column:true,sm:3,className:\"label-style label-section\",children:t('漫畫名稱')}),/*#__PURE__*/_jsx(Col,{sm:9,children:/*#__PURE__*/_jsx(Form.Control,{type:\"text\",value:formParams.title,onChange:e=>updateFormParams({...formParams,title:e.target.value}),disabled:!isCreator})})]}),/*#__PURE__*/_jsxs(Form.Group,{as:Row,className:\"mb-3 label-container\",children:[/*#__PURE__*/_jsx(Form.Label,{column:true,sm:3,className:\"label-style label-section\",children:t('漫畫類型')}),/*#__PURE__*/_jsx(Col,{sm:9,children:/*#__PURE__*/_jsxs(Form.Control,{as:\"select\",className:\"form-select\",onChange:ChoseLevel,disabled:!isCreator,children:[/*#__PURE__*/_jsx(\"option\",{children:t('請選擇漫畫類型')}),grading.map((name,index)=>/*#__PURE__*/_jsx(\"option\",{value:name,children:t(name)},index))]})})]}),/*#__PURE__*/_jsxs(Form.Group,{children:[/*#__PURE__*/_jsx(Form.Label,{className:\"label-style mb-4 col-form-label\",children:t('漫畫簡介')}),/*#__PURE__*/_jsx(Form.Control,{as:\"textarea\",rows:5,value:formParams.description,onChange:e=>updateFormParams({...formParams,description:e.target.value}),disabled:!isCreator})]}),/*#__PURE__*/_jsxs(Form.Group,{controlId:\"file-upload\",className:\"pt-4\",children:[/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex'},children:[/*#__PURE__*/_jsx(Form.Label,{className:\"label-style col-form-label\",style:{marginRight:'1rem',whiteSpace:'nowrap'},children:t('漫畫封面')}),/*#__PURE__*/_jsx(Form.Control,{type:\"file\",name:\"fileUpload\",accept:\"image/*\",style:{flex:1},onChange:handleFileInputChange,disabled:!isCreator})]}),/*#__PURE__*/_jsx(\"div\",{className:\"file-upload\",style:{display:'flex',flexDirection:'column'},children:/*#__PURE__*/_jsx(\"div\",{id:\"start\",style:{display:'block'},children:previewImageUrl?/*#__PURE__*/_jsx(\"img\",{src:previewImageUrl,alt:\"Preview\"}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(CardImage,{size:48}),/*#__PURE__*/_jsx(\"div\",{id:\"notimage\",className:\"hidden\",children:t('上傳漫畫封面')})]})})})]}),/*#__PURE__*/_jsxs(Form.Group,{controlId:\"file-upload\",className:\"pt-4 pb-3\",children:[/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex'},children:[/*#__PURE__*/_jsx(Form.Label,{className:\"label-style col-form-label\",style:{marginRight:'1rem',whiteSpace:'nowrap'},children:t('漫畫橫向封面')}),/*#__PURE__*/_jsx(Form.Control,{type:\"file\",name:\"fileUpload\",accept:\"image/*\",style:{flex:1,marginBottom:'1rem'},onChange:createPromoCover,disabled:!isCreator})]}),/*#__PURE__*/_jsx(\"div\",{className:\"file-upload\",style:{display:'flex',flexDirection:'column'},children:/*#__PURE__*/_jsx(\"div\",{id:\"start\",style:{display:'block'},children:promoPreviewImageUrl?/*#__PURE__*/_jsx(\"img\",{src:promoPreviewImageUrl,alt:\"Promo Cover Preview\"}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(CardImage,{size:48}),/*#__PURE__*/_jsx(\"div\",{id:\"notimage2\",className:\"hidden\",children:t('上傳漫畫橫向封面')})]})})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"text-red-500 text-center\",children:msg}),/*#__PURE__*/_jsx(Button,{onClick:createComic,id:\"list-button\",\"data-backgroundcolor\":\"#fff\",children:t('確認上傳')})]})})]});};export default CreateWork;","map":{"version":3,"names":["React","useState","useEffect","useRef","Link","Form","Row","Col","Button","ProgressBar","Container","Web3","CardImage","message","disableAllButtons","enableAllButtons","comicData","$","useLocation","useTranslation","i18n","axios","CryptoJS","MdClose","MdDragHandle","DragDropContext","Draggable","Droppable","imageCompression","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","website","process","env","REACT_APP_Website","API_KEY","REACT_APP_API_KEY","CreateWork","props","web3","setWeb3","contract","setContract","formParams","updateFormParams","title","description","category","formParams_1","updateFormParams_1","price","isFree","msg","updateMsg","stepCompleted","setStepCompleted","showChapterForm","setShowChapterForm","previewImageUrl","setPreviewImageUrl","previewImageUrls","setPreviewImageUrls","comicHash","setComicHash","location","hashValue","setHashValue","file","setFiles","coverFile","setCoverFile","promoPreviewImageUrl","setPromoPreviewImageUrl","isCreator","setIsCreator","fileInputRef","t","currentAccount","localStorage","getItem","headers","mergedFile","chapterHash","grading","setGrading","connectToWeb3","window","ethereum","contractInstance","eth","Contract","abi","address","accounts","getAccounts","account","toLowerCase","response","get","params","data","is_creator","error","console","info","createComic","e","preventDefault","fillFile","checkFile","methods","uploadComic","send","from","timestamp","Date","now","formData","FormData","append","length","protoFilename","post","alert","includes","createChapter","price_temp","isNaN","parseFloat","utils","toWei","toString","handleGeneratePages","handleFileReaderLoad","addChapter","uploadComicData","setItem","JSON","stringify","replace","handleFileInputChange","event","target","files","validateFileType","previewImage","size","compressedBlob","maxSizeMB","compressFile","File","type","lastModified","reader","FileReader","onload","readAsArrayBuffer","handleButtonClick","current","click","handleMultiFileInputChange","fileArray","Array","forEach","urls","map","URL","createObjectURL","prevFiles","prevUrls","fileBuffer","Event","result","arrayBuffer","Error","hash","SHA256","lib","WordArray","create","enc","Hex","combinedValue","finalValue","slice","createPromoCover","previewPromoCover","allowedTypes","readAsDataURL","onloadend","handleRemoveFile","index","newFiles","newUrls","splice","handleDragEnd","destination","items","reorderedItem","source","reorderedUrl","ChoseLevel","choseLevel","value","state","Promise","resolve","reject","singleFile","canvas","document","createElement","ctx","getContext","width","height","all","img","Image","drawImage","src","toBlob","blob","mergedFileBlob","Blob","useWebWorker","finalCanvas","finalCtx","compressedImage","finalBlob","className","children","Group","as","Label","column","sm","Control","placeholder","onChange","disabled","step","style","display","Check","checked","transform","marginTop","marginLeft","marginRight","whiteSpace","multiple","flex","flexDirection","id","onDragEnd","droppableId","provided","ref","innerRef","droppableProps","url","draggableId","draggableProps","dragHandleProps","alt","onClick","variant","position","bottom","right","cursor","name","rows","controlId","accept","marginBottom"],"sources":["C:/Users/user1/Desktop/blockchain-comics-platform/frontend/src/routes/createWork.js"],"sourcesContent":["import React, { useState, useEffect, useRef  } from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport { Form, Row, Col, Button, ProgressBar, Container } from 'react-bootstrap';\r\nimport Web3 from 'web3';\r\nimport { CardImage } from 'react-bootstrap-icons';\r\nimport { message } from 'antd';\r\nimport { disableAllButtons, enableAllButtons } from '../index';\r\nimport comicData from '../contracts/ComicPlatform.json';\r\nimport $ from 'jquery';\r\nimport { useLocation } from 'react-router-dom';\r\nimport { useTranslation } from 'react-i18next';\r\nimport i18n from '../i18n';\r\nimport axios from 'axios';\r\nimport CryptoJS from 'crypto-js';\r\nimport { MdClose, MdDragHandle } from 'react-icons/md';  // 導入小叉叉圖標和拖曳圖標\r\nimport { DragDropContext, Draggable, Droppable } from 'react-beautiful-dnd';  // 拖放功能，讓使用者可以拖曳圖片來重新排列它們的順序。\r\nimport imageCompression from 'browser-image-compression';\r\nconst website = process.env.REACT_APP_Website;\r\nconst API_KEY = process.env.REACT_APP_API_KEY;\r\n\r\nconst CreateWork = (props) => {\r\n  const [web3, setWeb3] = useState(null);\r\n  const [contract, setContract] = useState(null);\r\n  const [formParams, updateFormParams] = useState({title:'', description:'',  category: ''});\r\n  const [formParams_1, updateFormParams_1] = useState({title: '', price: '', isFree: false});\r\n  const [msg, updateMsg] = useState('');\r\n  const [stepCompleted, setStepCompleted] = useState(false);\r\n  const [showChapterForm, setShowChapterForm] = useState(false);\r\n  const [previewImageUrl, setPreviewImageUrl] = useState(null); // 單一圖片預覽\r\n  const [previewImageUrls, setPreviewImageUrls] = useState([]); // 多個圖片預覽\r\n  const [comicHash, setComicHash] = useState(''); // 儲存檔案哈希值的狀態\r\n  const location = useLocation();\r\n  const [hashValue, setHashValue] = useState('');\r\n  const [file, setFiles] = useState([]);\r\n  const [coverFile, setCoverFile] = useState([]);\r\n  const [promoPreviewImageUrl, setPromoPreviewImageUrl] = useState('');\r\n  const [isCreator, setIsCreator] = useState(false);\r\n  const fileInputRef = useRef(null);\r\n  const { t } = useTranslation();\r\n  const currentAccount = localStorage.getItem(\"currentAccount\");\r\n  const headers = {'api-key': API_KEY};\r\n  let mergedFile = '';\r\n  let chapterHash = '';\r\n  const [grading, setGrading] = useState([\r\n    \"戀愛\",\r\n    \"懸疑\",\r\n    \"恐怖\",\r\n    \"冒險\",\r\n    \"古風\",\r\n    \"玄幻\",\r\n    \"武俠\",\r\n    \"搞笑\"\r\n  ]);\r\n\r\n  // 連接到 Web3 的函數\r\n  async function connectToWeb3(){\r\n    if (window.ethereum) {\r\n      try {\r\n        // 請求用戶授權\r\n        const web3 = new Web3(window.ethereum);\r\n        setWeb3(web3);\r\n        const contractInstance = new web3.eth.Contract(comicData.abi, comicData.address);\r\n        setContract(contractInstance);\r\n        const accounts = await web3.eth.getAccounts();\r\n        if (accounts[0]) {\r\n          let account = accounts[0].toLowerCase();\r\n          try {\r\n              const response = await axios.get(`${website}/api/isCreator`, {\r\n                  headers: headers,\r\n                  params: {\r\n                      currentAccount: account\r\n                  }\r\n              });\r\n              if (response.data[0].is_creator === 1) {\r\n                  try {\r\n                    setIsCreator(true);\r\n                  } catch (error) {\r\n                      console.error('Error initializing contract:', error);\r\n                  }\r\n              } else {\r\n                message.info(t('請先進行創作者驗證，才開放創作者專區'));\r\n              }\r\n          } catch (error) {\r\n              console.error('Error fetching isCreator:', error);\r\n          }\r\n        } else {\r\n            message.info(t('請先登入以太坊錢包，才開放創作者專區'));\r\n        }\r\n      } catch (error) {\r\n        console.error(error);\r\n      }\r\n    } else {\r\n      message.info(t('請安裝MetaMask'));\r\n    }\r\n  };\r\n\r\n  // 漫畫上傳函數\r\n  const createComic = async (e) => {\r\n    e.preventDefault();\r\n    try {\r\n      setComicHash(hashValue);\r\n      const fillFile = await checkFile();\r\n      if(fillFile === -1)\r\n          return;\r\n      if (!contract) {\r\n        console.error('合約實例未初始化');\r\n        return;\r\n      }\r\n      disableAllButtons();\r\n      updateMsg(t('正在上傳漫畫至合約中'));\r\n\r\n      //console.log(\"comicHash：\" + hashValue);\r\n      //console.log(\"title：\" + formParams.title);\r\n      //console.log(\"author：\" + currentAccount);\r\n      //console.log(\"description：\" + formParams.description);\r\n      //console.log(\"level：\" + formParams.category);\r\n      //console.log(file);\r\n      //console.log(coverFile);\r\n     \r\n      await contract.methods.uploadComic(hashValue, formParams.title).send({ from: currentAccount });\r\n\r\n      const timestamp = Date.now();\r\n      const formData = new FormData();\r\n      formData.append('comicIMG', file); // 使用正确的字段名，这里是 'comicIMG'\r\n      formData.append('creator', currentAccount);\r\n      formData.append('title', formParams.title);\r\n      formData.append('description', formParams.description);\r\n      formData.append('category', formParams.category);\r\n      formData.append('is_exist', 0);\r\n      formData.append('comic_id', hashValue);\r\n      formData.append('timestamp', timestamp);\r\n      if (coverFile.length != 0) {\r\n        formData.append('coverFile', coverFile);\r\n        const protoFilename = \"promoCover.jpg\";\r\n        formData.append('protoFilename', protoFilename);\r\n      } else {\r\n        formData.append('protoFilename', '');\r\n      };\r\n\r\n      try {\r\n        const response = await axios.post(`${website}/api/add/comics`, formData, {\r\n          headers: {\r\n            'Content-Type': 'multipart/form-data',\r\n            'api-key': API_KEY\r\n          }\r\n        });\r\n        //console.log('Comic added successfully:', response.data);\r\n\r\n        message.info(t('漫畫成功上傳'));\r\n        enableAllButtons();\r\n        setShowChapterForm(true);\r\n        updateMsg(\"\");\r\n        updateFormParams({category:'',  title: '', description: ''});\r\n        setHashValue('');\r\n        setFiles('');\r\n      } catch (error) {\r\n        alert(t('漫畫添加至資料庫時發生錯誤：') + error);\r\n        enableAllButtons();\r\n        updateMsg(\"\");\r\n      }\r\n    } catch (error) {\r\n      if (error.message.includes('User denied transaction signature')) {\r\n        message.info(t('拒绝交易'));\r\n      } else {\r\n        alert(t('上傳漫畫時發生錯誤') + error);\r\n      }\r\n      enableAllButtons();\r\n      setShowChapterForm(false);\r\n      updateMsg(\"\");\r\n    }\r\n  };\r\n\r\n\r\n  // 章節上傳函數\r\n  const createChapter = async (e) => {\r\n    if (e) {\r\n      e.preventDefault();\r\n    }\r\n    try {\r\n      const fillFile = await checkFile();\r\n      if(fillFile === -1)\r\n          return;\r\n      if (!contract) {\r\n        console.error('合約實例未初始化');\r\n        return;\r\n      }\r\n      let price_temp = formParams_1.price;\r\n      if (price_temp && !isNaN(parseFloat(price_temp))) {\r\n        price_temp = parseFloat(price_temp);\r\n        price_temp = web3.utils.toWei(price_temp.toString(), 'ether');\r\n        if (price_temp < 10000000000000000 && formParams_1.isFree === false) {\r\n          message.info(t('價格至少0.01 ETH'));\r\n          return;\r\n        }\r\n      }\r\n      disableAllButtons();\r\n      updateMsg(t('正在添加章節至合約中'))\r\n\r\n      await handleGeneratePages();  // 等待合併圖片操作完成\r\n      await handleFileReaderLoad();  // 等待計算 chapterHash 值操作完成\r\n\r\n      //console.log(\"comicHash：\" + comicHash);\r\n      //console.log(\"chapterHash：\" + chapterHash);\r\n      //console.log(\"title：\" + formParams_1.title);\r\n      //console.log(\"price：\" + formParams_1.price);\r\n\r\n      await contract.methods.addChapter(comicHash, chapterHash, formParams_1.title, price_temp).send({ from: currentAccount });\r\n\r\n      const timestamp = Date.now();\r\n      const formData = new FormData();\r\n      formData.append('chapterIMG', mergedFile); // 使用正确的字段名，这里是 'chapterIMG'\r\n      formData.append('comic_id', comicHash);\r\n      formData.append('price', formParams_1.price);\r\n      formData.append('title', formParams_1.title);\r\n      formData.append('chapter_hash', chapterHash);\r\n      formData.append('timestamp', timestamp);\r\n      \r\n      try {\r\n        const response = await axios.post(`${website}/api/add/chapters`, formData, {\r\n          headers: {\r\n            'Content-Type': 'multipart/form-data',\r\n            'api-key': API_KEY\r\n          }\r\n        });\r\n        //console.log('chapter added successfully:', response.data);\r\n\r\n        enableAllButtons();\r\n        updateMsg(\"\");\r\n        updateFormParams_1({title: '', price: ''});\r\n        \r\n        let uploadComicData = {[comicHash]: formParams_1.title};\r\n        localStorage.setItem('uploadComicData', JSON.stringify(uploadComicData));\r\n        window.location.replace(\"/createSuccess\");\r\n      } catch (error) {\r\n        alert(t('章節內容添加至資料庫時發生錯誤：') + error);\r\n        enableAllButtons();\r\n        updateMsg(\"\");\r\n      }\r\n    } catch (error) {\r\n      if (error.message.includes('User denied transaction signature')) {\r\n        message.info(t('拒绝交易'));\r\n      } else {\r\n        alert(t('添加章節時發生錯誤') + error);\r\n      }\r\n      enableAllButtons();\r\n      setShowChapterForm(true);\r\n      updateMsg(\"\");\r\n    }\r\n  };\r\n\r\n  // 處理單張圖片，資料驗證、預覽\r\n  const handleFileInputChange = async (event) => {\r\n    const file = event.target.files[0];\r\n    if (!file) {\r\n      setPreviewImageUrl('');\r\n      return;\r\n    }\r\n    if (validateFileType(file)) {\r\n      previewImage(file);\r\n      if (file.size < 600 * 1024) {\r\n        setFiles(file);\r\n      } else {\r\n        try {\r\n          const compressedBlob = await imageCompression(file, { maxSizeMB: 0.6 });\r\n          const compressFile = new File([compressedBlob], 'file.jpg', { type: 'image/jpeg', lastModified: Date.now() });\r\n          setFiles(compressFile);\r\n        } catch (error) {\r\n          alert(t('圖片壓縮錯誤：') + error);\r\n        }\r\n      }\r\n    } else {\r\n      message.info(t('文件類型不支持，請上傳...格式的圖片'));\r\n      return -1;\r\n    }\r\n    const reader = new FileReader();\r\n    reader.onload = handleFileReaderLoad;\r\n    reader.readAsArrayBuffer(file);\r\n  };\r\n\r\n  const handleButtonClick = () => {\r\n    fileInputRef.current.click(); // 觸發檔案輸入框的點擊事件\r\n  };\r\n\r\n  // 處理多張圖片，資料驗證、預覽\r\n  const handleMultiFileInputChange = (event) => {\r\n    const files = event.target.files;\r\n    const fileArray = Array.from(files);\r\n    fileArray.forEach(file => {\r\n      if (validateFileType(file)) {\r\n        previewImage(file);\r\n      } else {\r\n        message.info(t('文件類型不支持，請上傳...格式的圖片'));\r\n        return -1;\r\n      }\r\n    });\r\n    const urls = fileArray.map(file => {\r\n      return URL.createObjectURL(file);  // 创建预览 URL\r\n    });\r\n    setFiles(prevFiles => [...prevFiles, ...fileArray]);  // 添增新文件到舊文件列表中\r\n    setPreviewImageUrls(prevUrls => [...prevUrls, ...urls]);  // 添加新預覽 URL 到舊預覽 URL 列表中\r\n  };\r\n\r\n  // 分別處理單張、多張圖片，計算 chapterHash\r\n  const handleFileReaderLoad = async (event) => {\r\n    let fileBuffer;\r\n    if (event instanceof Event) {\r\n      // 單張圖片處理\r\n      fileBuffer = event.target.result;\r\n    } else if (mergedFile instanceof File) {\r\n      // 多張圖片處理\r\n      fileBuffer = await mergedFile.arrayBuffer();\r\n    } else {\r\n      throw new Error('Unsupported event or mergedFile type');\r\n    }\r\n    const hash = CryptoJS.SHA256(CryptoJS.lib.WordArray.create(fileBuffer));\r\n    const timestamp = Date.now().toString();\r\n    const hashValue = hash.toString(CryptoJS.enc.Hex);\r\n    const combinedValue = hashValue + timestamp;\r\n    const finalValue = \"0x\" + combinedValue.slice(-64);\r\n    if (event instanceof Event) {\r\n      setHashValue(finalValue); // 單張圖片處理中設置最終的 hash 值\r\n    } else {\r\n      chapterHash = finalValue; // 多張圖片處理中設置最終的 hash 值\r\n    }\r\n  };\r\n  \r\n  const createPromoCover = async (event) => {\r\n    const file = event.target.files[0];\r\n    if (!file) {\r\n      setPromoPreviewImageUrl('');\r\n      return;\r\n    }\r\n    if (validateFileType(file)) {\r\n      previewPromoCover(file);\r\n      if (file.size < 600 * 1024) {\r\n        setCoverFile(file);\r\n        return;\r\n      }\r\n      try {\r\n        const compressedBlob = await imageCompression(file, { maxSizeMB: 0.6 });\r\n        const compressFile = new File([compressedBlob], 'file.jpg', { type: 'image/jpeg', lastModified: Date.now() });\r\n        setCoverFile(compressFile);\r\n      } catch (error) {\r\n        alert(t('圖片壓縮錯誤：') + error);\r\n      }\r\n    } else {\r\n      message.info(t('文件類型不支持，請上傳...格式的圖片'));\r\n      return -1;\r\n    }\r\n  };\r\n\r\n  // 驗證檔案類型是否符合要求\r\n  const validateFileType = (file) => {\r\n    const allowedTypes = [\"image/jpeg\", \"image/png\", \"image/jpg\"];\r\n    return allowedTypes.includes(file.type);\r\n  };\r\n\r\n  // 預覽圖片\r\n  const previewImage = (file) => {\r\n    const reader = new FileReader();\r\n    reader.readAsDataURL(file);\r\n    reader.onloadend = () => {\r\n      setPreviewImageUrl(reader.result);\r\n    };\r\n  };\r\n\r\n  // 預覽圖片\r\n  const previewPromoCover = (file) => {\r\n    const reader = new FileReader();\r\n    reader.readAsDataURL(file);\r\n    reader.onloadend = () => {\r\n      setPromoPreviewImageUrl(reader.result);\r\n    };\r\n  };\r\n\r\n  // 允許使用者刪除不需要的文件預覽\r\n  const handleRemoveFile = (index) => {\r\n    const newFiles = [...file];\r\n    const newUrls = [...previewImageUrls];\r\n    newFiles.splice(index, 1);\r\n    newUrls.splice(index, 1);\r\n    setFiles(newFiles);\r\n    setPreviewImageUrls(newUrls);\r\n  };\r\n\r\n  const handleDragEnd = (result) => {\r\n    if (!result.destination) {\r\n      return;\r\n    }\r\n    const items = [...file];\r\n    const urls = [...previewImageUrls];\r\n    const [reorderedItem] = items.splice(result.source.index, 1);\r\n    const [reorderedUrl] = urls.splice(result.source.index, 1);\r\n    items.splice(result.destination.index, 0, reorderedItem);\r\n    urls.splice(result.destination.index, 0, reorderedUrl);\r\n    setFiles(items);\r\n    setPreviewImageUrls(urls);\r\n  };\r\n  \r\n  // 漫畫等級取值\r\n  function ChoseLevel(e){\r\n    let choseLevel = e.target.value;\r\n    formParams.category = choseLevel;\r\n  };\r\n\r\n  // 檔案不可為空\r\n  async function checkFile() {\r\n    if(showChapterForm == false){\r\n      const {category, title, description} = formParams;\r\n      if (title && title.length > 50) {\r\n        message.info(t('標題命名不可超過50個字!'));\r\n        return -1;\r\n      } else if( !category || !title || !description || file.length === 0) {\r\n        updateMsg(t('請填寫所有欄位'))\r\n        return -1;\r\n      } \r\n    }else{\r\n      const {title, price, isFree} = formParams_1;\r\n      if (title && title.length > 50) {\r\n        message.info(t('標題命名不可超過50個字!'));\r\n        return -1;\r\n      } else if (!comicHash || !title || (!formParams_1.isFree && !price) || file.length === 0) {\r\n        updateMsg(t('請填寫所有欄位'))\r\n        return -1;\r\n      }\r\n    };\r\n  };\r\n\r\n  useEffect(() => {\r\n    connectToWeb3();\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    // 检查是否传递了参数并设置 showChapterForm 状态\r\n    if (location.state && location.state.showChapterForm) {\r\n      //console.log(\"Location state:\", location.state);\r\n      setComicHash(location.state.comicHash);\r\n      setShowChapterForm(true);\r\n    }\r\n  }, [location]);\r\n\r\n// 处理生成合并图片并进行翻页\r\nconst handleGeneratePages = async () => {\r\n  return new Promise(async (resolve, reject) => {\r\n    const singleFile = file[0];\r\n    if (file.length === 1) {\r\n      if (singleFile.size < 600 * 1024) {\r\n        mergedFile = singleFile; // 尺寸小於600KB，直接回傳\r\n        resolve();\r\n        return;\r\n      }\r\n      try {\r\n        const compressedBlob = await imageCompression(singleFile, { maxSizeMB: 0.6 });\r\n        mergedFile = new File([compressedBlob], 'compress.jpg', { type: 'image/jpeg', lastModified: Date.now() });\r\n          resolve();\r\n      } catch (error) {\r\n        alert(t('圖片壓縮錯誤：') + error);\r\n        reject(error);\r\n      }\r\n    } else {\r\n      const canvas = document.createElement('canvas');\r\n      const ctx = canvas.getContext('2d');\r\n      canvas.width = file.length * 1200; // 合併後的寬度\r\n      canvas.height = 1600; // 固定高度\r\n      await Promise.all(file.map((file, index) => {\r\n        return new Promise((resolve) => {\r\n          const img = new Image();\r\n          img.onload = () => {\r\n            ctx.drawImage(img, index * 1200, 0, 1200, 1600);\r\n            resolve();\r\n          };\r\n          img.src = URL.createObjectURL(file);\r\n        });\r\n      }));\r\n      canvas.toBlob(async (blob) => {\r\n        const mergedFileBlob = new Blob([blob], { type: 'image/jpeg' });\r\n        try {\r\n          const compressedBlob = await imageCompression(mergedFileBlob, { maxSizeMB: 0.6, useWebWorker: true });\r\n          const finalCanvas = document.createElement('canvas');\r\n          finalCanvas.width = canvas.width;\r\n          finalCanvas.height = canvas.height;\r\n          const finalCtx = finalCanvas.getContext('2d');\r\n          const compressedImage = new Image();\r\n          compressedImage.onload = () => {\r\n            finalCtx.drawImage(compressedImage, 0, 0, finalCanvas.width, finalCanvas.height);\r\n            finalCanvas.toBlob((finalBlob) => {\r\n              mergedFile = new File([finalBlob], 'compress.jpg', { type: 'image/jpeg', lastModified: Date.now() });\r\n              // 创建下载链接并触发下载\r\n              //const downloadLink = document.createElement('a');\r\n              //downloadLink.href = URL.createObjectURL(mergedFile);\r\n              //downloadLink.download = fileName;\r\n              //downloadLink.click();\r\n              resolve();\r\n            }, 'image/jpeg');\r\n          };\r\n          compressedImage.src = URL.createObjectURL(new Blob([compressedBlob]));\r\n        } catch (error) {\r\n          alert(t('圖片壓縮錯誤：') + error);\r\n          reject(error);\r\n        }\r\n      }, 'image/jpeg');\r\n    }\r\n  });\r\n};\r\n\r\n\r\nreturn (\r\n  <div className=\"upload-form\">\r\n    <div className=\"step-container\">\r\n      <div className={`step-item ${stepCompleted && !showChapterForm ? 'step-completed' : ''}`}>\r\n        <div className=\"step-line\">\r\n          <div className={`line ${stepCompleted ? 'bg-blue' : 'bg-gray'}`}></div>\r\n          <div className=\"dot\">1</div>\r\n          <div className={`line ${stepCompleted ? 'bg-blue' : 'bg-gray'}`}></div>\r\n        </div>\r\n        <div className=\"step-title\">{t('新增漫畫')}</div>\r\n      </div>\r\n      <div className={`step-item ${!showChapterForm && !stepCompleted ? 'step-item-gray' : ''}`}>\r\n        <div className=\"step-line\">\r\n          <div className={`line ${!showChapterForm && !stepCompleted ? 'bg-gray' : 'bg-blue'}`}></div>\r\n          <div className=\"dot\">2</div>\r\n          <div className={`line ${!showChapterForm && !stepCompleted ? 'bg-gray' : 'bg-blue'}`}></div>\r\n        </div>\r\n        <div className=\"step-title\">{t('添加章節')}</div>\r\n      </div>\r\n    </div>\r\n    {showChapterForm ? (\r\n      <div>\r\n        <Form>\r\n          <Form.Group as={Row} className='mb-3 label-container'>\r\n            <Form.Label column sm={3} className='label-style col-form-label label-section'>\r\n                {t('本章名稱')}\r\n            </Form.Label>\r\n            <Col sm={9}>\r\n              <Form.Control\r\n                type=\"text\"\r\n                value={formParams_1.title}\r\n                placeholder={t('請輸入章節名稱')}\r\n                onChange={(e) => updateFormParams_1({ ...formParams_1, title: e.target.value })}\r\n                disabled={!isCreator}\r\n              />\r\n            </Col>\r\n          </Form.Group>\r\n\r\n          <Form.Group as={Row} className='mb-2 label-container'>\r\n            <Form.Label column sm={3} className='label-style col-form-label label-section'>\r\n              {t('本章價格')}\r\n            </Form.Label>\r\n            <Col sm={9}>\r\n              <Form.Control\r\n                type=\"number\"\r\n                value={formParams_1.isFree ? '0' : formParams_1.price}  // 如果 isFree 為 true，顯示 '0'，否則顯示 formParams_1.price\r\n                placeholder={t('至少 0.01 ETH')}\r\n                step=\"0.01\"\r\n                disabled={formParams_1.isFree || !isCreator}  // 如果 isFree 為 true，則禁用輸入框\r\n                onChange={(e) => {\r\n                  if (!formParams_1.isFree) {  // 如果不是免費狀態才更新 price\r\n                    updateFormParams_1({ ...formParams_1, price: e.target.value });\r\n                  }\r\n                }}\r\n              />\r\n            </Col>\r\n          </Form.Group>\r\n\r\n          <Form.Group as={Row} className='mb-3'>\r\n            <div style={{ display: 'flex' }}>\r\n              <Form.Label column sm={3} className='label-style  '>\r\n                {t('本章免費')}\r\n              </Form.Label>\r\n              <Form.Check\r\n                type=\"checkbox\"\r\n                onChange={(e) => {\r\n                  const isFree = e.target.checked;\r\n                  updateFormParams_1({\r\n                    ...formParams_1,\r\n                    isFree: isFree,\r\n                    price: isFree ? 0 : formParams_1.price // 如果是免费，则将价格设为 0，否则保持原来的价格\r\n                  });\r\n                }}\r\n                disabled={!isCreator}\r\n                checked={formParams_1.isFree}\r\n                style={{ transform: 'scale(1.8)', marginTop: '12px', marginLeft: '1.3rem' }}\r\n              />\r\n            </div>\r\n          </Form.Group>\r\n\r\n          <Form.Group as={Row} className='mb-2'>\r\n            <div style={{ display: 'flex' }}>\r\n              <Form.Label\r\n                className='label-style col-form-label'\r\n                style={{ marginRight: '1rem', whiteSpace: 'nowrap' }}\r\n              >\r\n                {t('本章作品上傳')}\r\n              </Form.Label>\r\n              <Form.Control\r\n                type=\"file\"\r\n                onChange={handleMultiFileInputChange}\r\n                disabled={!isCreator}\r\n                multiple\r\n                style={{ flex: 1 }} // 使文件输入框占据剩余空间\r\n              />\r\n            </div>\r\n            <div className='file-upload-long' style={{ display: 'flex', flexDirection: 'column' }}>\r\n                <div id=\"start\" style={{ display: 'block' }}>\r\n                  {previewImageUrls.length > 0 ? (\r\n                      <DragDropContext onDragEnd={handleDragEnd}>\r\n                        <Droppable droppableId=\"droppable\">\r\n                          {(provided) => (\r\n                            <div\r\n                              ref={provided.innerRef}\r\n                              {...provided.droppableProps}\r\n                              className=\"image-list\"\r\n                            >\r\n                              {previewImageUrls.map((url, index) => (\r\n                                <Draggable key={index} draggableId={`draggable-${index}`} index={index}>\r\n                                  {(provided) => (\r\n                                    <div\r\n                                      ref={provided.innerRef}\r\n                                      {...provided.draggableProps}\r\n                                      {...provided.dragHandleProps}\r\n                                      className=\"image-item\"\r\n                                    >\r\n                                      <img\r\n                                        src={url}\r\n                                        alt={`Preview ${index}`}\r\n                                        className=\"preview-image\"\r\n                                      />\r\n                                      <Button\r\n                                        onClick={() => handleRemoveFile(index)}\r\n                                        className=\"remove-button\"\r\n                                        variant=\"light\"\r\n                                      >\r\n                                        <MdClose className=\"MdClose-button\" />\r\n                                      </Button>\r\n                                      <MdDragHandle style={{ position: 'absolute', bottom: '5px', right: '5px', cursor: 'grab' }} />\r\n                                    </div>\r\n                                  )}\r\n                                </Draggable>\r\n                              ))}\r\n                              {provided.placeholder}\r\n                            </div>\r\n                          )}\r\n                        </Droppable>\r\n                      </DragDropContext>\r\n                  ) : (\r\n                    <>\r\n                      <CardImage size={48} />\r\n                      <div id=\"notimage2\" className=\"hidden\">\r\n                        {t('上傳本章漫畫內容')}<br /><br />{t('條漫：請上傳1整章圖檔')}<br /><br />{t('頁漫：請上傳多張圖檔')}<br />{t('寬度：1200/張、長度：1600px')}\r\n                      </div>\r\n                    </>\r\n                  )}\r\n\r\n                </div>\r\n            </div>\r\n          </Form.Group>\r\n\r\n          <div className=\"text-red-500 text-center\">{msg}</div>\r\n          <Button onClick={createChapter} id=\"list-button\" data-backgroundcolor=\"#fff\">{t('確認上傳')}</Button>\r\n        </Form>\r\n      </div>\r\n    ) : (\r\n      <div>\r\n        <Form>\r\n          <Form.Group as={Row} className='mb-3 label-container'>\r\n              <Form.Label column sm={3} className='label-style label-section'>\r\n                {t('漫畫名稱')}\r\n              </Form.Label>\r\n              <Col sm={9}>\r\n                <Form.Control\r\n                  type=\"text\"\r\n                  value={formParams.title}\r\n                  onChange={(e) => updateFormParams({ ...formParams, title: e.target.value })}\r\n                  disabled={!isCreator}\r\n                />\r\n              </Col>\r\n          </Form.Group>\r\n\r\n          <Form.Group as={Row} className='mb-3 label-container'>\r\n            <Form.Label column sm={3} className='label-style label-section'>\r\n              {t('漫畫類型')}\r\n            </Form.Label>\r\n            <Col sm={9}>\r\n              <Form.Control\r\n                as=\"select\"\r\n                className=\"form-select\"\r\n                onChange={ChoseLevel}\r\n                disabled={!isCreator}\r\n              >\r\n                <option>{t('請選擇漫畫類型')}</option>\r\n                {grading.map((name, index) => (\r\n                  <option key={index} value={name}>{t(name)}</option>\r\n                ))}\r\n              </Form.Control>\r\n            </Col>\r\n          </Form.Group>\r\n\r\n          <Form.Group>\r\n            <Form.Label className='label-style mb-4 col-form-label'>{t('漫畫簡介')}</Form.Label>\r\n            <Form.Control\r\n              as=\"textarea\"\r\n              rows={5}\r\n              value={formParams.description}\r\n              onChange={(e) => updateFormParams({ ...formParams, description: e.target.value })}\r\n              disabled={!isCreator}\r\n            />\r\n          </Form.Group>\r\n\r\n          <Form.Group controlId=\"file-upload\" className='pt-4'>\r\n          <div style={{ display: 'flex' }}>\r\n            <Form.Label className='label-style col-form-label' style={{ marginRight: '1rem', whiteSpace: 'nowrap' }}>\r\n              {t('漫畫封面')}\r\n            </Form.Label>\r\n            <Form.Control\r\n              type=\"file\"\r\n              name=\"fileUpload\"\r\n              accept=\"image/*\"\r\n              style={{ flex: 1 }}\r\n              onChange={handleFileInputChange}\r\n              disabled={!isCreator}\r\n            />\r\n          </div>\r\n          <div className='file-upload' style={{ display: 'flex', flexDirection: 'column' }}>\r\n              <div id=\"start\" style={{ display: 'block' }}>\r\n                {previewImageUrl ? (\r\n                  <img\r\n                    src={previewImageUrl}\r\n                    alt=\"Preview\"\r\n                  />\r\n                ) : (\r\n                  <>\r\n                    <CardImage size={48} />\r\n                    <div id=\"notimage\" className=\"hidden\">{t('上傳漫畫封面')}</div>\r\n                  </>\r\n                )}\r\n              </div>\r\n          </div>\r\n          </Form.Group>\r\n\r\n          <Form.Group controlId=\"file-upload\" className='pt-4 pb-3'>\r\n          <div style={{ display: 'flex' }}>\r\n            <Form.Label className='label-style col-form-label' style={{ marginRight: '1rem', whiteSpace: 'nowrap' }}>\r\n              {t('漫畫橫向封面')}\r\n            </Form.Label>\r\n            <Form.Control\r\n              type=\"file\"\r\n              name=\"fileUpload\"\r\n              accept=\"image/*\"\r\n              style={{ flex: 1, marginBottom: '1rem' }}\r\n              onChange={createPromoCover}\r\n              disabled={!isCreator}\r\n            />\r\n          </div>\r\n          <div className='file-upload' style={{ display: 'flex', flexDirection: 'column' }}>\r\n              <div id=\"start\" style={{ display: 'block' }}>\r\n                {promoPreviewImageUrl ? (\r\n                  <img\r\n                    src={promoPreviewImageUrl}\r\n                    alt=\"Promo Cover Preview\"\r\n                  />\r\n                ) : (\r\n                  <>\r\n                    <CardImage size={48} />\r\n                    <div id=\"notimage2\" className=\"hidden\">{t('上傳漫畫橫向封面')}</div>\r\n                  </>\r\n                )}\r\n              </div>\r\n          </div>\r\n          </Form.Group>\r\n\r\n          <div className=\"text-red-500 text-center\">{msg}</div>\r\n          <Button onClick={createComic} id=\"list-button\" data-backgroundcolor=\"#fff\">{t('確認上傳')}</Button>\r\n        </Form>\r\n      </div>\r\n    )}\r\n  </div>\r\n);\r\n};\r\n\r\nexport default CreateWork;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}