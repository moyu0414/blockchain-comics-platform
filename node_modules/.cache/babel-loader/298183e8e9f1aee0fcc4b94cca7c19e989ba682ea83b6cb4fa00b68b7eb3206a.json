{"ast":null,"code":"import React,{useState,useEffect}from'react';import{Container,Carousel,Card,Col,Row,Tabs,Tab,Form,Button,OverlayTrigger,Tooltip,Modal,Table}from'react-bootstrap';import'./bootstrap.min.css';import{Search,Cart,CartPlusFill,Trash,Funnel,SortNumericDown,SortNumericUp}from'react-bootstrap-icons';import{Link}from\"react-router-dom\";import{message}from'antd';import comicData from'../contracts/ComicPlatform.json';import{initializeWeb3,disableAllButtons,enableAllButtons}from'../index';import{useTranslation}from'react-i18next';import i18n from'../i18n';import axios from'axios';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const website=process.env.REACT_APP_Website;const API_KEY=process.env.REACT_APP_API_KEY;const QuantityControl=_ref=>{let{value,onChange}=_ref;const handleIncrease=()=>{onChange(value+1);};const handleDecrease=()=>{if(value>1){onChange(value-1);}};return/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex align-items-center\",children:[/*#__PURE__*/_jsx(Button,{variant:\"outline-secondary\",onClick:handleDecrease,children:\"-\"}),/*#__PURE__*/_jsx(Form.Control,{type:\"text\",value:value,className:\"mx-2 text-center\",readOnly:true}),/*#__PURE__*/_jsx(Button,{variant:\"outline-secondary\",onClick:handleIncrease,children:\"+\"})]});};function NftMarket(){const[comic,setComic]=useState([]);const[material,setMaterial]=useState([]);const[cartItems,setCartItems]=useState([]);const[show,setShow]=useState(false);const[showSearch,setShowSearch]=useState(false);const[searchTerm,setSearchTerm]=useState('');const[searchResults,setSearchResults]=useState([]);const[web3,setWeb3]=useState('');const[currentAccount,setCurrentAccount]=useState(false);const[isAscending,setIsAscending]=useState(true);const[chunkSize,setChunkSize]=useState(4);const[loading,setLoading]=useState(true);const{t}=useTranslation();const[selectedGrading,setSelectedGrading]=useState(t('角色商品化'));const storedArrayJSON=localStorage.getItem('comicDatas');const storedArray=JSON.parse(storedArrayJSON);const headers={'api-key':API_KEY};const[grading,setGrading]=useState([t('角色商品化'),t('改編權'),t('廣告宣傳'),t('專屬會員卡'),t('粉絲俱樂部徽章'),t('線上社區認證'),t('數位平台使用'),t('其他')]);let allRecord=[];let comicStats={};let CountComicDetails={};let temp=[];const initData=async()=>{try{const response=await axios.get(\"\".concat(website,\"/api/nftMarket/records\"),{headers});let nftData=response.data;nftData.forEach(item=>{const keyData=\"\".concat(item.comicHash,\"-\").concat(item.price,\"-\").concat(item.royalty,\"-\").concat(item.description||\"\");const lastPriceValue=Object.values(item.price).pop();const updatedRecord={...item,// 保留原有属性\nisFanCreation:item.minter===item.owner?t('原創'):t('轉售'),// 添加新属性\nkeyData,price:lastPriceValue};if(item.forSale===1){allRecord.push(updatedRecord);}if(!comicStats[keyData]){comicStats[keyData]={tot:0,sale:0};}comicStats[keyData].tot+=1;if(item.minter!==item.owner){comicStats[keyData].sale+=1;}});const keyhMap=allRecord.map(record=>{var _comicStats$record$ke,_comicStats$record$ke2,_comicStats$record$ke3,_comicStats$record$ke4;return{...record,...(record.isFanCreation===t('原創')?{totQty:((_comicStats$record$ke=comicStats[record.keyData])===null||_comicStats$record$ke===void 0?void 0:_comicStats$record$ke.tot)||0,saleQty:((_comicStats$record$ke2=comicStats[record.keyData])===null||_comicStats$record$ke2===void 0?void 0:_comicStats$record$ke2.sale)||0,totSale:(((_comicStats$record$ke3=comicStats[record.keyData])===null||_comicStats$record$ke3===void 0?void 0:_comicStats$record$ke3.tot)||0)-(((_comicStats$record$ke4=comicStats[record.keyData])===null||_comicStats$record$ke4===void 0?void 0:_comicStats$record$ke4.sale)||0)}:{totQty:1,saleQty:0,totSale:1})};});keyhMap.forEach(record=>{const{isFanCreation,keyData}=record;if(isFanCreation===t('原創')){if(!CountComicDetails[keyData]){CountComicDetails[keyData]=true;temp.push(record);}}else{temp.push(record);}});const fetchImage=async data=>{const nftImgResponse=await axios.get(\"\".concat(website,\"/api/nftIMG/\").concat(data.comicHash,\"/\").concat(data.tokenId),{responseType:'blob',headers});if(nftImgResponse.data.type==='image/jpeg'){data.image=URL.createObjectURL(nftImgResponse.data);}else{const url=data.protoFilename===1?\"\".concat(website,\"/api/coverFile/\").concat(data.comicHash):\"\".concat(website,\"/api/comicIMG/\").concat(data.comicHash);const coverImgResponse=await axios.get(url,{responseType:'blob',headers});data.image=URL.createObjectURL(coverImgResponse.data);}data.names=parseAuthorizations(data.description).map(auth=>auth.name);};await Promise.all(temp.map(fetchImage));//console.log(temp);\nsetComic(temp);setMaterial(temp);setLoading(false);}catch(error){console.error('Error initializing contract:',error);}};useEffect(()=>{initData();updateChunkSize();window.addEventListener('resize',updateChunkSize);return()=>window.removeEventListener('resize',updateChunkSize);},[]);const parseAuthorizations=text=>{text=text.trim();const lines=text.includes('\\n')?text.split('\\n'):[text];return lines.map(line=>{const[name]=line.split(':');return{name:t(name.trim())};});};const handleGradingChange=event=>{setSelectedGrading(event.target.value);};const filteredMaterials=Object.values(material).filter(data=>{if(selectedGrading===t('其他')){return data.names.some(name=>!grading.includes(name));}else{return data.names.includes(selectedGrading);}});const handleSearchClick=label=>{setShowSearch(true);};const handleSearch=e=>{e.preventDefault();if(searchTerm.trim()===''){setSearchResults([]);setShowSearch(false);return;}const results=material.filter(item=>item.title.includes(searchTerm)||item.minter.includes(searchTerm)||item.penName.includes(searchTerm)||item.price.includes(searchTerm)||item.names.some(name=>name.includes(searchTerm))||item.tokenTitle.includes(searchTerm)||item.isFanCreation.includes(searchTerm));setSearchResults(results);setShowSearch(false);};const handleSort=()=>{setIsAscending(!isAscending);const sortedComic=[...comic].sort((a,b)=>{return!isAscending?a.price-b.price:b.price-a.price;});setComic(sortedComic);if(searchResults.length!==0){const sortedResults=[...searchResults].sort((a,b)=>{return!isAscending?a.price-b.price:b.price-a.price;});setSearchResults(sortedResults);}if(material.length!==0){const sortedMaterial=[...material].sort((a,b)=>{return!isAscending?a.price-b.price:b.price-a.price;});setMaterial(sortedMaterial);}};const handleAddToCart=async data=>{const web3=await initializeWeb3(t);if(web3){setWeb3(web3);const accounts=await web3.eth.getAccounts();if(accounts[0]){let account=accounts[0].toLowerCase();setCurrentAccount(account);const{tokenId,title,image,price,verify}=data;if(account===data.minter||account===data.owner){message.info(t('您擁有此NFT'));}else{if(data.verify===1){const res=await axios.get(\"\".concat(website,\"/api/isCreator\"),{headers:headers,params:{currentAccount:account}});const isCreator=res.data[0].is_creator;if(isCreator===3){message.info(\"\".concat(t('購買此NFT需要進行身分驗證'),\"\\uFF0C\").concat(t('但您已被本平台禁用驗證權限！')));return;}else if(isCreator===2){message.info(\"\".concat(t('購買此NFT需要進行身分驗證'),\"\\uFF0C\").concat(t('本平台管理者尚未審核您的身分，請稍後在試！')));return;}else if(isCreator===0){message.info(\"\".concat(t('購買此NFT需要進行身分驗證'),\"\\uFF0C\").concat(t('您尚未在本平台進行身分驗證，請先到\"個人資訊\"進行身分驗證！')));return;}}message.info(t('購物車添加成功'));setCartItems(prevItems=>{const updatedItems=prevItems.map(item=>{if(item.tokenId===tokenId){const newSaleQty=item.saleQty+1;return{...item,saleQty:Math.min(newSaleQty,item.totSale)};}return item;});if(prevItems.some(item=>item.tokenId===tokenId)){return updatedItems;}return[...prevItems,{tokenId,title,image,price,saleQty:1,totSale:data.totSale,tokenTitle:data.tokenTitle}];});}}else{message.info(t('請先登入以太坊錢包，才開放購物車功能'));}}};const handleQuantityChange=(tokenId,newQuantity)=>{setCartItems(prevItems=>prevItems.map(item=>{if(item.tokenId===tokenId){const updatedQuantity=newQuantity<=item.totSale?newQuantity:item.saleQty;return{...item,saleQty:updatedQuantity};}return item;}));};const handleRemove=tokenId=>{setCartItems(prevItems=>prevItems.filter(item=>item.tokenId!==tokenId));};const totalAmount=cartItems.reduce((total,item)=>total+item.price*item.saleQty,0).toFixed(2);const handlePurchase=async()=>{try{if(cartItems.length===0){return;}disableAllButtons();let balance=await web3.eth.getBalance(currentAccount);balance=balance.toString()/1e18;let price=totalAmount;if(balance>price){const tokenIds=cartItems.flatMap(_ref2=>{let{tokenId,saleQty}=_ref2;return Array.from({length:saleQty},(_,j)=>tokenId-j);});price=web3.utils.toWei(price,'ether');//console.log(totalAmount);\n//console.log('tokenIds', tokenIds);  // 所有的tokenId\nconst web3Instance=new web3.eth.Contract(comicData.abi,comicData.address);await web3Instance.methods.purchaseNFT(tokenIds).send({from:currentAccount,value:price});try{const response=await axios.put(\"\".concat(website,\"/api/update/nftMarket/owner\"),{tokenId:tokenIds,currentAccount:currentAccount,forSale:0},{headers:headers});message.info(t('NFT購買成功'));window.location.replace(\"/bookcase\");}catch(error){console.error('Error updating DB NFT:',error);}}else{message.info(t('餘額不足'));}}catch(error){if(error.message.includes('User denied transaction signature')){message.info(t('拒绝交易'));}else{alert(t('購買NFT發生錯誤：')+error);}}finally{enableAllButtons();}};const TooltipWrapper=_ref3=>{let{text,children}=_ref3;return/*#__PURE__*/_jsx(OverlayTrigger,{placement:\"top\",overlay:/*#__PURE__*/_jsx(Tooltip,{id:\"tooltip\",children:text}),children:children});};const tooltips={material:t('IP種類篩選'),copyright:t('作者原創授權NFT'),resale:t('持有者轉售NFT')};const renderTooltip=(title,penName,names)=>props=>/*#__PURE__*/_jsxs(Tooltip,{id:\"button-tooltip\",...props,children:[title,/*#__PURE__*/_jsx(\"br\",{}),penName,/*#__PURE__*/_jsx(\"hr\",{}),names.map((name,index)=>/*#__PURE__*/_jsx(\"div\",{children:name},index))]});const updateChunkSize=()=>{if(window.innerWidth<=768){setChunkSize(4);// 屏幕宽度 768px 或以下时，每页显示 4 个项目\n}else{setChunkSize(8);// 屏幕宽度大于 768px 时，每页显示 8 个项目\n}};const chunkArray=(arr,size)=>{const result=[];for(let i=0;i<arr.length;i+=size){result.push(arr.slice(i,i+size));}return result;};const groupedResults=chunkArray(comic.filter(data=>data.isFanCreation===t('原創')),chunkSize);const searchgroupedResults=chunkArray(searchResults,chunkSize);return/*#__PURE__*/_jsxs(_Fragment,{children:[!loading&&/*#__PURE__*/_jsxs(Container,{className:\"nftMarket\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-center fw-bold\",style:{backgroundColor:\"green\"},children:t('NFT市場')}),/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex justify-content-between align-items-center\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex\",children:[/*#__PURE__*/_jsx(Search,{onClick:handleSearchClick,className:\"nftMarket-search\"}),/*#__PURE__*/_jsx(\"h3\",{className:\"fw-bold pt-3\",children:t('大家都在買')})]}),/*#__PURE__*/_jsxs(\"div\",{onClick:handleSort,className:\"d-flex justify-content-end\",children:[isAscending?/*#__PURE__*/_jsx(SortNumericUp,{size:36}):/*#__PURE__*/_jsx(SortNumericDown,{size:36}),/*#__PURE__*/_jsx(Cart,{size:36,className:\"d-flex align-items-center\",onClick:()=>setShow(true)})]})]}),/*#__PURE__*/_jsxs(Modal,{show:showSearch,onHide:()=>setShowSearch(false),dialogClassName:\"custom-modal-content\",children:[/*#__PURE__*/_jsx(Modal.Body,{children:/*#__PURE__*/_jsxs(Form.Group,{children:[/*#__PURE__*/_jsx(Form.Label,{style:{fontSize:\"20px\"},children:t('搜尋NFT')}),/*#__PURE__*/_jsx(Form.Control,{type:\"text\",value:searchTerm,onChange:e=>setSearchTerm(e.target.value),placeholder:t('請輸入')})]})}),/*#__PURE__*/_jsxs(Modal.Footer,{className:\"custom-modal-footer\",children:[/*#__PURE__*/_jsx(Button,{className:\"mt-3\",onClick:handleSearch,children:t('確定')}),/*#__PURE__*/_jsx(Button,{className:\"mt-3\",onClick:()=>setShowSearch(false),children:t('取消')})]})]}),/*#__PURE__*/_jsxs(Modal,{show:show,onHide:()=>setShow(false),size:\"xl\",centered:true,\"aria-labelledby\":\"exampleModalLabel\",className:\"nftMarket-modal\",children:[/*#__PURE__*/_jsx(Modal.Header,{closeButton:true,className:\"border-bottom-0\",children:/*#__PURE__*/_jsx(Modal.Title,{id:\"exampleModalLabel\",children:t('購物車')})}),/*#__PURE__*/_jsxs(Modal.Body,{children:[/*#__PURE__*/_jsxs(Table,{className:\"table-xs\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"NFT\"}),/*#__PURE__*/_jsx(\"th\",{className:\"text-right\",children:t('價格')}),/*#__PURE__*/_jsx(\"th\",{className:\"text-right\",children:t('數量')}),/*#__PURE__*/_jsx(\"th\",{className:\"text-right\",children:t('總額')}),/*#__PURE__*/_jsx(\"th\",{})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:cartItems.map((item,index)=>/*#__PURE__*/_jsxs(\"tr\",{className:\"item-row \".concat(index===cartItems.length-1?'item-row-last':''),children:[/*#__PURE__*/_jsx(\"td\",{className:\"modal-img nft-position-relative\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"img-container\",children:[/*#__PURE__*/_jsx(\"img\",{src:item.image,alt:item.title,className:\"img-fluid img-thumbnail\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"overlay\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"overlay-title\",children:item.title}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"span\",{className:\"overlay-subtitle\",children:item.tokenTitle})]})]})}),/*#__PURE__*/_jsx(\"td\",{className:\"text-right\",title:t('價格'),children:item.price}),/*#__PURE__*/_jsx(\"td\",{className:\"text-right qty\",title:t('數量'),children:/*#__PURE__*/_jsx(QuantityControl,{value:item.saleQty,onChange:newQuantity=>handleQuantityChange(item.tokenId,newQuantity)})}),/*#__PURE__*/_jsx(\"td\",{className:\"text-right\",title:t('總額'),children:(item.price*item.saleQty).toFixed(2)}),/*#__PURE__*/_jsx(\"td\",{className:\"modal-del\",children:/*#__PURE__*/_jsx(Trash,{size:24,style:{cursor:'pointer'},onClick:()=>handleRemove(item.tokenId)})})]},index))})]}),/*#__PURE__*/_jsx(\"div\",{className:\"d-flex justify-content-end\",children:/*#__PURE__*/_jsxs(\"h5\",{children:[t('總額'),\"\\uFF1A\",/*#__PURE__*/_jsxs(\"span\",{className:\"price text-success\",children:[\"$\",totalAmount]})]})})]}),/*#__PURE__*/_jsx(Modal.Footer,{className:\"border-top-0 d-flex justify-content-end\",children:/*#__PURE__*/_jsx(Button,{onClick:handlePurchase,variant:\"success\",children:t('確認')})})]})]}),/*#__PURE__*/_jsxs(Row,{className:\"pt-1 pb-5\",children:[searchResults.length===0&&/*#__PURE__*/_jsx(Carousel,{interval:3500,pause:\"hover\",wrap:true,indicators:true,className:\"nftMarket-carousel\",children:groupedResults.map((group,groupIndex)=>/*#__PURE__*/_jsx(Carousel.Item,{children:/*#__PURE__*/_jsx(Row,{className:\"nftMarket-carousel-row\",children:group.map((data,index)=>/*#__PURE__*/_jsx(Col,{xs:6,md:3,children:/*#__PURE__*/_jsx(Card,{className:\"effect-image-1\",children:/*#__PURE__*/_jsx(OverlayTrigger,{placement:\"top\",overlay:renderTooltip(data.title,data.penName,data.names),children:/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(Link,{to:\"/nftDetail/tokenId\".concat(data.tokenId),children:[/*#__PURE__*/_jsx(Card.Img,{variant:\"top\",src:data.image,alt:\"image-\".concat(index+1)}),/*#__PURE__*/_jsx(\"div\",{className:\"nftMarket-overlay\",children:/*#__PURE__*/_jsxs(\"span\",{children:[t('已售'),\"\\uFF1A\",data.saleQty,\" \",t('總數'),\"\\uFF1A\",data.totQty]})})]}),/*#__PURE__*/_jsx(Card.Body,{className:\"simple-text\",children:/*#__PURE__*/_jsxs(Card.Text,{className:\"nftMarket-text\",children:[data.tokenTitle,/*#__PURE__*/_jsx(\"br\",{}),\"$ \",data.price,/*#__PURE__*/_jsx(CartPlusFill,{size:25,style:{marginLeft:\"8px\"},onClick:()=>handleAddToCart(data)})]})})]})})})},index))})},groupIndex))}),searchResults.length>0&&/*#__PURE__*/_jsx(Carousel,{interval:null,pause:false,wrap:true,indicators:true,className:\"nftMarket-carousel\",children:searchgroupedResults.map((group,groupIndex)=>/*#__PURE__*/_jsx(Carousel.Item,{children:/*#__PURE__*/_jsx(Row,{className:\"nftMarket-carousel-row\",children:group.map((data,index)=>/*#__PURE__*/_jsx(Col,{xs:6,md:3,children:/*#__PURE__*/_jsx(Card,{className:\"effect-image-1\",children:/*#__PURE__*/_jsx(OverlayTrigger,{placement:\"top\",overlay:renderTooltip(data.title,data.penName,data.names),children:/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(Link,{to:\"/nftDetail/tokenId\".concat(data.tokenId),children:[/*#__PURE__*/_jsx(Card.Img,{variant:\"top\",src:data.image,alt:\"image-\".concat(index+1)}),/*#__PURE__*/_jsx(\"div\",{className:\"nftMarket-overlay\",children:/*#__PURE__*/_jsxs(\"span\",{children:[t('已售'),\"\\uFF1A\",data.saleQty,\" \",t('總數'),\"\\uFF1A\",data.totQty]})})]}),/*#__PURE__*/_jsx(Card.Body,{className:\"simple-text\",children:/*#__PURE__*/_jsxs(Card.Text,{className:\"nftMarket-text\",children:[data.tokenTitle,/*#__PURE__*/_jsx(\"br\",{}),\"$ \",data.price,/*#__PURE__*/_jsx(CartPlusFill,{size:25,style:{marginLeft:\"8px\"},onClick:()=>handleAddToCart(data)})]})})]})})})},index))})},groupIndex))})]}),/*#__PURE__*/_jsx(Row,{className:\"pt-3\",children:/*#__PURE__*/_jsx(\"h3\",{className:\"fw-bold\",children:t('推薦NFT')})}),/*#__PURE__*/_jsxs(Tabs,{defaultActiveKey:\"copyright\",id:\"uncontrolled-tab-example\",children:[/*#__PURE__*/_jsxs(Tab,{eventKey:\"material\",title:/*#__PURE__*/_jsx(TooltipWrapper,{text:tooltips.material,children:/*#__PURE__*/_jsx(\"div\",{children:t('素材')})}),children:[/*#__PURE__*/_jsxs(Form.Group,{children:[/*#__PURE__*/_jsx(Form.Label,{className:\"pt-1\",children:t('IP種類')}),/*#__PURE__*/_jsx(Form.Control,{as:\"select\",value:t(selectedGrading),onChange:handleGradingChange,children:grading.map((option,index)=>/*#__PURE__*/_jsx(\"option\",{value:option,children:option},index))})]}),/*#__PURE__*/_jsx(Row,{className:\"pt-1 pb-5\",children:filteredMaterials.map((data,index)=>/*#__PURE__*/_jsx(Col,{xs:6,md:3,className:\"pt-3\",children:/*#__PURE__*/_jsx(Card,{className:\"effect-image-1\",children:/*#__PURE__*/_jsx(OverlayTrigger,{placement:\"top\",overlay:renderTooltip(data.title,data.penName,data.names),children:/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(Link,{to:\"/nftDetail/tokenId\".concat(data.tokenId),children:[/*#__PURE__*/_jsx(Card.Img,{variant:\"top\",src:data.image,alt:\"image-\".concat(index+1)}),/*#__PURE__*/_jsx(\"div\",{className:\"nftMarket-overlay\",children:/*#__PURE__*/_jsxs(\"span\",{children:[t('已售'),\"\\uFF1A\",data.saleQty,\" \",t('總數'),\"\\uFF1A\",data.totQty]})})]}),/*#__PURE__*/_jsx(Card.Body,{className:\"simple-text\",children:/*#__PURE__*/_jsxs(Card.Text,{className:\"nftMarket-text\",children:[data.tokenTitle,/*#__PURE__*/_jsx(\"br\",{}),\"$ \",data.price,/*#__PURE__*/_jsx(CartPlusFill,{size:25,style:{marginLeft:\"8px\"},onClick:()=>handleAddToCart(data)})]})})]})})})},index))})]}),/*#__PURE__*/_jsx(Tab,{eventKey:\"copyright\",title:/*#__PURE__*/_jsx(TooltipWrapper,{text:tooltips.copyright,children:/*#__PURE__*/_jsx(\"div\",{children:t('原創')})}),children:/*#__PURE__*/_jsx(Row,{className:\"pt-1 pb-5\",children:comic.filter(data=>data.isFanCreation===t('原創')).map((data,index)=>/*#__PURE__*/_jsx(Col,{xs:6,md:3,className:\"pt-3\",children:/*#__PURE__*/_jsx(Card,{className:\"effect-image-1\",children:/*#__PURE__*/_jsx(OverlayTrigger,{placement:\"top\",overlay:renderTooltip(data.title,data.penName,data.names),children:/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(Link,{to:\"/nftDetail/tokenId\".concat(data.tokenId),children:[/*#__PURE__*/_jsx(Card.Img,{src:data.image,alt:\"image-\".concat(index+1)}),/*#__PURE__*/_jsx(\"div\",{className:\"nftMarket-overlay\",children:/*#__PURE__*/_jsxs(\"span\",{children:[t('已售'),\"\\uFF1A\",data.saleQty,\" \",t('總數'),\"\\uFF1A\",data.totQty]})})]}),/*#__PURE__*/_jsx(Card.Body,{className:\"simple-text\",children:/*#__PURE__*/_jsxs(Card.Text,{className:\"nftMarket-text\",children:[data.tokenTitle,/*#__PURE__*/_jsx(\"br\",{}),\"$ \",data.price,/*#__PURE__*/_jsx(CartPlusFill,{size:25,style:{marginLeft:'8px'},onClick:()=>handleAddToCart(data)})]})})]})})})},index))})}),/*#__PURE__*/_jsx(Tab,{eventKey:\"resale\",title:/*#__PURE__*/_jsx(TooltipWrapper,{text:tooltips.resale,children:/*#__PURE__*/_jsx(\"div\",{children:t('轉售')})}),children:/*#__PURE__*/_jsx(Row,{className:\"pt-1 pb-5\",children:comic.filter(data=>data.isFanCreation===t('轉售')).map((data,index)=>/*#__PURE__*/_jsx(Col,{xs:6,md:3,className:\"pt-3\",children:/*#__PURE__*/_jsx(Card,{className:\"effect-image-1\",children:/*#__PURE__*/_jsx(OverlayTrigger,{placement:\"top\",overlay:renderTooltip(data.title,data.penName,data.names),children:/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(Link,{to:\"/nftDetail/tokenId\".concat(data.tokenId),children:[/*#__PURE__*/_jsx(Card.Img,{src:data.image,alt:\"image-\".concat(index+1)}),/*#__PURE__*/_jsx(\"div\",{className:\"nftMarket-overlay\",children:/*#__PURE__*/_jsxs(\"span\",{children:[t('已售'),\"\\uFF1A\",data.saleQty,\" \",t('總數'),\"\\uFF1A\",data.totQty]})})]}),/*#__PURE__*/_jsx(Card.Body,{className:\"simple-text\",children:/*#__PURE__*/_jsxs(Card.Text,{className:\"nftMarket-text\",children:[data.tokenTitle,/*#__PURE__*/_jsx(\"br\",{}),\"$ \",data.price,/*#__PURE__*/_jsx(CartPlusFill,{size:25,style:{marginLeft:'8px'},onClick:()=>handleAddToCart(data)})]})})]})})})},index))})})]})]}),loading&&/*#__PURE__*/_jsx(\"div\",{className:\"loading-container\",children:/*#__PURE__*/_jsx(\"div\",{children:t('頁面加載中')})})]});}export default NftMarket;","map":{"version":3,"names":["React","useState","useEffect","Container","Carousel","Card","Col","Row","Tabs","Tab","Form","Button","OverlayTrigger","Tooltip","Modal","Table","Search","Cart","CartPlusFill","Trash","Funnel","SortNumericDown","SortNumericUp","Link","message","comicData","initializeWeb3","disableAllButtons","enableAllButtons","useTranslation","i18n","axios","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","website","process","env","REACT_APP_Website","API_KEY","REACT_APP_API_KEY","QuantityControl","_ref","value","onChange","handleIncrease","handleDecrease","className","children","variant","onClick","Control","type","readOnly","NftMarket","comic","setComic","material","setMaterial","cartItems","setCartItems","show","setShow","showSearch","setShowSearch","searchTerm","setSearchTerm","searchResults","setSearchResults","web3","setWeb3","currentAccount","setCurrentAccount","isAscending","setIsAscending","chunkSize","setChunkSize","loading","setLoading","t","selectedGrading","setSelectedGrading","storedArrayJSON","localStorage","getItem","storedArray","JSON","parse","headers","grading","setGrading","allRecord","comicStats","CountComicDetails","temp","initData","response","get","concat","nftData","data","forEach","item","keyData","comicHash","price","royalty","description","lastPriceValue","Object","values","pop","updatedRecord","isFanCreation","minter","owner","forSale","push","tot","sale","keyhMap","map","record","_comicStats$record$ke","_comicStats$record$ke2","_comicStats$record$ke3","_comicStats$record$ke4","totQty","saleQty","totSale","fetchImage","nftImgResponse","tokenId","responseType","image","URL","createObjectURL","url","protoFilename","coverImgResponse","names","parseAuthorizations","auth","name","Promise","all","error","console","updateChunkSize","window","addEventListener","removeEventListener","text","trim","lines","includes","split","line","handleGradingChange","event","target","filteredMaterials","filter","some","handleSearchClick","label","handleSearch","e","preventDefault","results","title","penName","tokenTitle","handleSort","sortedComic","sort","a","b","length","sortedResults","sortedMaterial","handleAddToCart","accounts","eth","getAccounts","account","toLowerCase","verify","info","res","params","isCreator","is_creator","prevItems","updatedItems","newSaleQty","Math","min","handleQuantityChange","newQuantity","updatedQuantity","handleRemove","totalAmount","reduce","total","toFixed","handlePurchase","balance","getBalance","toString","tokenIds","flatMap","_ref2","Array","from","_","j","utils","toWei","web3Instance","Contract","abi","address","methods","purchaseNFT","send","put","location","replace","alert","TooltipWrapper","_ref3","placement","overlay","id","tooltips","copyright","resale","renderTooltip","props","index","innerWidth","chunkArray","arr","size","result","i","slice","groupedResults","searchgroupedResults","style","backgroundColor","onHide","dialogClassName","Body","Group","Label","fontSize","placeholder","Footer","centered","Header","closeButton","Title","src","alt","cursor","interval","pause","wrap","indicators","group","groupIndex","Item","xs","md","to","Img","Text","marginLeft","defaultActiveKey","eventKey","as","option"],"sources":["C:/Users/user1/Desktop/blockchain-comics-platform/frontend/src/routes/nftMarket.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { Container, Carousel, Card, Col, Row, Tabs, Tab, Form, Button, OverlayTrigger, Tooltip, Modal, Table } from 'react-bootstrap';\r\nimport './bootstrap.min.css';\r\nimport { Search, Cart, CartPlusFill, Trash, Funnel, SortNumericDown, SortNumericUp  } from 'react-bootstrap-icons';\r\nimport { Link } from \"react-router-dom\";\r\nimport { message } from 'antd';\r\nimport comicData from '../contracts/ComicPlatform.json';\r\nimport { initializeWeb3, disableAllButtons, enableAllButtons } from '../index';\r\nimport { useTranslation } from 'react-i18next';\r\nimport i18n from '../i18n';\r\nimport axios from 'axios';\r\nconst website = process.env.REACT_APP_Website;\r\nconst API_KEY = process.env.REACT_APP_API_KEY;\r\n\r\n\r\nconst QuantityControl = ({ value, onChange }) => {\r\n    const handleIncrease = () => {\r\n      onChange(value + 1);\r\n    };\r\n  \r\n    const handleDecrease = () => {\r\n      if (value > 1) {\r\n        onChange(value - 1);\r\n      }\r\n    };\r\n  \r\n    return (\r\n      <div className=\"d-flex align-items-center\">\r\n        <Button variant=\"outline-secondary\" onClick={handleDecrease}>-</Button>\r\n        <Form.Control\r\n          type=\"text\"\r\n          value={value}\r\n          className=\"mx-2 text-center\"\r\n          readOnly\r\n        />\r\n        <Button variant=\"outline-secondary\" onClick={handleIncrease}>+</Button>\r\n      </div>\r\n    );\r\n  };\r\n\r\nfunction NftMarket() {\r\n    const [comic, setComic] = useState([]);\r\n    const [material, setMaterial] = useState([]);\r\n    const [cartItems, setCartItems] = useState([]);\r\n    const [show, setShow] = useState(false);\r\n    const [showSearch, setShowSearch] = useState(false);\r\n    const [searchTerm, setSearchTerm] = useState('');\r\n    const [searchResults, setSearchResults] = useState([]);\r\n    const [web3, setWeb3] = useState('');\r\n    const [currentAccount, setCurrentAccount] = useState(false);\r\n    const [isAscending, setIsAscending] = useState(true);\r\n    const [chunkSize, setChunkSize] = useState(4);\r\n    const [loading, setLoading] = useState(true);\r\n    const { t } = useTranslation();\r\n    const [selectedGrading, setSelectedGrading] = useState(t('角色商品化'));\r\n    const storedArrayJSON = localStorage.getItem('comicDatas');\r\n    const storedArray = JSON.parse(storedArrayJSON);\r\n    const headers = {'api-key': API_KEY};\r\n    const [grading, setGrading] = useState([\r\n        t('角色商品化'),\r\n        t('改編權'),\r\n        t('廣告宣傳'),\r\n        t('專屬會員卡'),\r\n        t('粉絲俱樂部徽章'),\r\n        t('線上社區認證'),\r\n        t('數位平台使用'),\r\n        t('其他')\r\n    ]);\r\n\r\n    let allRecord = [];\r\n    let comicStats = {};\r\n    let CountComicDetails = {};\r\n    let temp = [];\r\n\r\n    const initData = async () => {\r\n        try {\r\n            const response = await axios.get(`${website}/api/nftMarket/records`, { headers });\r\n            let nftData = response.data;\r\n            nftData.forEach(item => {\r\n                    const keyData = `${item.comicHash}-${item.price}-${item.royalty}-${item.description || \"\"}`;\r\n                    const lastPriceValue = Object.values(item.price).pop();\r\n                    const updatedRecord = {\r\n                        ...item, // 保留原有属性\r\n                        isFanCreation: item.minter === item.owner ? t('原創') : t('轉售'), // 添加新属性\r\n                        keyData,\r\n                        price: lastPriceValue\r\n                    };\r\n                    if (item.forSale === 1) {\r\n                        allRecord.push(updatedRecord);\r\n                    }\r\n                    if (!comicStats[keyData]) {\r\n                        comicStats[keyData] = { tot: 0, sale: 0 };\r\n                    }\r\n                    comicStats[keyData].tot += 1;\r\n                    if (item.minter !== item.owner) {\r\n                        comicStats[keyData].sale += 1;\r\n                    }\r\n            });\r\n            const keyhMap = allRecord.map(record => ({\r\n                ...record,\r\n                ...(record.isFanCreation === t('原創') ? {\r\n                    totQty: comicStats[record.keyData]?.tot || 0,\r\n                    saleQty: comicStats[record.keyData]?.sale || 0,\r\n                    totSale: (comicStats[record.keyData]?.tot || 0) - (comicStats[record.keyData]?.sale || 0)\r\n                } : {\r\n                    totQty: 1,\r\n                    saleQty: 0,\r\n                    totSale: 1\r\n                })\r\n            }));\r\n            keyhMap.forEach(record => {\r\n                const { isFanCreation, keyData } = record;\r\n                if (isFanCreation === t('原創')) {\r\n                    if (!CountComicDetails[keyData]) {\r\n                        CountComicDetails[keyData] = true;\r\n                        temp.push(record);\r\n                    }\r\n                } else {\r\n                    temp.push(record);\r\n                }\r\n            });\r\n            const fetchImage = async (data) => {\r\n                const nftImgResponse = await axios.get(`${website}/api/nftIMG/${data.comicHash}/${data.tokenId}`, {\r\n                    responseType: 'blob',\r\n                    headers,\r\n                  });\r\n                  if (nftImgResponse.data.type === 'image/jpeg') {\r\n                    data.image = URL.createObjectURL(nftImgResponse.data);\r\n                  } else {\r\n                    const url = data.protoFilename === 1\r\n                      ? `${website}/api/coverFile/${data.comicHash}`\r\n                      : `${website}/api/comicIMG/${data.comicHash}`;\r\n                    const coverImgResponse = await axios.get(url, { responseType: 'blob', headers });\r\n                    data.image = URL.createObjectURL(coverImgResponse.data);\r\n                }\r\n                data.names = parseAuthorizations(data.description).map(auth => auth.name);\r\n            };\r\n            await Promise.all(temp.map(fetchImage));\r\n\r\n            //console.log(temp);\r\n            setComic(temp);\r\n            setMaterial(temp);\r\n            setLoading(false);\r\n        } catch (error) {\r\n            console.error('Error initializing contract:', error);\r\n        }\r\n    };\r\n\r\n    useEffect(() => {\r\n        initData();\r\n        updateChunkSize();\r\n        window.addEventListener('resize', updateChunkSize);\r\n        return () => window.removeEventListener('resize', updateChunkSize);\r\n    }, []);\r\n\r\n    const parseAuthorizations = (text) => {\r\n        text = text.trim();\r\n        const lines = text.includes('\\n') ? text.split('\\n') : [text];\r\n        return lines.map(line => {\r\n            const [name] = line.split(':');\r\n            return {\r\n                name: t(name.trim()),\r\n            };\r\n        });\r\n    };\r\n\r\n    const handleGradingChange = (event) => {\r\n        setSelectedGrading(event.target.value);\r\n    };\r\n\r\n    const filteredMaterials = Object.values(material).filter(data => {\r\n        if (selectedGrading === t('其他')) {\r\n            return data.names.some(name => !grading.includes(name));\r\n        } else {\r\n            return data.names.includes(selectedGrading);\r\n        }\r\n    });\r\n\r\n    const handleSearchClick = (label) => {\r\n        setShowSearch(true);\r\n    };\r\n\r\n    const handleSearch = (e) => {\r\n        e.preventDefault();\r\n        if (searchTerm.trim() === '') {\r\n            setSearchResults([]);\r\n            setShowSearch(false);\r\n            return;\r\n        }\r\n        const results = material.filter(item => \r\n            item.title.includes(searchTerm) ||\r\n            item.minter.includes(searchTerm) ||\r\n            item.penName.includes(searchTerm) ||\r\n            item.price.includes(searchTerm) ||\r\n            item.names.some(name => name.includes(searchTerm)) ||\r\n            item.tokenTitle.includes(searchTerm) ||\r\n            item.isFanCreation.includes(searchTerm)\r\n          );\r\n          setSearchResults(results);\r\n          setShowSearch(false);\r\n    };\r\n\r\n    const handleSort = () => {\r\n        setIsAscending(!isAscending);\r\n        const sortedComic = [...comic].sort((a, b) => {\r\n            return !isAscending ? a.price - b.price : b.price - a.price;\r\n        });\r\n        setComic(sortedComic);\r\n        if (searchResults.length !== 0) {\r\n            const sortedResults = [...searchResults].sort((a, b) => {\r\n                return !isAscending ? a.price - b.price : b.price - a.price;\r\n            });\r\n            setSearchResults(sortedResults);\r\n        }\r\n        if (material.length !== 0) {\r\n            const sortedMaterial = [...material].sort((a, b) => {\r\n                return !isAscending ? a.price - b.price : b.price - a.price;\r\n            });\r\n            setMaterial(sortedMaterial);\r\n        }\r\n    };\r\n\r\n    const handleAddToCart = async (data) => {\r\n        const web3 = await initializeWeb3(t);\r\n        if (web3) {\r\n            setWeb3(web3);\r\n            const accounts = await web3.eth.getAccounts();\r\n            if (accounts[0]) {\r\n                let account = accounts[0].toLowerCase();\r\n                setCurrentAccount(account);\r\n                const { tokenId, title, image, price, verify } = data;\r\n                if (account === data.minter || account === data.owner) {\r\n                    message.info(t('您擁有此NFT'));\r\n                } else {\r\n                    if (data.verify === 1) {\r\n                        const res = await axios.get(`${website}/api/isCreator`, {\r\n                            headers: headers,\r\n                            params: {\r\n                                currentAccount: account\r\n                            }\r\n                        });\r\n                        const isCreator = res.data[0].is_creator;\r\n                        if (isCreator === 3) {\r\n                            message.info(`${t('購買此NFT需要進行身分驗證')}，${t('但您已被本平台禁用驗證權限！')}`);\r\n                            return;\r\n                        } else if (isCreator === 2) {\r\n                            message.info(`${t('購買此NFT需要進行身分驗證')}，${t('本平台管理者尚未審核您的身分，請稍後在試！')}`);\r\n                            return;\r\n                        } else if (isCreator === 0) {\r\n                            message.info(`${t('購買此NFT需要進行身分驗證')}，${t('您尚未在本平台進行身分驗證，請先到\"個人資訊\"進行身分驗證！')}`);\r\n                            return;\r\n                        }\r\n                    }\r\n                    message.info(t('購物車添加成功'));\r\n                    setCartItems(prevItems => {\r\n                        const updatedItems = prevItems.map(item => {\r\n                            if (item.tokenId === tokenId) {\r\n                                const newSaleQty = item.saleQty + 1;\r\n                                return {\r\n                                    ...item,\r\n                                    saleQty: Math.min(newSaleQty, item.totSale) \r\n                                };\r\n                            }\r\n                            return item;\r\n                        });\r\n                        if (prevItems.some(item => item.tokenId === tokenId)) {\r\n                            return updatedItems;\r\n                        }\r\n                        return [\r\n                            ...prevItems,\r\n                            { tokenId, title, image, price, saleQty: 1, totSale: data.totSale, tokenTitle: data.tokenTitle }\r\n                        ];\r\n                    });\r\n                }\r\n            } else {\r\n                message.info(t('請先登入以太坊錢包，才開放購物車功能'));\r\n            }\r\n        }\r\n    };\r\n\r\n    const handleQuantityChange = (tokenId, newQuantity) => {\r\n        setCartItems(prevItems =>\r\n          prevItems.map(item => {\r\n            if (item.tokenId === tokenId) {\r\n              const updatedQuantity = newQuantity <= item.totSale ? newQuantity : item.saleQty;\r\n              return { ...item, saleQty: updatedQuantity };\r\n            }\r\n            return item;\r\n          })\r\n        );\r\n      };\r\n\r\n    const handleRemove = (tokenId) => {\r\n        setCartItems(prevItems => prevItems.filter(item => item.tokenId !== tokenId));\r\n    };\r\n\r\n    const totalAmount = cartItems.reduce((total, item) => total + (item.price * item.saleQty), 0).toFixed(2);\r\n\r\n    const handlePurchase = async () => {\r\n        try {\r\n            if (cartItems.length === 0) {\r\n                return;\r\n            }\r\n            disableAllButtons();\r\n            let balance = await web3.eth.getBalance(currentAccount);\r\n            balance = balance.toString() / 1e18;\r\n            let price = totalAmount;\r\n            if (balance > price) {\r\n                const tokenIds = cartItems.flatMap(({ tokenId, saleQty }) =>\r\n                    Array.from({ length: saleQty }, (_, j) => tokenId - j)\r\n                );\r\n                price = web3.utils.toWei(price, 'ether');\r\n                //console.log(totalAmount);\r\n                //console.log('tokenIds', tokenIds);  // 所有的tokenId\r\n                const web3Instance = new web3.eth.Contract(comicData.abi, comicData.address);\r\n                await web3Instance.methods.purchaseNFT(tokenIds).send({from: currentAccount, value: price});\r\n \r\n                try {\r\n                    const response = await axios.put(`${website}/api/update/nftMarket/owner`, {\r\n                        tokenId: tokenIds,\r\n                        currentAccount: currentAccount,\r\n                        forSale: 0\r\n                    }, {\r\n                        headers: headers\r\n                    });\r\n                    message.info(t('NFT購買成功'));\r\n                    window.location.replace(\"/bookcase\");\r\n                } catch (error) {\r\n                    console.error('Error updating DB NFT:', error);\r\n                }\r\n            } else {\r\n                message.info(t('餘額不足'));\r\n            }\r\n        } catch (error) {\r\n            if (error.message.includes('User denied transaction signature')) {\r\n                message.info(t('拒绝交易'));\r\n            } else {\r\n                alert(t('購買NFT發生錯誤：') + error);\r\n            }\r\n        } finally {\r\n            enableAllButtons();\r\n        }\r\n    };\r\n\r\n    const TooltipWrapper = ({ text, children }) => (\r\n        <OverlayTrigger \r\n            placement=\"top\" \r\n            overlay={<Tooltip id=\"tooltip\">{text}</Tooltip>}\r\n        >\r\n            {children}\r\n        </OverlayTrigger>\r\n    );\r\n\r\n    const tooltips = {\r\n        material: t('IP種類篩選'),\r\n        copyright: t('作者原創授權NFT'),\r\n        resale: t('持有者轉售NFT'),\r\n    };\r\n\r\n    const renderTooltip = (title, penName, names) => (props) => (\r\n        <Tooltip id=\"button-tooltip\" {...props}>\r\n            {title}<br />\r\n            {penName}\r\n            <hr />\r\n            {names.map((name, index) => (\r\n                <div key={index}>{name}</div>\r\n            ))}\r\n        </Tooltip>\r\n    );\r\n\r\n    const updateChunkSize = () => {\r\n        if (window.innerWidth <= 768) {\r\n            setChunkSize(4); // 屏幕宽度 768px 或以下时，每页显示 4 个项目\r\n        } else {\r\n            setChunkSize(8); // 屏幕宽度大于 768px 时，每页显示 8 个项目\r\n        }\r\n    };\r\n\r\n    const chunkArray = (arr, size) => {\r\n        const result = [];\r\n        for (let i = 0; i < arr.length; i += size) {\r\n            result.push(arr.slice(i, i + size));\r\n        }\r\n        return result;\r\n    };\r\n\r\n    const groupedResults = chunkArray(comic.filter(data => data.isFanCreation === t('原創')), chunkSize);\r\n    const searchgroupedResults = chunkArray(searchResults, chunkSize);\r\n\r\n    \r\n    return (\r\n        <>\r\n        {!loading &&\r\n            <Container className='nftMarket'>\r\n                <h2 className='text-center fw-bold' style={{backgroundColor: \"green\"}}>{t('NFT市場')}</h2>\r\n                <Row>\r\n                    <div className='d-flex justify-content-between align-items-center'>\r\n                        <div className='d-flex'>\r\n                            <Search onClick={handleSearchClick} className=\"nftMarket-search\" />\r\n                            <h3 className=\"fw-bold pt-3\">{t('大家都在買')}</h3>\r\n                        </div>\r\n                        <div onClick={handleSort} className='d-flex justify-content-end'>\r\n                            {isAscending ? <SortNumericUp size={36} /> : <SortNumericDown size={36} />}\r\n                            <Cart \r\n                                size={36} \r\n                                className='d-flex align-items-center' \r\n                                onClick={() => setShow(true)} \r\n                            />\r\n                        </div>\r\n                        \r\n                    </div>\r\n                    <Modal\r\n                        show={showSearch}\r\n                        onHide={() => setShowSearch(false)}\r\n                        dialogClassName=\"custom-modal-content\"\r\n                    >\r\n                        <Modal.Body>\r\n                            <Form.Group>\r\n                                <Form.Label style={{fontSize: \"20px\"}}>{t('搜尋NFT')}</Form.Label>\r\n                                <Form.Control\r\n                                    type=\"text\"\r\n                                    value={searchTerm}\r\n                                    onChange={(e) => setSearchTerm(e.target.value)}\r\n                                    placeholder={t('請輸入')}\r\n                                />\r\n                            </Form.Group>\r\n                        </Modal.Body>\r\n                        <Modal.Footer className=\"custom-modal-footer\">\r\n                            <Button\r\n                                className=\"mt-3\"\r\n                                onClick={handleSearch}\r\n                            >\r\n                                {t('確定')}\r\n                            </Button>\r\n                            <Button\r\n                                className=\"mt-3\"\r\n                                onClick={() => setShowSearch(false)}\r\n                            >\r\n                                {t('取消')}\r\n                            </Button>\r\n                        </Modal.Footer>\r\n                    </Modal>\r\n\r\n                    <Modal\r\n                        show={show}\r\n                        onHide={() => setShow(false)}\r\n                        size=\"xl\"\r\n                        centered\r\n                        aria-labelledby=\"exampleModalLabel\"\r\n                        className='nftMarket-modal'\r\n                    >\r\n                        <Modal.Header closeButton className=\"border-bottom-0\">\r\n                        <Modal.Title id=\"exampleModalLabel\">\r\n                            {t('購物車')}\r\n                        </Modal.Title>\r\n                        </Modal.Header>\r\n                        <Modal.Body>\r\n                        <Table className=\"table-xs\">\r\n                            <thead>\r\n                            <tr>\r\n                                <th>NFT</th>\r\n                                <th className=\"text-right\">{t('價格')}</th>\r\n                                <th className=\"text-right\">{t('數量')}</th>\r\n                                <th className=\"text-right\">{t('總額')}</th>\r\n                                <th></th>\r\n                            </tr>\r\n                            </thead>\r\n                            <tbody>\r\n                            {cartItems.map((item, index) => (\r\n                                <tr key={index} className={`item-row ${index === cartItems.length - 1 ? 'item-row-last' : ''}`}>\r\n                                <td className=\"modal-img nft-position-relative\">\r\n                                    <div className=\"img-container\">\r\n                                        <img src={item.image} alt={item.title} className=\"img-fluid img-thumbnail\" />\r\n                                        <div className=\"overlay\">\r\n                                            <span className=\"overlay-title\">{item.title}</span><br />\r\n                                            <span className=\"overlay-subtitle\">{item.tokenTitle}</span>\r\n                                        </div>\r\n                                    </div>\r\n                                </td>\r\n                                <td className=\"text-right\" title={t('價格')}>\r\n                                    {item.price}\r\n                                </td>\r\n                                <td className=\"text-right qty\" title={t('數量')}>\r\n                                    {/* <Form.Control\r\n                                        type=\"number\"\r\n                                        value={item.saleQty}\r\n                                        min=\"1\"\r\n                                        onChange={(e) => handleQuantityChange(item.tokenId, parseInt(e.target.value, 10))}\r\n                                    /> */}\r\n                                    <QuantityControl\r\n                                        value={item.saleQty}\r\n                                        onChange={(newQuantity) => handleQuantityChange(item.tokenId, newQuantity)}\r\n                                    />\r\n                                </td>\r\n                                <td className=\"text-right\" title={t('總額')}>\r\n                                    {(item.price * item.saleQty).toFixed(2)}\r\n                                </td>\r\n                                <td className=\"modal-del\">\r\n                                    <Trash\r\n                                        size={24}\r\n                                        style={{ cursor: 'pointer' }}\r\n                                        onClick={() => handleRemove(item.tokenId)}\r\n                                    />\r\n                                </td>\r\n                                </tr>\r\n                            ))}\r\n                            </tbody>\r\n                        </Table>\r\n                        <div className=\"d-flex justify-content-end\">\r\n                            <h5>{t('總額')}：<span className=\"price text-success\">${totalAmount}</span></h5>\r\n                        </div>\r\n                        </Modal.Body>\r\n                        <Modal.Footer className=\"border-top-0 d-flex justify-content-end\">\r\n                            <Button onClick={handlePurchase} variant=\"success\">\r\n                                {t('確認')}\r\n                            </Button>\r\n                        </Modal.Footer>\r\n                    </Modal>\r\n                </Row>\r\n                <Row className='pt-1 pb-5'>\r\n                    {searchResults.length === 0 && (\r\n                        <Carousel interval={3500} pause=\"hover\" wrap={true} indicators={true} className=\"nftMarket-carousel\">\r\n                            {groupedResults.map((group, groupIndex) => (\r\n                                <Carousel.Item key={groupIndex}>\r\n                                    <Row className=\"nftMarket-carousel-row\">\r\n                                        {group.map((data, index) => (\r\n                                            <Col xs={6} md={3} key={index}>\r\n                                                <Card className=\"effect-image-1\">\r\n                                                    <OverlayTrigger placement=\"top\" overlay={renderTooltip(data.title, data.penName, data.names)}>\r\n                                                        <div>\r\n                                                            <Link to={`/nftDetail/tokenId${data.tokenId}`}>\r\n                                                                <Card.Img variant=\"top\" src={data.image} alt={`image-${index + 1}`} />\r\n                                                                <div className=\"nftMarket-overlay\">\r\n                                                                    <span>{t('已售')}：{data.saleQty} {t('總數')}：{data.totQty}</span>\r\n                                                                </div>\r\n                                                                </Link>\r\n                                                            <Card.Body className=\"simple-text\">\r\n                                                                <Card.Text className=\"nftMarket-text\">\r\n                                                                    {data.tokenTitle}<br />\r\n                                                                    $ {data.price}\r\n                                                                    <CartPlusFill size={25} style={{marginLeft: \"8px\"}} onClick={() => handleAddToCart(data)} />\r\n                                                                </Card.Text>\r\n                                                            </Card.Body>\r\n                                                        </div>\r\n                                                    </OverlayTrigger>\r\n                                                </Card>\r\n                                            </Col>\r\n                                        ))}               \r\n                                    </Row>\r\n                                </Carousel.Item>\r\n                            ))}\r\n                        </Carousel>\r\n                    )}\r\n                    {searchResults.length > 0 && (\r\n                        <Carousel interval={null} pause={false} wrap={true} indicators={true} className=\"nftMarket-carousel\">\r\n                            {searchgroupedResults.map((group, groupIndex) => (\r\n                                <Carousel.Item key={groupIndex}>\r\n                                    <Row className=\"nftMarket-carousel-row\">\r\n                                        {group.map((data, index) => (\r\n                                            <Col xs={6} md={3} key={index}>\r\n                                                <Card className=\"effect-image-1\">\r\n                                                    <OverlayTrigger placement=\"top\" overlay={renderTooltip(data.title, data.penName, data.names)}>\r\n                                                        <div>\r\n                                                            <Link to={`/nftDetail/tokenId${data.tokenId}`}>\r\n                                                                <Card.Img variant=\"top\" src={data.image} alt={`image-${index + 1}`} />\r\n                                                                <div className=\"nftMarket-overlay\">\r\n                                                                    <span>{t('已售')}：{data.saleQty} {t('總數')}：{data.totQty}</span>\r\n                                                                </div>\r\n                                                            </Link>\r\n                                                            <Card.Body className=\"simple-text\">\r\n                                                                <Card.Text className=\"nftMarket-text\">\r\n                                                                    {data.tokenTitle}<br />\r\n                                                                    $ {data.price}\r\n                                                                    <CartPlusFill size={25} style={{marginLeft: \"8px\"}} onClick={() => handleAddToCart(data)} />\r\n                                                                </Card.Text>\r\n                                                            </Card.Body>\r\n                                                        </div>\r\n                                                    </OverlayTrigger>\r\n                                                </Card>\r\n                                            </Col>\r\n                                        ))}\r\n                                    </Row>\r\n                                </Carousel.Item>\r\n                            ))}\r\n                        </Carousel>\r\n                    )}\r\n                </Row>\r\n                <Row className='pt-3'>\r\n                    <h3 className=\"fw-bold\">{t('推薦NFT')}</h3>\r\n                </Row>\r\n                <Tabs defaultActiveKey=\"copyright\" id=\"uncontrolled-tab-example\">\r\n                    <Tab \r\n                        eventKey=\"material\" \r\n                        title={\r\n                            <TooltipWrapper text={tooltips.material}>\r\n                                <div>{t('素材')}</div>\r\n                            </TooltipWrapper>\r\n                        }\r\n                    >\r\n                        <Form.Group>\r\n                            <Form.Label className='pt-1'>{t('IP種類')}</Form.Label>\r\n                            <Form.Control as=\"select\" value={t(selectedGrading)} onChange={handleGradingChange}>\r\n                                {grading.map((option, index) => (\r\n                                    <option key={index} value={option}>{option}</option>\r\n                                ))}\r\n                            </Form.Control>\r\n                        </Form.Group>\r\n                        <Row className='pt-1 pb-5'>\r\n                            {filteredMaterials.map((data, index) => (\r\n                                <Col xs={6} md={3} className=\"pt-3\" key={index}>\r\n                                    <Card className=\"effect-image-1\">\r\n                                        <OverlayTrigger placement=\"top\" overlay={renderTooltip(data.title, data.penName, data.names)}>\r\n                                            <div>\r\n                                                <Link to={`/nftDetail/tokenId${data.tokenId}`}>\r\n                                                    <Card.Img variant=\"top\" src={data.image} alt={`image-${index + 1}`} />\r\n                                                    <div className=\"nftMarket-overlay\">\r\n                                                        <span>{t('已售')}：{data.saleQty} {t('總數')}：{data.totQty}</span>\r\n                                                    </div>\r\n                                                </Link>\r\n                                                <Card.Body className=\"simple-text\">\r\n                                                    <Card.Text className=\"nftMarket-text\">\r\n                                                        {data.tokenTitle}<br />\r\n                                                        $ {data.price}\r\n                                                        <CartPlusFill size={25} style={{marginLeft: \"8px\"}} onClick={() => handleAddToCart(data)} />\r\n                                                    </Card.Text>\r\n                                                </Card.Body>\r\n                                            </div>\r\n                                        </OverlayTrigger>\r\n                                    </Card>\r\n                                </Col>\r\n                            ))}\r\n                        </Row>\r\n                    </Tab>\r\n                    <Tab\r\n                        eventKey=\"copyright\"\r\n                        title={\r\n                            <TooltipWrapper text={tooltips.copyright}>\r\n                                <div>{t('原創')}</div>\r\n                            </TooltipWrapper>\r\n                        }\r\n                    >\r\n                        <Row className=\"pt-1 pb-5\">\r\n                            {comic\r\n                                .filter((data) => data.isFanCreation === t('原創'))\r\n                                .map((data, index) => (\r\n                                    <Col key={index} xs={6} md={3} className=\"pt-3\">\r\n                                        <Card className=\"effect-image-1\">\r\n                                            <OverlayTrigger\r\n                                                placement=\"top\"\r\n                                                overlay={renderTooltip(\r\n                                                    data.title,\r\n                                                    data.penName,\r\n                                                    data.names\r\n                                                )}\r\n                                            >\r\n                                                <div>\r\n                                                    <Link to={`/nftDetail/tokenId${data.tokenId}`}>\r\n                                                        <Card.Img\r\n                                                            src={data.image}\r\n                                                            alt={`image-${index + 1}`}\r\n                                                        />\r\n                                                        <div className=\"nftMarket-overlay\">\r\n                                                            <span>{t('已售')}：{data.saleQty} {t('總數')}：{data.totQty}</span>\r\n                                                        </div>\r\n                                                    </Link>\r\n                                                    <Card.Body className=\"simple-text\">\r\n                                                        <Card.Text className=\"nftMarket-text\">\r\n                                                            {data.tokenTitle}\r\n                                                            <br />\r\n                                                            $ {data.price}\r\n                                                            <CartPlusFill\r\n                                                                size={25}\r\n                                                                style={{ marginLeft: '8px' }}\r\n                                                                onClick={() => handleAddToCart(data)}\r\n                                                            />\r\n                                                        </Card.Text>\r\n                                                    </Card.Body>\r\n                                                </div>\r\n                                            </OverlayTrigger>\r\n                                        </Card>\r\n                                    </Col>\r\n                                ))}\r\n                        </Row>\r\n                    </Tab>\r\n                    <Tab\r\n                        eventKey=\"resale\"\r\n                        title={\r\n                            <TooltipWrapper text={tooltips.resale}>\r\n                                <div>{t('轉售')}</div>\r\n                            </TooltipWrapper>\r\n                        }\r\n                    >\r\n                        <Row className=\"pt-1 pb-5\">\r\n                            {comic\r\n                                .filter((data) => data.isFanCreation === t('轉售'))\r\n                                .map((data, index) => (\r\n                                    <Col key={index} xs={6} md={3} className=\"pt-3\">\r\n                                        <Card className=\"effect-image-1\">\r\n                                            <OverlayTrigger\r\n                                                placement=\"top\"\r\n                                                overlay={renderTooltip(\r\n                                                    data.title,\r\n                                                    data.penName,\r\n                                                    data.names\r\n                                                )}\r\n                                            >\r\n                                                <div>\r\n                                                    <Link to={`/nftDetail/tokenId${data.tokenId}`}>\r\n                                                        <Card.Img\r\n                                                            src={data.image}\r\n                                                            alt={`image-${index + 1}`}\r\n                                                        />\r\n                                                        <div className=\"nftMarket-overlay\">\r\n                                                            <span>{t('已售')}：{data.saleQty} {t('總數')}：{data.totQty}</span>\r\n                                                        </div>\r\n                                                    </Link>\r\n                                                    <Card.Body className=\"simple-text\">\r\n                                                        <Card.Text className=\"nftMarket-text\">\r\n                                                            {data.tokenTitle}\r\n                                                            <br />\r\n                                                            $ {data.price}\r\n                                                            <CartPlusFill\r\n                                                                size={25}\r\n                                                                style={{ marginLeft: '8px' }}\r\n                                                                onClick={() => handleAddToCart(data)}\r\n                                                            />\r\n                                                        </Card.Text>\r\n                                                    </Card.Body>\r\n                                                </div>\r\n                                            </OverlayTrigger>\r\n                                        </Card>\r\n                                    </Col>\r\n                                ))}\r\n                        </Row>\r\n                    </Tab>\r\n                </Tabs>\r\n            </Container>\r\n        }\r\n        {loading &&  \r\n            <div className=\"loading-container\">\r\n                <div>{t('頁面加載中')}</div>\r\n            </div>\r\n        }\r\n        </>\r\n    );\r\n}\r\n\r\nexport default NftMarket;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}