{"ast":null,"code":"import React,{useState,useEffect,useRef}from'react';import{Link}from'react-router-dom';import{Container,Card,Col,Row,Button,Navbar,Form,InputGroup,FormControl}from'react-bootstrap';import'./bootstrap.min.css';import{Funnel,ArrowLeft,Search}from'react-bootstrap-icons';import{useTranslation}from'react-i18next';import i18n from'../i18n';import axios from'axios';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const website=process.env.REACT_APP_Website;const API_KEY=process.env.REACT_APP_API_KEY;function SearchPage(){const[comic,setComic]=useState([]);const[promoPosition,setPromoPosition]=useState([]);const[btnWidth,setBtnWidth]=useState(null);const btnRef=useRef(null);const[searchTerm,setSearchTerm]=useState('');const[searchResults,setSearchResults]=useState([]);const[isSearch,setIsSearch]=useState(false);const[searchHistory,setSearchHistory]=useState([]);const{t}=useTranslation();const storedArrayJSON=localStorage.getItem('comicDatas');const storedArray=JSON.parse(storedArrayJSON);const fetchedData=[];const lpInfo=[];const headers={'api-key':API_KEY};const initData=async()=>{try{const response=await axios.get(`${website}/api/searchPage/LP`,{headers});let lpDatas=response.data;if(lpDatas.length>0){try{const lpInfo=await Promise.all(lpDatas.map(async data=>{const url=data.protoFilename===1?`${website}/api/coverFile/${data.comic_id}`:`${website}/api/comicIMG/${data.comic_id}`;const response=await axios.get(url,{responseType:'blob',headers});const protoFilename=URL.createObjectURL(response.data);return{...data,protoFilename:protoFilename};}));setPromoPosition(lpInfo);}catch(error){console.error('Error fetching image:',error);}}if(btnRef.current){setBtnWidth(btnRef.current.offsetWidth);}}catch(error){console.error('Error initializing contract:',error);}};useEffect(()=>{initData();const history=JSON.parse(localStorage.getItem('searchHistory'))||[];setSearchHistory(history);},[]);const handleCategoryClick=category=>{localStorage.setItem('currentCategory',category);};useEffect(()=>{// 設置頁面特定的 padding-bottom\ndocument.body.classList.add('no-padding-bottom');return()=>{// 清除特定頁面的 padding-bottom\ndocument.body.classList.remove('no-padding-bottom');};},[]);const truncateBtnText=text=>{if(!btnWidth){return text;}const adjustedMaxLength=Math.floor(btnWidth/15);const isChinese=char=>/[\\u4e00-\\u9fa5]/.test(char);let length=0;let result='';for(const char of text){length+=isChinese(char)?2:1;if(length>adjustedMaxLength){return result+'...';}result+=char;}return result;};const handleSearchChange=event=>{setSearchTerm(event.target.value);};const handleSearchSubmit=async event=>{if(event){event.preventDefault();}if(searchTerm.trim()===''){setSearchResults([]);setIsSearch(false);return;}try{const response=await axios.get(`${website}/api/searchPage/Keyword`,{headers:headers,params:{term:searchTerm}});let keywordResults=response.data;const fetchedData=await Promise.all(keywordResults.map(async data=>{const url=data.protoFilename===1?`${website}/api/coverFile/${data.comic_id}`:`${website}/api/comicIMG/${data.comic_id}`;const{data:blobData}=await axios.get(url,{responseType:'blob',headers});const protoFilename=URL.createObjectURL(blobData);return{...data,protoFilename};}));const updatedFetchedData=fetchedData.map(fetchedItem=>{const match=storedArray.find(storedItem=>storedItem.comic_id===fetchedItem.comic_id);return{...fetchedItem,comicID:match?match.comicID:null};});setSearchResults(updatedFetchedData);//console.log(updatedFetchedData);\nconst updatedHistory=Array.from(new Set([searchTerm.trim(),...searchHistory])).slice(0,5);setSearchHistory(updatedHistory);localStorage.setItem('searchHistory',JSON.stringify(updatedHistory));setIsSearch(true);}catch(error){console.error('Error fetching keyword results:',error);}};const clearSearch=()=>setSearchTerm('');const clearSearchHistory=()=>{setSearchHistory([]);localStorage.removeItem('searchHistory');};return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(\"div\",{className:\"no-padding-bottom\",children:[/*#__PURE__*/_jsx(Navbar,{className:\"searchPage-custom-navbar\",expand:\"lg\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"searchPage-navbar-content\",children:[/*#__PURE__*/_jsx(Link,{to:\"/\",children:/*#__PURE__*/_jsx(\"div\",{className:\"searchPage-arrow-icon\",children:/*#__PURE__*/_jsx(ArrowLeft,{size:24})})}),/*#__PURE__*/_jsx(Form,{onSubmit:handleSearchSubmit,className:\"d-flex ms-3\",children:/*#__PURE__*/_jsx(InputGroup,{children:/*#__PURE__*/_jsx(FormControl,{placeholder:t('請輸入'),\"aria-label\":\"Search\",\"aria-describedby\":\"basic-addon2\",className:\"searchPage-search-input\",value:searchTerm,onChange:handleSearchChange})})}),/*#__PURE__*/_jsx(Search,{onClick:handleSearchSubmit,className:\"searchPage-search\"})]})}),isSearch&&/*#__PURE__*/_jsx(Container,{className:\"searchPage pt-3 pb-3\",children:/*#__PURE__*/_jsx(Row,{xs:1,md:2,className:\"g-3 pb-5\",children:searchResults.length>0&&searchResults.map((data,idx)=>/*#__PURE__*/_jsx(Col,{xs:12,md:12,className:\"pt-3 pb-1\",children:/*#__PURE__*/_jsx(Link,{to:`/comicDetail/${data.comicID}`,children:/*#__PURE__*/_jsx(Card,{children:/*#__PURE__*/_jsxs(\"div\",{className:\"position-relative\",children:[/*#__PURE__*/_jsx(Card.Img,{variant:\"top\",src:data.protoFilename}),/*#__PURE__*/_jsx(\"div\",{className:\"category-title\",children:data.title}),/*#__PURE__*/_jsx(\"div\",{className:\"category-content\",style:{bottom:\"8px\"},children:data.text})]})})})},idx))})}),!isSearch&&/*#__PURE__*/_jsxs(Container,{className:\"searchPage pt-3 pb-3\",children:[/*#__PURE__*/_jsx(\"h4\",{children:t('搜尋歷史')}),/*#__PURE__*/_jsxs(Row,{className:\"pb-5 w-100\",children:[searchHistory.map((term,index)=>/*#__PURE__*/_jsx(Col,{xs:2,sm:2,md:2,lg:1,className:\"btn-section\",children:/*#__PURE__*/_jsx(Button,{ref:btnRef,variant:\"outline-dark\",onClick:()=>setSearchTerm(term),className:\"custom-button\",children:truncateBtnText(term)})},index)),/*#__PURE__*/_jsx(Col,{xs:2,sm:2,md:2,lg:1,className:\"pb-3 btn-section\",children:/*#__PURE__*/_jsx(Button,{variant:\"outline-dark\",onClick:clearSearchHistory,className:\"custom-button\",children:t('清除歷史')})})]}),/*#__PURE__*/_jsx(\"h4\",{children:t('常見分類')}),/*#__PURE__*/_jsx(Row,{xs:1,md:2,className:\"g-3 pb-5\",children:promoPosition.map((data,idx)=>/*#__PURE__*/_jsx(Col,{xs:12,md:12,className:\"pt-3\",children:/*#__PURE__*/_jsx(Link,{to:\"/category\",children:/*#__PURE__*/_jsx(Card,{children:/*#__PURE__*/_jsxs(\"div\",{onClick:()=>handleCategoryClick(t(data.category)),className:\"position-relative\",children:[/*#__PURE__*/_jsx(Card.Img,{variant:\"top\",src:data.protoFilename}),/*#__PURE__*/_jsxs(\"div\",{className:\"category-title\",children:[t(data.category),\" \",t('漫畫')]}),/*#__PURE__*/_jsx(\"p\",{className:\"category-content\",children:data.text})]})})})},idx))})]})]})});}export default SearchPage;","map":{"version":3,"names":["React","useState","useEffect","useRef","Link","Container","Card","Col","Row","Button","Navbar","Form","InputGroup","FormControl","Funnel","ArrowLeft","Search","useTranslation","i18n","axios","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","website","process","env","REACT_APP_Website","API_KEY","REACT_APP_API_KEY","SearchPage","comic","setComic","promoPosition","setPromoPosition","btnWidth","setBtnWidth","btnRef","searchTerm","setSearchTerm","searchResults","setSearchResults","isSearch","setIsSearch","searchHistory","setSearchHistory","t","storedArrayJSON","localStorage","getItem","storedArray","JSON","parse","fetchedData","lpInfo","headers","initData","response","get","lpDatas","data","length","Promise","all","map","url","protoFilename","comic_id","responseType","URL","createObjectURL","error","console","current","offsetWidth","history","handleCategoryClick","category","setItem","document","body","classList","add","remove","truncateBtnText","text","adjustedMaxLength","Math","floor","isChinese","char","test","result","handleSearchChange","event","target","value","handleSearchSubmit","preventDefault","trim","params","term","keywordResults","blobData","updatedFetchedData","fetchedItem","match","find","storedItem","comicID","updatedHistory","Array","from","Set","slice","stringify","clearSearch","clearSearchHistory","removeItem","children","className","expand","to","size","onSubmit","placeholder","onChange","onClick","xs","md","idx","Img","variant","src","title","style","bottom","index","sm","lg","ref"],"sources":["C:/Users/user1/Desktop/blockchain-comics-platform/frontend/src/routes/searchPage.js"],"sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport { Container, Card, Col, Row, Button, Navbar, Form, InputGroup, FormControl } from 'react-bootstrap';\r\nimport './bootstrap.min.css';\r\nimport { Funnel, ArrowLeft, Search } from 'react-bootstrap-icons';\r\nimport { useTranslation } from 'react-i18next';\r\nimport i18n from '../i18n';\r\nimport axios from 'axios';\r\nconst website = process.env.REACT_APP_Website;\r\nconst API_KEY = process.env.REACT_APP_API_KEY;\r\n\r\nfunction SearchPage() {\r\n    const [comic, setComic] = useState([]);\r\n    const [promoPosition, setPromoPosition] = useState([]);\r\n    const [btnWidth, setBtnWidth] = useState(null);\r\n    const btnRef = useRef(null);\r\n    const [searchTerm, setSearchTerm] = useState('');\r\n    const [searchResults, setSearchResults] = useState([]);\r\n    const [isSearch, setIsSearch] = useState(false);\r\n    const [searchHistory, setSearchHistory] = useState([]);\r\n    const { t } = useTranslation();\r\n    const storedArrayJSON = localStorage.getItem('comicDatas');\r\n    const storedArray = JSON.parse(storedArrayJSON);\r\n    const fetchedData = [];\r\n    const lpInfo = [];\r\n    const headers = {'api-key': API_KEY};\r\n\r\n    const initData = async () => {\r\n        try {\r\n            const response = await axios.get(`${website}/api/searchPage/LP`, { headers });\r\n            let lpDatas = response.data;\r\n            if (lpDatas.length > 0) {\r\n                try {\r\n                    const lpInfo = await Promise.all(lpDatas.map(async (data) => {\r\n                        const url = data.protoFilename === 1\r\n                            ? `${website}/api/coverFile/${data.comic_id}`\r\n                            : `${website}/api/comicIMG/${data.comic_id}`;\r\n                        const response = await axios.get(url, { responseType: 'blob', headers });\r\n                        const protoFilename = URL.createObjectURL(response.data);\r\n                        return {\r\n                            ...data,\r\n                            protoFilename: protoFilename\r\n                        };\r\n                    }));\r\n                    setPromoPosition(lpInfo);\r\n                } catch (error) {\r\n                    console.error('Error fetching image:', error);\r\n                }\r\n            }\r\n            if (btnRef.current) {\r\n                setBtnWidth(btnRef.current.offsetWidth);\r\n            }\r\n        } catch (error) {\r\n            console.error('Error initializing contract:', error);\r\n        }\r\n    };\r\n\r\n    useEffect(() => {\r\n        initData();\r\n        const history = JSON.parse(localStorage.getItem('searchHistory')) || [];\r\n        setSearchHistory(history);\r\n    }, []);\r\n\r\n    const handleCategoryClick = (category) => {\r\n        localStorage.setItem('currentCategory', category);\r\n    };\r\n\r\n    useEffect(() => {\r\n        // 設置頁面特定的 padding-bottom\r\n        document.body.classList.add('no-padding-bottom');\r\n        return () => {\r\n          // 清除特定頁面的 padding-bottom\r\n        document.body.classList.remove('no-padding-bottom');\r\n        };\r\n    }, []);\r\n\r\n    const truncateBtnText = (text) => {\r\n        if (!btnWidth) {\r\n          return text;\r\n        }\r\n        const adjustedMaxLength = Math.floor(btnWidth / 15);\r\n        const isChinese = (char) => /[\\u4e00-\\u9fa5]/.test(char);\r\n        let length = 0;\r\n        let result = '';\r\n        for (const char of text) {\r\n          length += isChinese(char) ? 2 : 1;\r\n          if (length > adjustedMaxLength) {\r\n            return result + '...';\r\n          }\r\n          result += char;\r\n        }\r\n        return result;\r\n    };\r\n\r\n    const handleSearchChange = (event) => {\r\n        setSearchTerm(event.target.value);\r\n    };\r\n\r\n    const handleSearchSubmit = async (event) => {\r\n        if (event) {\r\n            event.preventDefault();\r\n        }\r\n        if (searchTerm.trim() === '') {\r\n            setSearchResults([]);\r\n            setIsSearch(false);\r\n            return;\r\n        }\r\n        try {\r\n            const response = await axios.get(`${website}/api/searchPage/Keyword`, {\r\n                headers: headers,\r\n                params: { term: searchTerm }\r\n            });\r\n            let keywordResults = response.data;\r\n            const fetchedData = await Promise.all(keywordResults.map(async (data) => {\r\n                const url = data.protoFilename === 1\r\n                    ? `${website}/api/coverFile/${data.comic_id}`\r\n                    : `${website}/api/comicIMG/${data.comic_id}`;\r\n                const { data: blobData } = await axios.get(url, { responseType: 'blob', headers });\r\n                const protoFilename = URL.createObjectURL(blobData);\r\n                return { ...data, protoFilename };\r\n            }));\r\n            const updatedFetchedData = fetchedData.map(fetchedItem => {\r\n                const match = storedArray.find(storedItem => storedItem.comic_id === fetchedItem.comic_id);\r\n                return { ...fetchedItem, comicID: match ? match.comicID : null };\r\n            });\r\n            setSearchResults(updatedFetchedData);\r\n            //console.log(updatedFetchedData);\r\n            const updatedHistory = Array.from(new Set([searchTerm.trim(), ...searchHistory])).slice(0, 5);\r\n            setSearchHistory(updatedHistory);\r\n            localStorage.setItem('searchHistory', JSON.stringify(updatedHistory));\r\n            setIsSearch(true);\r\n        } catch (error) {\r\n            console.error('Error fetching keyword results:', error);\r\n        }\r\n    };\r\n    \r\n    const clearSearch = () => setSearchTerm('');\r\n\r\n    const clearSearchHistory = () => {\r\n        setSearchHistory([]);\r\n        localStorage.removeItem('searchHistory');\r\n    };\r\n\r\n\r\n    return (\r\n        <>\r\n            <div className='no-padding-bottom'>\r\n                <Navbar className=\"searchPage-custom-navbar\" expand=\"lg\">\r\n                    <div className=\"searchPage-navbar-content\">\r\n                        <Link to=\"/\">\r\n                            <div className=\"searchPage-arrow-icon\">\r\n                                <ArrowLeft size={24} />\r\n                            </div>\r\n                        </Link>\r\n                        <Form onSubmit={handleSearchSubmit} className=\"d-flex ms-3\">\r\n                            <InputGroup>\r\n                                <FormControl\r\n                                    placeholder={t('請輸入')}\r\n                                    aria-label=\"Search\"\r\n                                    aria-describedby=\"basic-addon2\"\r\n                                    className=\"searchPage-search-input\"\r\n                                    value={searchTerm}\r\n                                    onChange={handleSearchChange}\r\n                                />\r\n                            </InputGroup>\r\n                        </Form>\r\n                        <Search onClick={handleSearchSubmit} className=\"searchPage-search\" />\r\n                    </div>\r\n                </Navbar>\r\n                {isSearch &&\r\n                    <Container className='searchPage pt-3 pb-3'>\r\n                        <Row xs={1} md={2} className=\"g-3 pb-5\">\r\n                            {searchResults.length > 0 && searchResults.map((data, idx) => (\r\n                                <Col key={idx} xs={12} md={12} className=\"pt-3 pb-1\">\r\n                                    <Link to={`/comicDetail/${data.comicID}`}>\r\n                                        <Card>\r\n                                            <div className=\"position-relative\">\r\n                                                <Card.Img variant=\"top\" src={data.protoFilename} />\r\n                                                <div className=\"category-title\">{data.title}</div>\r\n                                                <div className=\"category-content\" style={{bottom: \"8px\"}}>{data.text}</div>\r\n                                            </div>\r\n                                        </Card>\r\n                                    </Link>\r\n                                </Col>\r\n                            ))}\r\n                        </Row>\r\n                    </Container>\r\n                }\r\n                {!isSearch &&  \r\n                    <Container className='searchPage pt-3 pb-3'>\r\n                        <h4>{t('搜尋歷史')}</h4>\r\n                        <Row className=\"pb-5 w-100\">\r\n                            {searchHistory.map((term, index) => (\r\n                                <Col key={index} xs={2} sm={2} md={2} lg={1} className=\"btn-section\">\r\n                                    <Button ref={btnRef} variant=\"outline-dark\" onClick={() => setSearchTerm(term)} className=\"custom-button\">{truncateBtnText(term)}</Button>\r\n                                </Col>\r\n                            ))}\r\n                            <Col xs={2} sm={2} md={2} lg={1} className=\"pb-3 btn-section\">\r\n                                <Button variant=\"outline-dark\" onClick={clearSearchHistory} className=\"custom-button\">{t('清除歷史')}</Button>\r\n                            </Col>\r\n                        </Row>\r\n                        <h4>{t('常見分類')}</h4>\r\n                        <Row xs={1} md={2} className=\"g-3 pb-5\">\r\n                            {promoPosition.map((data, idx) => (\r\n                                <Col key={idx} xs={12} md={12} className=\"pt-3\">\r\n                                    <Link to={\"/category\"}>\r\n                                        <Card>\r\n                                            <div onClick={() => handleCategoryClick(t(data.category))} className=\"position-relative\">\r\n                                                <Card.Img variant=\"top\" src={data.protoFilename} />\r\n                                                <div className=\"category-title\">{t(data.category)} {t('漫畫')}</div>\r\n                                                <p className=\"category-content\">{data.text}</p>\r\n                                            </div>\r\n                                        </Card>\r\n                                    </Link>\r\n                                </Col>\r\n                            ))}\r\n                        </Row>\r\n                    </Container>\r\n                }\r\n            </div>\r\n        </>\r\n    );\r\n}\r\n\r\nexport default SearchPage;\r\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,CAAEC,SAAS,CAAEC,MAAM,KAAQ,OAAO,CAC1D,OAASC,IAAI,KAAQ,kBAAkB,CACvC,OAASC,SAAS,CAAEC,IAAI,CAAEC,GAAG,CAAEC,GAAG,CAAEC,MAAM,CAAEC,MAAM,CAAEC,IAAI,CAAEC,UAAU,CAAEC,WAAW,KAAQ,iBAAiB,CAC1G,MAAO,qBAAqB,CAC5B,OAASC,MAAM,CAAEC,SAAS,CAAEC,MAAM,KAAQ,uBAAuB,CACjE,OAASC,cAAc,KAAQ,eAAe,CAC9C,MAAO,CAAAC,IAAI,KAAM,SAAS,CAC1B,MAAO,CAAAC,KAAK,KAAM,OAAO,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,CAAAC,QAAA,IAAAC,SAAA,yBAC1B,KAAM,CAAAC,OAAO,CAAGC,OAAO,CAACC,GAAG,CAACC,iBAAiB,CAC7C,KAAM,CAAAC,OAAO,CAAGH,OAAO,CAACC,GAAG,CAACG,iBAAiB,CAE7C,QAAS,CAAAC,UAAUA,CAAA,CAAG,CAClB,KAAM,CAACC,KAAK,CAAEC,QAAQ,CAAC,CAAGjC,QAAQ,CAAC,EAAE,CAAC,CACtC,KAAM,CAACkC,aAAa,CAAEC,gBAAgB,CAAC,CAAGnC,QAAQ,CAAC,EAAE,CAAC,CACtD,KAAM,CAACoC,QAAQ,CAAEC,WAAW,CAAC,CAAGrC,QAAQ,CAAC,IAAI,CAAC,CAC9C,KAAM,CAAAsC,MAAM,CAAGpC,MAAM,CAAC,IAAI,CAAC,CAC3B,KAAM,CAACqC,UAAU,CAAEC,aAAa,CAAC,CAAGxC,QAAQ,CAAC,EAAE,CAAC,CAChD,KAAM,CAACyC,aAAa,CAAEC,gBAAgB,CAAC,CAAG1C,QAAQ,CAAC,EAAE,CAAC,CACtD,KAAM,CAAC2C,QAAQ,CAAEC,WAAW,CAAC,CAAG5C,QAAQ,CAAC,KAAK,CAAC,CAC/C,KAAM,CAAC6C,aAAa,CAAEC,gBAAgB,CAAC,CAAG9C,QAAQ,CAAC,EAAE,CAAC,CACtD,KAAM,CAAE+C,CAAE,CAAC,CAAG/B,cAAc,CAAC,CAAC,CAC9B,KAAM,CAAAgC,eAAe,CAAGC,YAAY,CAACC,OAAO,CAAC,YAAY,CAAC,CAC1D,KAAM,CAAAC,WAAW,CAAGC,IAAI,CAACC,KAAK,CAACL,eAAe,CAAC,CAC/C,KAAM,CAAAM,WAAW,CAAG,EAAE,CACtB,KAAM,CAAAC,MAAM,CAAG,EAAE,CACjB,KAAM,CAAAC,OAAO,CAAG,CAAC,SAAS,CAAE3B,OAAO,CAAC,CAEpC,KAAM,CAAA4B,QAAQ,CAAG,KAAAA,CAAA,GAAY,CACzB,GAAI,CACA,KAAM,CAAAC,QAAQ,CAAG,KAAM,CAAAxC,KAAK,CAACyC,GAAG,CAAE,GAAElC,OAAQ,oBAAmB,CAAE,CAAE+B,OAAQ,CAAC,CAAC,CAC7E,GAAI,CAAAI,OAAO,CAAGF,QAAQ,CAACG,IAAI,CAC3B,GAAID,OAAO,CAACE,MAAM,CAAG,CAAC,CAAE,CACpB,GAAI,CACA,KAAM,CAAAP,MAAM,CAAG,KAAM,CAAAQ,OAAO,CAACC,GAAG,CAACJ,OAAO,CAACK,GAAG,CAAC,KAAO,CAAAJ,IAAI,EAAK,CACzD,KAAM,CAAAK,GAAG,CAAGL,IAAI,CAACM,aAAa,GAAK,CAAC,CAC7B,GAAE1C,OAAQ,kBAAiBoC,IAAI,CAACO,QAAS,EAAC,CAC1C,GAAE3C,OAAQ,iBAAgBoC,IAAI,CAACO,QAAS,EAAC,CAChD,KAAM,CAAAV,QAAQ,CAAG,KAAM,CAAAxC,KAAK,CAACyC,GAAG,CAACO,GAAG,CAAE,CAAEG,YAAY,CAAE,MAAM,CAAEb,OAAQ,CAAC,CAAC,CACxE,KAAM,CAAAW,aAAa,CAAGG,GAAG,CAACC,eAAe,CAACb,QAAQ,CAACG,IAAI,CAAC,CACxD,MAAO,CACH,GAAGA,IAAI,CACPM,aAAa,CAAEA,aACnB,CAAC,CACL,CAAC,CAAC,CAAC,CACHhC,gBAAgB,CAACoB,MAAM,CAAC,CAC5B,CAAE,MAAOiB,KAAK,CAAE,CACZC,OAAO,CAACD,KAAK,CAAC,uBAAuB,CAAEA,KAAK,CAAC,CACjD,CACJ,CACA,GAAIlC,MAAM,CAACoC,OAAO,CAAE,CAChBrC,WAAW,CAACC,MAAM,CAACoC,OAAO,CAACC,WAAW,CAAC,CAC3C,CACJ,CAAE,MAAOH,KAAK,CAAE,CACZC,OAAO,CAACD,KAAK,CAAC,8BAA8B,CAAEA,KAAK,CAAC,CACxD,CACJ,CAAC,CAEDvE,SAAS,CAAC,IAAM,CACZwD,QAAQ,CAAC,CAAC,CACV,KAAM,CAAAmB,OAAO,CAAGxB,IAAI,CAACC,KAAK,CAACJ,YAAY,CAACC,OAAO,CAAC,eAAe,CAAC,CAAC,EAAI,EAAE,CACvEJ,gBAAgB,CAAC8B,OAAO,CAAC,CAC7B,CAAC,CAAE,EAAE,CAAC,CAEN,KAAM,CAAAC,mBAAmB,CAAIC,QAAQ,EAAK,CACtC7B,YAAY,CAAC8B,OAAO,CAAC,iBAAiB,CAAED,QAAQ,CAAC,CACrD,CAAC,CAED7E,SAAS,CAAC,IAAM,CACZ;AACA+E,QAAQ,CAACC,IAAI,CAACC,SAAS,CAACC,GAAG,CAAC,mBAAmB,CAAC,CAChD,MAAO,IAAM,CACX;AACFH,QAAQ,CAACC,IAAI,CAACC,SAAS,CAACE,MAAM,CAAC,mBAAmB,CAAC,CACnD,CAAC,CACL,CAAC,CAAE,EAAE,CAAC,CAEN,KAAM,CAAAC,eAAe,CAAIC,IAAI,EAAK,CAC9B,GAAI,CAAClD,QAAQ,CAAE,CACb,MAAO,CAAAkD,IAAI,CACb,CACA,KAAM,CAAAC,iBAAiB,CAAGC,IAAI,CAACC,KAAK,CAACrD,QAAQ,CAAG,EAAE,CAAC,CACnD,KAAM,CAAAsD,SAAS,CAAIC,IAAI,EAAK,iBAAiB,CAACC,IAAI,CAACD,IAAI,CAAC,CACxD,GAAI,CAAA7B,MAAM,CAAG,CAAC,CACd,GAAI,CAAA+B,MAAM,CAAG,EAAE,CACf,IAAK,KAAM,CAAAF,IAAI,GAAI,CAAAL,IAAI,CAAE,CACvBxB,MAAM,EAAI4B,SAAS,CAACC,IAAI,CAAC,CAAG,CAAC,CAAG,CAAC,CACjC,GAAI7B,MAAM,CAAGyB,iBAAiB,CAAE,CAC9B,MAAO,CAAAM,MAAM,CAAG,KAAK,CACvB,CACAA,MAAM,EAAIF,IAAI,CAChB,CACA,MAAO,CAAAE,MAAM,CACjB,CAAC,CAED,KAAM,CAAAC,kBAAkB,CAAIC,KAAK,EAAK,CAClCvD,aAAa,CAACuD,KAAK,CAACC,MAAM,CAACC,KAAK,CAAC,CACrC,CAAC,CAED,KAAM,CAAAC,kBAAkB,CAAG,KAAO,CAAAH,KAAK,EAAK,CACxC,GAAIA,KAAK,CAAE,CACPA,KAAK,CAACI,cAAc,CAAC,CAAC,CAC1B,CACA,GAAI5D,UAAU,CAAC6D,IAAI,CAAC,CAAC,GAAK,EAAE,CAAE,CAC1B1D,gBAAgB,CAAC,EAAE,CAAC,CACpBE,WAAW,CAAC,KAAK,CAAC,CAClB,OACJ,CACA,GAAI,CACA,KAAM,CAAAc,QAAQ,CAAG,KAAM,CAAAxC,KAAK,CAACyC,GAAG,CAAE,GAAElC,OAAQ,yBAAwB,CAAE,CAClE+B,OAAO,CAAEA,OAAO,CAChB6C,MAAM,CAAE,CAAEC,IAAI,CAAE/D,UAAW,CAC/B,CAAC,CAAC,CACF,GAAI,CAAAgE,cAAc,CAAG7C,QAAQ,CAACG,IAAI,CAClC,KAAM,CAAAP,WAAW,CAAG,KAAM,CAAAS,OAAO,CAACC,GAAG,CAACuC,cAAc,CAACtC,GAAG,CAAC,KAAO,CAAAJ,IAAI,EAAK,CACrE,KAAM,CAAAK,GAAG,CAAGL,IAAI,CAACM,aAAa,GAAK,CAAC,CAC7B,GAAE1C,OAAQ,kBAAiBoC,IAAI,CAACO,QAAS,EAAC,CAC1C,GAAE3C,OAAQ,iBAAgBoC,IAAI,CAACO,QAAS,EAAC,CAChD,KAAM,CAAEP,IAAI,CAAE2C,QAAS,CAAC,CAAG,KAAM,CAAAtF,KAAK,CAACyC,GAAG,CAACO,GAAG,CAAE,CAAEG,YAAY,CAAE,MAAM,CAAEb,OAAQ,CAAC,CAAC,CAClF,KAAM,CAAAW,aAAa,CAAGG,GAAG,CAACC,eAAe,CAACiC,QAAQ,CAAC,CACnD,MAAO,CAAE,GAAG3C,IAAI,CAAEM,aAAc,CAAC,CACrC,CAAC,CAAC,CAAC,CACH,KAAM,CAAAsC,kBAAkB,CAAGnD,WAAW,CAACW,GAAG,CAACyC,WAAW,EAAI,CACtD,KAAM,CAAAC,KAAK,CAAGxD,WAAW,CAACyD,IAAI,CAACC,UAAU,EAAIA,UAAU,CAACzC,QAAQ,GAAKsC,WAAW,CAACtC,QAAQ,CAAC,CAC1F,MAAO,CAAE,GAAGsC,WAAW,CAAEI,OAAO,CAAEH,KAAK,CAAGA,KAAK,CAACG,OAAO,CAAG,IAAK,CAAC,CACpE,CAAC,CAAC,CACFpE,gBAAgB,CAAC+D,kBAAkB,CAAC,CACpC;AACA,KAAM,CAAAM,cAAc,CAAGC,KAAK,CAACC,IAAI,CAAC,GAAI,CAAAC,GAAG,CAAC,CAAC3E,UAAU,CAAC6D,IAAI,CAAC,CAAC,CAAE,GAAGvD,aAAa,CAAC,CAAC,CAAC,CAACsE,KAAK,CAAC,CAAC,CAAE,CAAC,CAAC,CAC7FrE,gBAAgB,CAACiE,cAAc,CAAC,CAChC9D,YAAY,CAAC8B,OAAO,CAAC,eAAe,CAAE3B,IAAI,CAACgE,SAAS,CAACL,cAAc,CAAC,CAAC,CACrEnE,WAAW,CAAC,IAAI,CAAC,CACrB,CAAE,MAAO4B,KAAK,CAAE,CACZC,OAAO,CAACD,KAAK,CAAC,iCAAiC,CAAEA,KAAK,CAAC,CAC3D,CACJ,CAAC,CAED,KAAM,CAAA6C,WAAW,CAAGA,CAAA,GAAM7E,aAAa,CAAC,EAAE,CAAC,CAE3C,KAAM,CAAA8E,kBAAkB,CAAGA,CAAA,GAAM,CAC7BxE,gBAAgB,CAAC,EAAE,CAAC,CACpBG,YAAY,CAACsE,UAAU,CAAC,eAAe,CAAC,CAC5C,CAAC,CAGD,mBACInG,IAAA,CAAAI,SAAA,EAAAgG,QAAA,cACIlG,KAAA,QAAKmG,SAAS,CAAC,mBAAmB,CAAAD,QAAA,eAC9BpG,IAAA,CAACX,MAAM,EAACgH,SAAS,CAAC,0BAA0B,CAACC,MAAM,CAAC,IAAI,CAAAF,QAAA,cACpDlG,KAAA,QAAKmG,SAAS,CAAC,2BAA2B,CAAAD,QAAA,eACtCpG,IAAA,CAACjB,IAAI,EAACwH,EAAE,CAAC,GAAG,CAAAH,QAAA,cACRpG,IAAA,QAAKqG,SAAS,CAAC,uBAAuB,CAAAD,QAAA,cAClCpG,IAAA,CAACN,SAAS,EAAC8G,IAAI,CAAE,EAAG,CAAE,CAAC,CACtB,CAAC,CACJ,CAAC,cACPxG,IAAA,CAACV,IAAI,EAACmH,QAAQ,CAAE3B,kBAAmB,CAACuB,SAAS,CAAC,aAAa,CAAAD,QAAA,cACvDpG,IAAA,CAACT,UAAU,EAAA6G,QAAA,cACPpG,IAAA,CAACR,WAAW,EACRkH,WAAW,CAAE/E,CAAC,CAAC,KAAK,CAAE,CACtB,aAAW,QAAQ,CACnB,mBAAiB,cAAc,CAC/B0E,SAAS,CAAC,yBAAyB,CACnCxB,KAAK,CAAE1D,UAAW,CAClBwF,QAAQ,CAAEjC,kBAAmB,CAChC,CAAC,CACM,CAAC,CACX,CAAC,cACP1E,IAAA,CAACL,MAAM,EAACiH,OAAO,CAAE9B,kBAAmB,CAACuB,SAAS,CAAC,mBAAmB,CAAE,CAAC,EACpE,CAAC,CACF,CAAC,CACR9E,QAAQ,eACLvB,IAAA,CAAChB,SAAS,EAACqH,SAAS,CAAC,sBAAsB,CAAAD,QAAA,cACvCpG,IAAA,CAACb,GAAG,EAAC0H,EAAE,CAAE,CAAE,CAACC,EAAE,CAAE,CAAE,CAACT,SAAS,CAAC,UAAU,CAAAD,QAAA,CAClC/E,aAAa,CAACqB,MAAM,CAAG,CAAC,EAAIrB,aAAa,CAACwB,GAAG,CAAC,CAACJ,IAAI,CAAEsE,GAAG,gBACrD/G,IAAA,CAACd,GAAG,EAAW2H,EAAE,CAAE,EAAG,CAACC,EAAE,CAAE,EAAG,CAACT,SAAS,CAAC,WAAW,CAAAD,QAAA,cAChDpG,IAAA,CAACjB,IAAI,EAACwH,EAAE,CAAG,gBAAe9D,IAAI,CAACiD,OAAQ,EAAE,CAAAU,QAAA,cACrCpG,IAAA,CAACf,IAAI,EAAAmH,QAAA,cACDlG,KAAA,QAAKmG,SAAS,CAAC,mBAAmB,CAAAD,QAAA,eAC9BpG,IAAA,CAACf,IAAI,CAAC+H,GAAG,EAACC,OAAO,CAAC,KAAK,CAACC,GAAG,CAAEzE,IAAI,CAACM,aAAc,CAAE,CAAC,cACnD/C,IAAA,QAAKqG,SAAS,CAAC,gBAAgB,CAAAD,QAAA,CAAE3D,IAAI,CAAC0E,KAAK,CAAM,CAAC,cAClDnH,IAAA,QAAKqG,SAAS,CAAC,kBAAkB,CAACe,KAAK,CAAE,CAACC,MAAM,CAAE,KAAK,CAAE,CAAAjB,QAAA,CAAE3D,IAAI,CAACyB,IAAI,CAAM,CAAC,EAC1E,CAAC,CACJ,CAAC,CACL,CAAC,EATD6C,GAUL,CACR,CAAC,CACD,CAAC,CACC,CAAC,CAEf,CAACxF,QAAQ,eACNrB,KAAA,CAAClB,SAAS,EAACqH,SAAS,CAAC,sBAAsB,CAAAD,QAAA,eACvCpG,IAAA,OAAAoG,QAAA,CAAKzE,CAAC,CAAC,MAAM,CAAC,CAAK,CAAC,cACpBzB,KAAA,CAACf,GAAG,EAACkH,SAAS,CAAC,YAAY,CAAAD,QAAA,EACtB3E,aAAa,CAACoB,GAAG,CAAC,CAACqC,IAAI,CAAEoC,KAAK,gBAC3BtH,IAAA,CAACd,GAAG,EAAa2H,EAAE,CAAE,CAAE,CAACU,EAAE,CAAE,CAAE,CAACT,EAAE,CAAE,CAAE,CAACU,EAAE,CAAE,CAAE,CAACnB,SAAS,CAAC,aAAa,CAAAD,QAAA,cAChEpG,IAAA,CAACZ,MAAM,EAACqI,GAAG,CAAEvG,MAAO,CAAC+F,OAAO,CAAC,cAAc,CAACL,OAAO,CAAEA,CAAA,GAAMxF,aAAa,CAAC8D,IAAI,CAAE,CAACmB,SAAS,CAAC,eAAe,CAAAD,QAAA,CAAEnC,eAAe,CAACiB,IAAI,CAAC,CAAS,CAAC,EADpIoC,KAEL,CACR,CAAC,cACFtH,IAAA,CAACd,GAAG,EAAC2H,EAAE,CAAE,CAAE,CAACU,EAAE,CAAE,CAAE,CAACT,EAAE,CAAE,CAAE,CAACU,EAAE,CAAE,CAAE,CAACnB,SAAS,CAAC,kBAAkB,CAAAD,QAAA,cACzDpG,IAAA,CAACZ,MAAM,EAAC6H,OAAO,CAAC,cAAc,CAACL,OAAO,CAAEV,kBAAmB,CAACG,SAAS,CAAC,eAAe,CAAAD,QAAA,CAAEzE,CAAC,CAAC,MAAM,CAAC,CAAS,CAAC,CACzG,CAAC,EACL,CAAC,cACN3B,IAAA,OAAAoG,QAAA,CAAKzE,CAAC,CAAC,MAAM,CAAC,CAAK,CAAC,cACpB3B,IAAA,CAACb,GAAG,EAAC0H,EAAE,CAAE,CAAE,CAACC,EAAE,CAAE,CAAE,CAACT,SAAS,CAAC,UAAU,CAAAD,QAAA,CAClCtF,aAAa,CAAC+B,GAAG,CAAC,CAACJ,IAAI,CAAEsE,GAAG,gBACzB/G,IAAA,CAACd,GAAG,EAAW2H,EAAE,CAAE,EAAG,CAACC,EAAE,CAAE,EAAG,CAACT,SAAS,CAAC,MAAM,CAAAD,QAAA,cAC3CpG,IAAA,CAACjB,IAAI,EAACwH,EAAE,CAAE,WAAY,CAAAH,QAAA,cAClBpG,IAAA,CAACf,IAAI,EAAAmH,QAAA,cACDlG,KAAA,QAAK0G,OAAO,CAAEA,CAAA,GAAMnD,mBAAmB,CAAC9B,CAAC,CAACc,IAAI,CAACiB,QAAQ,CAAC,CAAE,CAAC2C,SAAS,CAAC,mBAAmB,CAAAD,QAAA,eACpFpG,IAAA,CAACf,IAAI,CAAC+H,GAAG,EAACC,OAAO,CAAC,KAAK,CAACC,GAAG,CAAEzE,IAAI,CAACM,aAAc,CAAE,CAAC,cACnD7C,KAAA,QAAKmG,SAAS,CAAC,gBAAgB,CAAAD,QAAA,EAAEzE,CAAC,CAACc,IAAI,CAACiB,QAAQ,CAAC,CAAC,GAAC,CAAC/B,CAAC,CAAC,IAAI,CAAC,EAAM,CAAC,cAClE3B,IAAA,MAAGqG,SAAS,CAAC,kBAAkB,CAAAD,QAAA,CAAE3D,IAAI,CAACyB,IAAI,CAAI,CAAC,EAC9C,CAAC,CACJ,CAAC,CACL,CAAC,EATD6C,GAUL,CACR,CAAC,CACD,CAAC,EACC,CAAC,EAEf,CAAC,CACR,CAAC,CAEX,CAEA,cAAe,CAAApG,UAAU","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}