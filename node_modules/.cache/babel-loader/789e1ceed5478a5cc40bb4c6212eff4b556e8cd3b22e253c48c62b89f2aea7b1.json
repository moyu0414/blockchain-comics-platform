{"ast":null,"code":"import React,{useState,useEffect}from'react';import{Link,useParams}from\"react-router-dom\";import{Container,Col,Row,Table,ButtonToolbar,Pagination,Modal,Button}from'react-bootstrap';import'./bootstrap.min.css';import axios from'axios';import{sortByTimestamp}from'../index';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const website=process.env.REACT_APP_Website;const API_KEY=process.env.REACT_APP_API_KEY;function DeleteChapter(){const[comic,setComic]=useState([]);const[chapters,setChapters]=useState([]);const{comicID}=useParams();const[loading,setLoading]=useState(true);const storedArrayJSON=localStorage.getItem('comicDatas');const currentAccount=localStorage.getItem(\"currentAccount\");const fetchedData=[];const[show,setShow]=useState(false);const[selectedChapter,setSelectedChapter]=useState(null);const[showConfirm,setShowConfirm]=useState(false);const[showFinal,setShowFinal]=useState(false);const headers={'api-key':API_KEY};let temp=[];let chapterInfo=[];const initData=async()=>{try{const storedArray=JSON.parse(storedArrayJSON);// 假设 storedArrayJSON 是一个 JSON 字符串\nfor(let i=0;i<storedArray.length;i++){if(storedArray[i].is_exist===0){const imageResponse=await axios.get(\"\".concat(website,\"/api/comicIMG/\").concat(storedArray[i].comic_id),{responseType:'blob',headers});const image=URL.createObjectURL(imageResponse.data);if(storedArray[i].comicID===comicID){let author;if(storedArray[i].creator==currentAccount){author='您是本作品的創作者!';}else{author=storedArray[i].creator;}temp.push({comicHash:storedArray[i].comic_id,comicID:storedArray[i].comicID,title:storedArray[i].title,description:storedArray[i].description,author:author,category:storedArray[i].category,image:image});}}}setComic(temp);try{const response=await axios.get(\"\".concat(website,\"/api/comicDetail\"),{headers,headers,params:{comicHash:temp[0].comicHash,currentAccount:currentAccount}});let chapters=response.data;sortByTimestamp(chapters);for(let i=0;i<chapters.length;i++){if(currentAccount==chapters[i].creator){let id='Chapter'+(i+1);chapterInfo.push({title:chapters[i].title,price:chapters[i].price,chapterID:id});}}setChapters(chapterInfo);console.log(chapterInfo);}catch(error){console.error('Error fetching records:',error);}setLoading(false);}catch(error){console.error('Error initializing contract:',error);}};useEffect(()=>{initData();},[comicID,currentAccount]);const[currentPage,setCurrentPage]=useState(1);const itemsPerPage=10;// 每頁顯示的章節數量\nconst totalPages=Math.ceil(chapters.length/itemsPerPage);const handlePageChange=page=>{setCurrentPage(page);};// 計算當前頁面的章節切片的起始索引\nconst startIndex=(currentPage-1)*itemsPerPage;const currentChapters=chapters.slice(startIndex,startIndex+itemsPerPage);const getPageItems=()=>{const pageItems=[];const maxPagesToShow=5;// 顯示的最大頁碼數量\nif(totalPages<=maxPagesToShow){// 如果總頁數小於等於最大顯示頁碼數，則顯示所有頁碼\nfor(let i=1;i<=totalPages;i++){pageItems.push(/*#__PURE__*/_jsx(Pagination.Item,{active:i===currentPage,onClick:()=>handlePageChange(i),children:i},i));}}else{// 計算中間的頁碼範圍\nconst middlePages=Math.floor(maxPagesToShow/2);let startPage=Math.max(2,currentPage-middlePages);let endPage=Math.min(totalPages-1,currentPage+middlePages);if(currentPage-startPage<=middlePages){endPage=Math.min(totalPages-1,startPage+maxPagesToShow-2);}if(endPage-currentPage<=middlePages){startPage=Math.max(2,endPage-maxPagesToShow+2);}// 第一頁\npageItems.push(/*#__PURE__*/_jsx(Pagination.Item,{active:currentPage===1,onClick:()=>handlePageChange(1),children:\"1\"},1));if(startPage>2){pageItems.push(/*#__PURE__*/_jsx(Pagination.Ellipsis,{},\"ellipsis-start\"));}// 中間的頁碼\nfor(let i=startPage;i<=endPage;i++){pageItems.push(/*#__PURE__*/_jsx(Pagination.Item,{active:i===currentPage,onClick:()=>handlePageChange(i),children:i},i));}if(endPage<totalPages-1){pageItems.push(/*#__PURE__*/_jsx(Pagination.Ellipsis,{},\"ellipsis-end\"));}// 最後一頁\npageItems.push(/*#__PURE__*/_jsx(Pagination.Item,{active:currentPage===totalPages,onClick:()=>handlePageChange(totalPages),children:totalPages},totalPages));}return pageItems;};const handleClose=()=>{setShow(false);setSelectedChapter(null);};const handleShow=chapter=>{setSelectedChapter(chapter);setShow(true);};const handleConfirmClose=()=>setShowConfirm(false);const handleFinalClose=()=>setShowFinal(false);const handleConfirmShow=chapter=>{setSelectedChapter(chapter);setShow(true);setShowConfirm(true);};const handleConfirm=()=>{if(selectedChapter!==null){const chapter=currentChapters[selectedChapter];}setShowConfirm(false);setShow(false);setShowFinal(true);};return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(\"div\",{children:[!loading&&/*#__PURE__*/_jsxs(Container,{className:\"deleteChapter\",children:[/*#__PURE__*/_jsx(Row,{className:\"pt-5\",children:/*#__PURE__*/_jsxs(Link,{to:\"/comicDetail/\".concat(comic[0].comicID),children:[/*#__PURE__*/_jsx(\"div\",{className:\"d-block mx-auto img-fluid createSuccess-image-container\",children:/*#__PURE__*/_jsx(\"img\",{className:\"d-block mx-auto img-fluid\",src:comic[0].image,alt:\"800x400\"})}),/*#__PURE__*/_jsx(\"h4\",{className:\"text-center pt-2\",children:comic[0].title})]})}),/*#__PURE__*/_jsx(Row,{className:\"pt-3 deleteChapter-title-section\",children:/*#__PURE__*/_jsxs(Col,{className:\"\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex justify-content-between align-items-center\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"fw-bold mb-0\",children:\"\\u7AE0\\u7BC0\\u76EE\\u9304\"}),/*#__PURE__*/_jsx(\"button\",{className:\"mt-2 deleteAll-btn\",children:\"\\u522A\\u9664\\u672C\\u6F2B\\u756B\"})]}),/*#__PURE__*/_jsx(\"hr\",{})]})}),/*#__PURE__*/_jsx(Row,{className:\"justify-content-center\",children:/*#__PURE__*/_jsx(Col,{className:\"d-flex justify-content-center chapter-table\",children:/*#__PURE__*/_jsx(Table,{size:\"sm\",children:/*#__PURE__*/_jsx(\"tbody\",{children:currentChapters.map((chapter,index)=>/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsxs(\"td\",{className:\"text-center fw-bold\",children:[\"\\u7B2C \",startIndex+index+1,\" \\u7AE0\"]}),/*#__PURE__*/_jsx(\"td\",{className:\"text-center\",children:chapter.title}),/*#__PURE__*/_jsx(\"td\",{className:\"text-center\",children:chapter.price}),/*#__PURE__*/_jsx(\"td\",{className:\"text-center\",children:/*#__PURE__*/_jsx(\"button\",{className:\"delete-btn\",onClick:()=>handleConfirmShow(index),children:\"\\u522A\\u9664\"})})]},index))})})})}),selectedChapter!==null&&/*#__PURE__*/_jsxs(Modal,{show:show,onHide:handleClose,dialogClassName:\"custom-modal-content\",children:[/*#__PURE__*/_jsxs(Modal.Body,{children:[/*#__PURE__*/_jsx(\"h3\",{children:\"\\u78BA\\u5B9A\\u522A\\u9664\"}),/*#__PURE__*/_jsxs(\"h4\",{children:[\"\\u7B2C\",selectedChapter+1,\"\\u7AE0 \",currentChapters[selectedChapter].title,\"\\uFF1F\"]})]}),/*#__PURE__*/_jsxs(Modal.Footer,{className:\"custom-modal-footer\",children:[/*#__PURE__*/_jsx(Button,{className:\"custom-modal-button\",onClick:handleClose,children:\"\\u53D6\\u6D88\"}),/*#__PURE__*/_jsx(Button,{className:\"custom-modal-button\",onClick:handleConfirm,children:\"\\u78BA\\u5B9A\"})]})]}),/*#__PURE__*/_jsxs(Modal,{show:showFinal,onHide:handleFinalClose,dialogClassName:\"custom-modal-content\",children:[/*#__PURE__*/_jsx(Modal.Body,{children:/*#__PURE__*/_jsx(\"h3\",{children:\"\\u5DF2\\u6210\\u529F\\u522A\\u9664\"})}),/*#__PURE__*/_jsx(Modal.Footer,{className:\"custom-modal-footer\",children:/*#__PURE__*/_jsx(Button,{className:\"custom-modal-button\",onClick:handleFinalClose,children:\"\\u78BA\\u5B9A\"})})]}),/*#__PURE__*/_jsx(Row,{className:\"pt-2 pb-5 justify-content-center table-button\",children:/*#__PURE__*/_jsx(Col,{className:\"d-flex justify-content-center\",children:/*#__PURE__*/_jsx(ButtonToolbar,{\"aria-label\":\"Toolbar with pagination\",children:/*#__PURE__*/_jsxs(Pagination,{children:[/*#__PURE__*/_jsx(Pagination.Prev,{onClick:()=>handlePageChange(currentPage-1),disabled:currentPage<=1,className:\"pagination-button\"}),getPageItems(),/*#__PURE__*/_jsx(Pagination.Next,{onClick:()=>handlePageChange(currentPage+1),disabled:currentPage>=totalPages,className:\"pagination-button\"})]})})})})]}),loading&&/*#__PURE__*/_jsx(\"div\",{className:\"loading-container\",children:/*#__PURE__*/_jsx(\"div\",{children:\"\\u9801\\u9762\\u52A0\\u8F09\\u4E2D\\uFF0C\\u8ACB\\u7A0D\\u5F8C...\"})})]})});}export default DeleteChapter;","map":{"version":3,"names":["React","useState","useEffect","Link","useParams","Container","Col","Row","Table","ButtonToolbar","Pagination","Modal","Button","axios","sortByTimestamp","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","website","process","env","REACT_APP_Website","API_KEY","REACT_APP_API_KEY","DeleteChapter","comic","setComic","chapters","setChapters","comicID","loading","setLoading","storedArrayJSON","localStorage","getItem","currentAccount","fetchedData","show","setShow","selectedChapter","setSelectedChapter","showConfirm","setShowConfirm","showFinal","setShowFinal","headers","temp","chapterInfo","initData","storedArray","JSON","parse","i","length","is_exist","imageResponse","get","concat","comic_id","responseType","image","URL","createObjectURL","data","author","creator","push","comicHash","title","description","category","response","params","id","price","chapterID","console","log","error","currentPage","setCurrentPage","itemsPerPage","totalPages","Math","ceil","handlePageChange","page","startIndex","currentChapters","slice","getPageItems","pageItems","maxPagesToShow","Item","active","onClick","children","middlePages","floor","startPage","max","endPage","min","Ellipsis","handleClose","handleShow","chapter","handleConfirmClose","handleFinalClose","handleConfirmShow","handleConfirm","className","to","src","alt","size","map","index","onHide","dialogClassName","Body","Footer","Prev","disabled","Next"],"sources":["C:/Users/user1/Desktop/blockchain-comics-platform/frontend/src/routes/deleteChapter.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { Link, useParams } from \"react-router-dom\";\r\nimport { Container, Col, Row, Table, ButtonToolbar, Pagination, Modal, Button } from 'react-bootstrap';\r\nimport './bootstrap.min.css';\r\nimport axios from 'axios';\r\nimport { sortByTimestamp } from '../index';\r\nconst website = process.env.REACT_APP_Website;\r\nconst API_KEY = process.env.REACT_APP_API_KEY;\r\n\r\nfunction DeleteChapter() {\r\n    const [comic, setComic] = useState([]);\r\n    const [chapters, setChapters] = useState([]);\r\n    const { comicID } = useParams();\r\n    const [loading, setLoading] = useState(true);\r\n    const storedArrayJSON = localStorage.getItem('comicDatas');\r\n    const currentAccount = localStorage.getItem(\"currentAccount\");\r\n    const fetchedData = [];\r\n    const [show, setShow] = useState(false);\r\n    const [selectedChapter, setSelectedChapter] = useState(null);\r\n    const [showConfirm, setShowConfirm] = useState(false);\r\n    const [showFinal, setShowFinal] = useState(false);\r\n    const headers = {'api-key': API_KEY};\r\n\r\n    let temp = [];\r\n    let chapterInfo = [];\r\n\r\n    const initData = async () => {\r\n        try {\r\n            const storedArray = JSON.parse(storedArrayJSON); // 假设 storedArrayJSON 是一个 JSON 字符串\r\n            for (let i = 0; i < storedArray.length; i++) {\r\n                if (storedArray[i].is_exist === 0) {\r\n                    const imageResponse = await axios.get(`${website}/api/comicIMG/${storedArray[i].comic_id}`, { responseType: 'blob', headers });\r\n                    const image = URL.createObjectURL(imageResponse.data);\r\n                    if (storedArray[i].comicID === comicID) {\r\n                        let author;\r\n                        if (storedArray[i].creator == currentAccount) {\r\n                            author = '您是本作品的創作者!';\r\n                        } else {\r\n                            author = storedArray[i].creator;\r\n                        }\r\n                        temp.push({\r\n                            comicHash: storedArray[i].comic_id,\r\n                            comicID: storedArray[i].comicID,\r\n                            title: storedArray[i].title,\r\n                            description: storedArray[i].description,\r\n                            author: author,\r\n                            category: storedArray[i].category,\r\n                            image: image,\r\n                        });\r\n                    }\r\n                }\r\n            }\r\n            setComic(temp);\r\n\r\n            try {\r\n                const response = await axios.get(`${website}/api/comicDetail`, {\r\n                    headers, headers,\r\n                    params: {\r\n                        comicHash: temp[0].comicHash,\r\n                        currentAccount: currentAccount\r\n                    }\r\n                });\r\n                let chapters = response.data;\r\n                sortByTimestamp(chapters);\r\n\r\n                for (let i = 0; i < chapters.length; i++) {\r\n                    if (currentAccount == chapters[i].creator){\r\n                        let id = 'Chapter' + (i+1);\r\n                        chapterInfo.push({\r\n                            title: chapters[i].title,\r\n                            price: chapters[i].price,\r\n                            chapterID: id\r\n                        });\r\n                    }\r\n                }\r\n                setChapters(chapterInfo);\r\n                console.log(chapterInfo);\r\n            } catch (error) {\r\n                console.error('Error fetching records:', error);\r\n            }\r\n            setLoading(false);\r\n        } catch (error) {\r\n            console.error('Error initializing contract:', error);\r\n        }\r\n    };\r\n\r\n    useEffect(() => {\r\n        initData();\r\n    }, [comicID, currentAccount]);\r\n\r\n    \r\n    const [currentPage, setCurrentPage] = useState(1);\r\n    const itemsPerPage = 10; // 每頁顯示的章節數量\r\n    const totalPages = Math.ceil(chapters.length / itemsPerPage);\r\n\r\n    const handlePageChange = (page) => {\r\n        setCurrentPage(page);\r\n    };\r\n\r\n    // 計算當前頁面的章節切片的起始索引\r\n    const startIndex = (currentPage - 1) * itemsPerPage;\r\n    const currentChapters = chapters.slice(startIndex, startIndex + itemsPerPage);\r\n\r\n    const getPageItems = () => {\r\n        const pageItems = [];\r\n        const maxPagesToShow = 5; // 顯示的最大頁碼數量\r\n    \r\n        if (totalPages <= maxPagesToShow) {\r\n            // 如果總頁數小於等於最大顯示頁碼數，則顯示所有頁碼\r\n            for (let i = 1; i <= totalPages; i++) {\r\n                pageItems.push(\r\n                    <Pagination.Item key={i} active={i === currentPage} onClick={() => handlePageChange(i)}>\r\n                        {i}\r\n                    </Pagination.Item>\r\n                );\r\n            }\r\n        } else {\r\n            // 計算中間的頁碼範圍\r\n            const middlePages = Math.floor(maxPagesToShow / 2);\r\n            let startPage = Math.max(2, currentPage - middlePages);\r\n            let endPage = Math.min(totalPages - 1, currentPage + middlePages);\r\n    \r\n            if (currentPage - startPage <= middlePages) {\r\n                endPage = Math.min(totalPages - 1, startPage + maxPagesToShow - 2);\r\n            }\r\n    \r\n            if (endPage - currentPage <= middlePages) {\r\n                startPage = Math.max(2, endPage - maxPagesToShow + 2);\r\n            }\r\n    \r\n            // 第一頁\r\n            pageItems.push(\r\n                <Pagination.Item key={1} active={currentPage === 1} onClick={() => handlePageChange(1)}>\r\n                    1\r\n                </Pagination.Item>\r\n            );\r\n    \r\n            if (startPage > 2) {\r\n                pageItems.push(<Pagination.Ellipsis key=\"ellipsis-start\" />);\r\n            }\r\n    \r\n            // 中間的頁碼\r\n            for (let i = startPage; i <= endPage; i++) {\r\n                pageItems.push(\r\n                    <Pagination.Item key={i} active={i === currentPage} onClick={() => handlePageChange(i)}>\r\n                        {i}\r\n                    </Pagination.Item>\r\n                );\r\n            }\r\n    \r\n            if (endPage < totalPages - 1) {\r\n                pageItems.push(<Pagination.Ellipsis key=\"ellipsis-end\" />);\r\n            }\r\n    \r\n            // 最後一頁\r\n            pageItems.push(\r\n                <Pagination.Item key={totalPages} active={currentPage === totalPages} onClick={() => handlePageChange(totalPages)}>\r\n                    {totalPages}\r\n                </Pagination.Item>\r\n            );\r\n        }\r\n    \r\n        return pageItems;\r\n    };\r\n\r\n    const handleClose = () => {\r\n        setShow(false);\r\n        setSelectedChapter(null);\r\n    };\r\n    const handleShow = (chapter) => {\r\n        setSelectedChapter(chapter);\r\n        setShow(true);\r\n    };\r\n\r\n    const handleConfirmClose = () => setShowConfirm(false);\r\n    const handleFinalClose = () => setShowFinal(false);\r\n\r\n    const handleConfirmShow = (chapter) => {\r\n        setSelectedChapter(chapter);\r\n        setShow(true);\r\n        setShowConfirm(true);\r\n    };\r\n\r\n    const handleConfirm = () => {\r\n        if (selectedChapter !== null) {\r\n            const chapter = currentChapters[selectedChapter];\r\n        }\r\n        setShowConfirm(false);\r\n        setShow(false);\r\n        setShowFinal(true);\r\n    };\r\n\r\n    return (\r\n        <>\r\n            <div>\r\n                {!loading &&\r\n                    <Container className='deleteChapter'>\r\n                        {/* 此處會放上該漫畫的封面+名稱供預覽 跟創作者頁面creatorPage的一樣*/}\r\n                        <Row className=\"pt-5\">\r\n                            <Link to={`/comicDetail/${comic[0].comicID}`}>\r\n                                <div className=\"d-block mx-auto img-fluid createSuccess-image-container\">\r\n                                    <img\r\n                                        className=\"d-block mx-auto img-fluid\"\r\n                                        src={comic[0].image}\r\n                                        alt=\"800x400\"\r\n                                    />\r\n                                </div>\r\n                                <h4 className='text-center pt-2'>{comic[0].title}</h4>\r\n                            </Link>\r\n                        </Row>\r\n                        <Row className='pt-3 deleteChapter-title-section'>\r\n                            <Col className=''>\r\n                                <div className='d-flex justify-content-between align-items-center'>\r\n                                    <h3 className='fw-bold mb-0'>章節目錄</h3>\r\n                                    <button className='mt-2 deleteAll-btn'>刪除本漫畫</button>\r\n                                </div>\r\n                                <hr/>\r\n                            </Col>\r\n                        </Row>\r\n                        <Row className='justify-content-center'>\r\n                            <Col className='d-flex justify-content-center chapter-table'>\r\n                                <Table size=\"sm\">\r\n                                    <tbody>\r\n                                        {currentChapters.map((chapter, index) => (\r\n                                            <tr key={index}>\r\n                                                <td className='text-center fw-bold'>第 {startIndex + index + 1} 章</td>\r\n                                                <td className='text-center'>{chapter.title}</td>\r\n                                                <td className='text-center'>{chapter.price}</td>\r\n                                                <td className='text-center'>\r\n                                                    <button \r\n                                                        className=\"delete-btn\"\r\n                                                        onClick={() => handleConfirmShow(index)}\r\n                                                    >\r\n                                                        刪除\r\n                                                    </button>\r\n                                                </td>\r\n                                            </tr>\r\n                                        ))}\r\n                                    </tbody>\r\n                                </Table>\r\n                            </Col>\r\n                        </Row>\r\n                        {selectedChapter !== null && (\r\n                            <Modal show={show} onHide={handleClose} dialogClassName=\"custom-modal-content\">\r\n                                <Modal.Body>\r\n                                    <h3>確定刪除</h3>\r\n                                    <h4>第{selectedChapter + 1}章 {currentChapters[selectedChapter].title}？</h4>\r\n                                </Modal.Body>\r\n                                <Modal.Footer className=\"custom-modal-footer\">\r\n                                    <Button className=\"custom-modal-button\" onClick={handleClose}>\r\n                                        取消\r\n                                    </Button>\r\n                                    <Button className=\"custom-modal-button\" onClick={handleConfirm}>\r\n                                        確定\r\n                                    </Button>\r\n                                </Modal.Footer>\r\n                            </Modal>\r\n                        )}\r\n                        <Modal show={showFinal} onHide={handleFinalClose} dialogClassName=\"custom-modal-content\">\r\n                            <Modal.Body>\r\n                                <h3>已成功刪除</h3>\r\n                            </Modal.Body>\r\n                            <Modal.Footer className=\"custom-modal-footer\">\r\n                                <Button className=\"custom-modal-button\" onClick={handleFinalClose}>\r\n                                    確定\r\n                                </Button>\r\n                            </Modal.Footer>\r\n                        </Modal>\r\n\r\n                        <Row className='pt-2 pb-5 justify-content-center table-button'>\r\n                            <Col className='d-flex justify-content-center'>\r\n                                <ButtonToolbar aria-label=\"Toolbar with pagination\">\r\n                                    <Pagination>\r\n                                        <Pagination.Prev \r\n                                            onClick={() => handlePageChange(currentPage - 1)} disabled={currentPage <= 1} \r\n                                            className='pagination-button'\r\n                                        />\r\n                                        {getPageItems()}\r\n                                        <Pagination.Next \r\n                                            onClick={() => handlePageChange(currentPage + 1)} disabled={currentPage >= totalPages} \r\n                                            className='pagination-button'\r\n                                        />\r\n                                    </Pagination>\r\n                                </ButtonToolbar>\r\n                            </Col>\r\n                        </Row>\r\n                    </Container>\r\n                }\r\n                {loading &&  \r\n                    <div className=\"loading-container\">\r\n                        <div>頁面加載中，請稍後...</div>\r\n                    </div>\r\n                }\r\n            </div>\r\n        </>\r\n    );\r\n}\r\n\r\nexport default DeleteChapter;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}